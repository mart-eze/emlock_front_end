{"version":3,"file":"ej2-kanban.umd.min.js","sources":["../src/kanban/base/constant.js","../src/kanban/base/data.js","../src/kanban/models/swimlane-settings.js","../src/kanban/models/card-settings.js","../src/kanban/models/dialog-settings.js","../src/kanban/models/columns.js","../src/kanban/models/stacked-headers.js","../src/kanban/models/sort-settings.js","../src/kanban/base/css-constant.js","../src/kanban/actions/action.js","../src/kanban/actions/crud.js","../src/kanban/actions/drag.js","../src/kanban/actions/dialog.js","../src/kanban/actions/keyboard.js","../src/kanban/actions/tooltip.js","../src/kanban/actions/touch.js","../src/kanban/base/mobile-layout.js","../src/kanban/base/layout-render.js","../src/kanban/base/virtual-layout-render.js","../src/kanban/base/kanban.js"],"sourcesContent":["/**\n * Kanban Constants\n */\n// Constants for public events\n/** @private */\nexport var actionBegin = 'actionBegin';\n/** @private */\nexport var actionComplete = 'actionComplete';\n/** @private */\nexport var actionFailure = 'actionFailure';\n/** @private */\nexport var cardClick = 'cardClick';\n/** @private */\nexport var cardDoubleClick = 'cardDoubleClick';\n/** @private */\nexport var cardRendered = 'cardRendered';\n/** @private */\nexport var queryCellInfo = 'queryCellInfo';\n/** @private */\nexport var dataBinding = 'dataBinding';\n/** @private */\nexport var dataBound = 'dataBound';\n/** @private */\nexport var dragStart = 'dragStart';\n/** @private */\nexport var drag = 'drag';\n/** @private */\nexport var dragStop = 'dragStop';\n/** @private */\nexport var documentClick = 'document-click';\n/** @private */\nexport var dialogOpen = 'dialogOpen';\n/** @private */\nexport var dialogClose = 'dialogClose';\n// Constants for internal events\n/** @private */\nexport var contentReady = 'content-ready';\n/** @private */\nexport var dataReady = 'data-ready';\n/** @private */\nexport var bottomSpace = 25;\n/** @private */\nexport var cardSpace = 16;\n/** @private */\nexport var toggleWidth = 50;\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend, isNullOrUndefined, formatUnit } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport * as events from './constant';\n/**\n * Kanban data module\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Kanban} parent Accepts the instance of the Kanban\n     */\n    function Data(parent) {\n        this.initload = false;\n        this.dataState = { isPending: false, resolver: null, isDataChanged: false };\n        this.parent = parent;\n        this.keyField = this.parent.cardSettings.headerField;\n        this.dataState = { isDataChanged: false };\n        this.isObservable = false;\n        this.initDataManager(parent.dataSource, parent.query);\n        this.refreshDataManager();\n    }\n    /**\n     * The function used to initialize dataManager` and query\n     *\n     * @param {Object[] | DataManager} dataSource Accepts the dataSource as collection of objects or Datamanager instance.\n     * @param {Query} query Accepts the query to process the data from collections.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n        this.kanbanData = new DataManager(this.parent.kanbanData);\n    };\n    /**\n     * @returns {boolean} returns whether its remote data\n     * @hidden\n     */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    /**\n     * @returns {boolean} returns the column key fields\n     * @hidden\n     */\n    Data.prototype.columnKeyFields = function () {\n        var columns = [];\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (column.keyField.toString().split(',').length > 1) {\n                for (var _b = 0, _c = column.keyField.toString().split(','); _b < _c.length; _b++) {\n                    var innerColumns = _c[_b];\n                    columns.push(innerColumns.trim());\n                }\n            }\n            else {\n                columns.push(column.keyField.toString());\n            }\n        }\n        return columns;\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {string} parameter Accepts the parameter that needs to be sent to the service end.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getQuery = function (parameter) {\n        var query = this.query.clone();\n        if (this.isRemote() && this.parent.enableVirtualization) {\n            var cardHeight = this.parent.cardHeight === 'auto' ? 100 :\n                parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10);\n            var take = this.parent.height === 'auto' ? (Math.ceil(window.innerHeight / cardHeight) * 2) :\n                (Math.ceil(parseInt(formatUnit(this.parent.height).split('px')[0], 10) / cardHeight) * 2);\n            var columns = this.columnKeyFields();\n            for (var i = 0; i < columns.length; i++) {\n                query.where(this.parent.keyField, 'equal', columns[i]);\n            }\n            query.take(take);\n            if (isNullOrUndefined(parameter)) {\n                parameter = 'KanbanVirtualization';\n            }\n            query.addParams('KanbanVirtualization', parameter);\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            this.isObservable = true;\n            return def.promise;\n        }\n        return this.dataManager.executeQuery(query);\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, index) {\n        var _this = this;\n        var dataArgs = args;\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'cardChanged' || args.requestType === 'cardRemoved' || args.requestType === 'cardCreated') {\n                var editArgs_1 = args;\n                editArgs_1.promise = deff.promise;\n                editArgs_1.state = state;\n                editArgs_1.index = index;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function () {\n                    _this.setState({ isPending: true, resolver: def.resolve });\n                    _this.parent.trigger(events.dataStateChange, state);\n                    editArgs_1.addedRecords.forEach(function (data) {\n                        _this.parent.kanbanData.push(data);\n                    });\n                    editArgs_1.changedRecords.forEach(function (changedRecord) {\n                        var cardObj = _this.parent.kanbanData.filter(function (data) {\n                            return data[_this.parent.cardSettings.headerField] ===\n                                changedRecord[_this.parent.cardSettings.headerField];\n                        })[0];\n                        extend(cardObj, changedRecord);\n                    });\n                    editArgs_1.deletedRecords.forEach(function (deletedRecord) {\n                        var index = _this.parent.kanbanData.findIndex(function (data) {\n                            return data[_this.parent.cardSettings.headerField] === deletedRecord[_this.parent.cardSettings.headerField];\n                        });\n                        _this.parent.kanbanData.splice(index, 1);\n                    });\n                }).catch(function () { _this.parent.hideSpinner(); void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * The function used to get the table name from the given Query\n     *\n     * @returns {string} Returns the table name.\n     * @private\n     */\n    Data.prototype.getTable = function () {\n        if (this.parent.query) {\n            var query = this.getQuery();\n            return query.fromTable;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * The function is used to send the request and get response from datamanager\n     *\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.refreshDataManager = function () {\n        var _this = this;\n        var dataManager = this.getData(this.getQuery());\n        dataManager.then(function (e) {\n            return _this.dataManagerSuccess(e);\n        }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    /**\n     * The function is used to handle the success response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager success result\n     * @param type\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    Data.prototype.dataManagerSuccess = function (e, type, offlineArgs, index) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (type) {\n            this.updateKanbanData(e);\n            if (this.parent.enableVirtualization && this.isRemote()) {\n                this.parent.virtualLayoutModule.refresh();\n            }\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                _this.updateKanbanData(args);\n                _this.parent.notify(events.dataReady, { processedData: _this.parent.kanbanData });\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        if (this.initload) {\n            this.parent.layoutModule.refresh();\n            this.parent.renderTemplates();\n        }\n        this.initload = true;\n    };\n    /**\n     * The function is used to handle the update the column data count for remote, and update kanbanData while perform the CRUD action\n     *\n     * @param {ReturnType} args Accepts the dataManager success result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateKanbanData = function (args) {\n        var resultData = extend([], !isNullOrUndefined(args.result.result) ?\n            args.result.result : args.result, null, true);\n        if (this.isRemote() && this.parent.enableVirtualization && resultData.length > 0\n            && !isNullOrUndefined(args.result.count)) {\n            var columnsKeyFields = this.columnKeyFields();\n            for (var i = 0; i < columnsKeyFields.length; i++) {\n                if (args.result.count[i].Key === columnsKeyFields[i]) {\n                    this.parent.columnDataCount[columnsKeyFields[i]] = args.result.count[i].Value;\n                }\n            }\n        }\n        this.parent.kanbanData = resultData;\n        this.kanbanData = new DataManager(this.parent.kanbanData);\n    };\n    /**\n     * The function is used to handle the failure response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager failure result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    /**\n     * The function is used to perform the insert, update, delete and batch actions in datamanager\n     *\n     * @param {string} updateType Accepts the update type action\n     * @param {SaveChanges} params Accepts the savechanges params\n     * @param {string} type Accepts the requestType as string\n     * @param {Object} data Accepts the data to perform crud action\n     * @param {number} index Accepts the index to refresh the data into UI\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @param {string} dataDropIndexKeyFieldValue Accepts the dropped index key field value card\n     * @param {number} draggedKey Accepts the dragged keyfield of the column\n     * @param {number} droppedKey Accepts the dropped keyfield of the column\n     * @param {number} isMultipleDrag Accepts boolean value based on the multiple drag of the cards\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateDataManager = function (updateType, params, type, data, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promise;\n        var actionArgs = {\n            requestType: type, cancel: false, addedRecords: params.addedRecords,\n            changedRecords: params.changedRecords, deletedRecords: params.deletedRecords\n        };\n        this.setState({ isDataChanged: true });\n        this.eventPromise(actionArgs, this.query, index);\n        this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n            if (!offlineArgs.cancel) {\n                promise = _this.syncDataSource(_this.dataManager, updateType, params, data, isDropped, dataDropIndexKeyFieldValue);\n                if (_this.dataManager.dataSource.offline) {\n                    if (!_this.isObservable) {\n                        _this.syncDataSource(_this.kanbanData, updateType, params, data, isDropped, dataDropIndexKeyFieldValue);\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }\n                }\n                else {\n                    promise.then(function (args) {\n                        if (_this.parent.isDestroyed) {\n                            return;\n                        }\n                        var dataManager = _this.getData(_this.getQuery());\n                        dataManager.then(function (e) { return _this.dataManagerSuccess(e, 'DataSourceChange', offlineArgs, index); }).catch(function (e) { return _this.dataManagerFailure(e); });\n                        if (offlineArgs.requestType === 'cardCreated') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.addedRecords[0] = extend(offlineArgs.addedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.addedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardChanged') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.changedRecords[0] = extend(offlineArgs.changedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.changedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardRemoved') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.deletedRecords[0] = extend(offlineArgs.deletedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.deletedRecords, args);\n                            }\n                        }\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }).catch(function (e) {\n                        _this.dataManagerFailure(e);\n                    });\n                }\n            }\n        });\n    };\n    Data.prototype.syncDataSource = function (dataManager, updateType, params, data, isDropped, dataDropIndexKeyFieldValue) {\n        var _this = this;\n        var promise;\n        switch (updateType) {\n            case 'insert':\n                return dataManager.insert(data, this.getTable(), this.getQuery());\n            case 'update':\n                if (this.parent.enableVirtualization && !this.parent.dataModule.isRemote() && isDropped) {\n                    promise = dataManager.remove(this.keyField, data, this.getTable(), this.getQuery());\n                    promise = dataManager.insert(data, this.getTable(), this.getQuery(), dataManager.dataSource.json.findIndex(function (data) {\n                        return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                    }));\n                    return promise;\n                }\n                else {\n                    return dataManager.update(this.keyField, data, this.getTable(), this.getQuery());\n                }\n            case 'delete':\n                return dataManager.remove(this.keyField, data, this.getTable(), this.getQuery());\n            case 'batch':\n                if (!this.parent.dataModule.isRemote() && isDropped && this.parent.enableVirtualization && data) {\n                    for (var i = 0; i < data.length; i++) {\n                        promise = dataManager.remove(this.keyField, data[i], this.getTable(), this.getQuery());\n                    }\n                    var currentIndex = dataManager.dataSource.json.findIndex(function (data) {\n                        return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                    });\n                    for (var i = 0; i < data.length; i++, currentIndex++) {\n                        promise = dataManager.insert(data[i], this.getTable(), this.getQuery(), currentIndex);\n                    }\n                    return promise;\n                }\n                else {\n                    return dataManager.saveChanges(params, this.keyField, this.getTable(), this.getQuery());\n                }\n            default:\n                return promise;\n        }\n    };\n    Data.prototype.modifyArrayData = function (onLineData, e) {\n        if (onLineData.length === e.length) {\n            for (var i = 0; i < e.length; i++) {\n                onLineData[i] = extend(onLineData[i], e[i]);\n            }\n        }\n        return onLineData;\n    };\n    /**\n     * The function is used to refresh the UI once the data manager action is completed\n     *\n     * @param {ActionEventArgs} args Accepts the ActionEventArgs to refresh UI.\n     * @param {number} position Accepts the index to refresh UI.\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @returns {void}\n     */\n    Data.prototype.refreshUI = function (args, position, isDropped) {\n        var _this = this;\n        if (this.parent.enableVirtualization) {\n            this.parent.virtualLayoutModule.columnData = this.parent.virtualLayoutModule.getColumnCards();\n            args.addedRecords.forEach(function (data, index) {\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position + index, isDropped, args.requestType);\n            });\n            args.changedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position, isDropped, args.requestType);\n                if (_this.parent.virtualLayoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n            });\n            this.parent.virtualLayoutModule.refresh();\n        }\n        else {\n            this.parent.layoutModule.columnData = this.parent.layoutModule.getColumnCards();\n            if (this.parent.swimlaneSettings.keyField) {\n                this.parent.layoutModule.kanbanRows = this.parent.layoutModule.getRows();\n                this.parent.layoutModule.swimlaneData = this.parent.layoutModule.getSwimlaneCards();\n            }\n            args.addedRecords.forEach(function (data, index) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position + index);\n            });\n            args.changedRecords.forEach(function (data) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.removeCard(data);\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position);\n                if (_this.parent.layoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.layoutModule.removeCard(data);\n            });\n            this.parent.layoutModule.refresh();\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.parent.trigger(events.dataBound, args, function () { return _this.parent.hideSpinner(); });\n    };\n    return Data;\n}());\nexport { Data };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of swimlane settings in kanban board.\n */\nvar SwimlaneSettings = /** @class */ (function (_super) {\n    __extends(SwimlaneSettings, _super);\n    function SwimlaneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"textField\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"showEmptyRow\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SwimlaneSettings.prototype, \"sortDirection\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"sortComparer\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showUnassignedRow\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"enableFrozenRows\", void 0);\n    return SwimlaneSettings;\n}(ChildProperty));\nexport { SwimlaneSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of card settings in kanban board.\n */\nvar CardSettings = /** @class */ (function (_super) {\n    __extends(CardSettings, _super);\n    function CardSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], CardSettings.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"headerField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"contentField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"tagsField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"grabberField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"footerCssField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Single')\n    ], CardSettings.prototype, \"selectionType\", void 0);\n    return CardSettings;\n}(ChildProperty));\nexport { CardSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of editor settings.\n */\nvar DialogSettings = /** @class */ (function (_super) {\n    __extends(DialogSettings, _super);\n    function DialogSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DialogSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], DialogSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(null)\n    ], DialogSettings.prototype, \"model\", void 0);\n    return DialogSettings;\n}(ChildProperty));\nexport { DialogSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of columns in kanban board.\n */\nvar Columns = /** @class */ (function (_super) {\n    __extends(Columns, _super);\n    function Columns() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Columns.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"headerText\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"template\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"allowToggle\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"isExpanded\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"minCount\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"maxCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"showAddButton\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrag\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrop\", void 0);\n    __decorate([\n        Property([])\n    ], Columns.prototype, \"transitionColumns\", void 0);\n    return Columns;\n}(ChildProperty));\nexport { Columns };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of stacked header settings in kanban board.\n */\nvar StackedHeaders = /** @class */ (function (_super) {\n    __extends(StackedHeaders, _super);\n    function StackedHeaders() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"keyFields\", void 0);\n    return StackedHeaders;\n}(ChildProperty));\nexport { StackedHeaders };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of sort settings in kanban board.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Index')\n    ], SortSettings.prototype, \"sortBy\", void 0);\n    __decorate([\n        Property()\n    ], SortSettings.prototype, \"field\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SortSettings.prototype, \"direction\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n","/**\n * Kanban CSS Constants\n */\n/** @private */\nexport var ROOT_CLASS = 'e-kanban';\n/** @private */\nexport var RTL_CLASS = 'e-rtl';\n/** @private */\nexport var DEVICE_CLASS = 'e-device';\n/** @private */\nexport var ICON_CLASS = 'e-icons';\n/** @private */\nexport var TEMPLATE_CLASS = 'e-template';\n/** @private */\nexport var SWIMLANE_CLASS = 'e-swimlane';\n/** @private */\nexport var TABLE_CLASS = 'e-kanban-table';\n/** @private */\nexport var HEADER_CLASS = 'e-kanban-header';\n/** @private */\nexport var HEADER_TABLE_CLASS = 'e-header-table';\n/** @private */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nexport var HEADER_WRAP_CLASS = 'e-header-wrap';\n/** @private */\nexport var HEADER_TITLE_CLASS = 'e-header-title';\n/** @private */\nexport var HEADER_TEXT_CLASS = 'e-header-text';\n/** @private */\nexport var HEADER_ICON_CLASS = 'e-header-icon';\n/** @private */\nexport var STACKED_HEADER_ROW_CLASS = 'e-stacked-header-row';\n/** @private */\nexport var STACKED_HEADER_CELL_CLASS = 'e-stacked-header-cell';\n/** @private */\nexport var CONTENT_CELLS_CLASS = 'e-content-cells';\n/** @private */\nexport var CONTENT_CLASS = 'e-kanban-content';\n/** @private */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nexport var HEADER_ROW_TOGGLE_CLASS = 'e-toggle-header';\n/** @private */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nexport var CONTENT_ROW_CLASS = 'e-content-row';\n/** @private */\nexport var SWIMLANE_ROW_CLASS = 'e-swimlane-row';\n/** @private */\nexport var SWIMLANE_ROW_EXPAND_CLASS = 'e-swimlane-row-expand';\n/** @private */\nexport var SWIMLANE_ROW_COLLAPSE_CLASS = 'e-swimlane-row-collapse';\n/** @private */\nexport var SWIMLANE_ROW_TEXT_CLASS = 'e-swimlane-text';\n/** @private */\nexport var CARD_ITEM_COUNT_CLASS = 'e-item-count';\n/** @private */\nexport var CARD_WRAPPER_CLASS = 'e-card-wrapper';\n/** @private */\nexport var CARD_VIRTUAL_WRAPPER_CLASS = 'e-card-virtual-wrapper';\n/** @private */\nexport var CARD_CLASS = 'e-card';\n/** @private */\nexport var DRAGGABLE_CLASS = 'e-draggable';\n/** @private */\nexport var DROPPABLE_CLASS = 'e-droppable';\n/** @private */\nexport var DRAG_CLASS = 'e-drag';\n/** @private */\nexport var DROP_CLASS = 'e-drop';\n/** @private */\nexport var DISABLED_CLASS = 'e-disabled';\n/** @private */\nexport var CARD_HEADER_CLASS = 'e-card-header';\n/** @private */\nexport var CARD_CONTENT_CLASS = 'e-card-content';\n/** @private */\nexport var CARD_HEADER_TEXT_CLASS = 'e-card-header-caption';\n/** @private */\nexport var CARD_HEADER_TITLE_CLASS = 'e-card-header-title';\n/** @private */\nexport var CARD_TAGS_CLASS = 'e-card-tags';\n/** @private */\nexport var CARD_TAG_CLASS = 'e-card-tag';\n/** @private */\nexport var CARD_COLOR_CLASS = 'e-card-color';\n/** @private */\nexport var CARD_LABEL_CLASS = 'e-card-label';\n/** @private */\nexport var CARD_FOOTER_CLASS = 'e-card-footer';\n/** @private */\nexport var EMPTY_CARD_CLASS = 'e-empty-card';\n/** @private */\nexport var CARD_FOOTER_CSS_CLASS = 'e-card-footer-css';\n/** @private */\nexport var COLUMN_EXPAND_CLASS = 'e-column-expand';\n/** @private */\nexport var COLUMN_COLLAPSE_CLASS = 'e-column-collapse';\n/** @private */\nexport var COLLAPSE_HEADER_TEXT_CLASS = 'e-collapse-header-text';\n/** @private */\nexport var COLLAPSED_CLASS = 'e-collapsed';\n/** @private */\nexport var DIALOG_CLASS = 'e-kanban-dialog';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER_CLASS = 'e-kanban-dialog-content';\n/** @private */\nexport var FORM_CLASS = 'e-kanban-form';\n/** @private */\nexport var FORM_WRAPPER_CLASS = 'e-kanban-form-wrapper';\n/** @private */\nexport var ERROR_VALIDATION_CLASS = 'e-kanban-error';\n/** @private */\nexport var FIELD_CLASS = 'e-field';\n/** @private */\nexport var DRAGGED_CLONE_CLASS = 'e-target-dragged-clone';\n/** @private */\nexport var CLONED_CARD_CLASS = 'e-cloned-card';\n/** @private */\nexport var DRAGGED_CARD_CLASS = 'e-kanban-dragged-card';\n/** @private */\nexport var DROPPED_CLONE_CLASS = 'e-target-dropped-clone';\n/** @private */\nexport var DROPPING_CLASS = 'e-dropping';\n/** @private */\nexport var BORDER_CLASS = 'e-kanban-border';\n/** @private */\nexport var TOGGLE_VISIBLE_CLASS = 'e-toggle-visible';\n/** @private */\nexport var MULTI_CLONE_CONTENT_CELL_CLASS = 'e-multi-content-cell';\n/** @private */\nexport var MULTI_CARD_WRAPPER_CLASS = 'e-multi-card-wrapper';\n/** @private */\nexport var MULTI_ACTIVE_CLASS = 'e-multi-active';\n/** @private */\nexport var TARGET_MULTI_CLONE_CLASS = 'e-target-multi-clone';\n/** @private */\nexport var MULTI_COLUMN_KEY_CLASS = 'e-column-key';\n/** @private */\nexport var CARD_SELECTION_CLASS = 'e-selection';\n/** @private */\nexport var TOOLTIP_CLASS = 'e-kanban-tooltip';\n/** @private */\nexport var TOOLTIP_TEXT_CLASS = 'e-tooltip-text';\n/** @private */\nexport var SCROLL_CONTAINER_CLASS = 'e-cell-scroll-container';\n/** @private */\nexport var SWIMLANE_HEADER_CLASS = 'e-swimlane-header';\n/** @private */\nexport var SWIMLANE_HEADER_TOOLBAR_CLASS = 'e-swimlane-header-toolbar';\n/** @private */\nexport var TOOLBAR_MENU_CLASS = 'e-toolbar-menu';\n/** @private */\nexport var TOOLBAR_MENU_ICON_CLASS = 'e-icon-menu';\n/** @private */\nexport var TOOLBAR_LEVEL_TITLE_CLASS = 'e-toolbar-level-title';\n/** @private */\nexport var TOOLBAR_SWIMLANE_NAME_CLASS = 'e-toolbar-swimlane-name';\n/** @private */\nexport var SWIMLANE_OVERLAY_CLASS = 'e-swimlane-overlay';\n/** @private */\nexport var SWIMLANE_CONTENT_CLASS = 'e-swimlane-content';\n/** @private */\nexport var SWIMLANE_RESOURCE_CLASS = 'e-swimlane-resource';\n/** @private */\nexport var SWIMLANE_TREE_CLASS = 'e-swimlane-tree';\n/** @private */\nexport var LIMITS_CLASS = 'e-limits';\n/** @private */\nexport var MAX_COUNT_CLASS = 'e-max-count';\n/** @private */\nexport var MIN_COUNT_CLASS = 'e-min-count';\n/** @private */\nexport var MAX_COLOR_CLASS = 'e-max-color';\n/** @private */\nexport var MIN_COLOR_CLASS = 'e-min-color';\n/** @private */\nexport var POPUP_EVENT_CLASS = 'e-event-popup';\n/** @private */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nexport var CLOSE_CLASS = 'e-close';\n/** @private */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nexport var POPUP_WRAPPER_CLASS = 'e-mobile-popup-wrapper';\n/** @private */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nexport var POPUP_OPEN_CLASS = 'e-popup-open';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER = 'e-kanban-dialog-content';\n/** @private */\nexport var SHOW_ADD_BUTTON = 'e-show-add-button';\n/** @private */\nexport var SHOW_ADD_ICON = 'e-show-add-icon';\n/** @private */\nexport var SHOW_ADD_FOCUS = 'e-show-add-focus';\n/** @private */\nexport var FROZEN_SWIMLANE_ROW_CLASS = 'e-frozen-swimlane-row';\n/** @private */\nexport var FROZEN_ROW_CLASS = 'e-frozen-row';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined as isNoU, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */ (function () {\n    /**\n     * Constructor for action module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Action(parent) {\n        this.parent = parent;\n        this.columnToggleArray = [];\n        this.selectionArray = [];\n        this.lastCardSelection = null;\n        this.lastSelectionRow = null;\n        this.lastCard = null;\n        this.selectedCardsElement = [];\n        this.selectedCardsData = [];\n        this.hideColumnKeys = [];\n    }\n    Action.prototype.clickHandler = function (e) {\n        var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' +\n            cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS +\n            ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var target = closest(e.target, elementSelector);\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n            if (this.parent.allowKeyboard) {\n                this.parent.keyboardModule.cardTabIndexRemove();\n            }\n            this.cardClick(e);\n        }\n        else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.columnExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n            this.rowExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            this.addButtonClick(target);\n        }\n        else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n            this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n            var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n            if (isCollapsed) {\n                classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n            }\n            else {\n                classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n            }\n        }\n    };\n    Action.prototype.addButtonClick = function (target) {\n        var _this = this;\n        var newData = {};\n        if (this.parent.kanbanData.length === 0) {\n            newData[this.parent.cardSettings.headerField] = 1;\n        }\n        else if (typeof (this.parent.kanbanData[0])[this.parent.cardSettings.headerField] === 'number') {\n            var id = this.parent.kanbanData.map(function (obj) {\n                return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n            });\n            newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n        }\n        newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n        if (this.parent.sortSettings.sortBy === 'Index') {\n            newData[this.parent.sortSettings.field] = 1;\n            if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n                var card = this.parent.sortSettings.direction === 'Ascending' ?\n                    target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.lastElementChild : target.nextElementSibling.lastElementChild\n                    : target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.firstElementChild : target.nextElementSibling.firstElementChild;\n                var data = this.parent.getCardDetails(card);\n                newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n            }\n        }\n        if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField &&\n            closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n            newData[this.parent.swimlaneSettings.keyField] =\n                closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n        }\n        this.parent.openDialog('Add', newData);\n    };\n    Action.prototype.doubleClickHandler = function (e) {\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        if (target) {\n            this.cardDoubleClick(e);\n        }\n    };\n    Action.prototype.cardClick = function (e, selectedCard) {\n        var _this = this;\n        var target = closest((selectedCard) ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n        var cardClickObj = this.parent.getCardDetails(target);\n        if (cardClickObj) {\n            this.parent.activeCardData = { data: cardClickObj, element: target };\n            var args = { data: cardClickObj, element: target, cancel: false, event: e };\n            this.parent.trigger(events.cardClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n                        removeClass([target], cls.CARD_SELECTION_CLASS);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.disableAttributeSelection(target);\n                        }\n                        else {\n                            _this.parent.layoutModule.disableAttributeSelection(target);\n                        }\n                    }\n                    else {\n                        var isCtrlKey = e.ctrlKey;\n                        if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                            isCtrlKey = (_this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold) || isCtrlKey;\n                        }\n                        _this.cardSelection(target, isCtrlKey, e.shiftKey);\n                    }\n                    if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                        _this.parent.touchModule.updatePopupContent();\n                    }\n                    var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n                    if (_this.parent.allowKeyboard) {\n                        var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n                        element.forEach(function (e) { e.setAttribute('tabindex', '0'); });\n                        _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n                    }\n                }\n            });\n        }\n    };\n    Action.prototype.cardDoubleClick = function (e) {\n        var _this = this;\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        var cardDoubleClickObj = this.parent.getCardDetails(target);\n        this.parent.activeCardData = { data: cardDoubleClickObj, element: target };\n        this.cardSelection(target, false, false);\n        var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };\n        this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n            if (!doubleClickArgs.cancel) {\n                _this.parent.dialogModule.openDialog('Edit', args.data);\n            }\n        });\n    };\n    Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var currentSwimlaneHeader = !isNoU(isFrozenElem) ? isFrozenElem : headerTarget;\n        var args = { cancel: false, target: headerTarget, requestType: 'rowExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n                var key = target.getAttribute('data-key');\n                var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n                var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n                var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n                var tabIndex_1;\n                if (isCollapsed) {\n                    removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n                    _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n                    tabIndex_1 = '0';\n                }\n                else {\n                    addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n                    _this.parent.swimlaneToggleArray.push(key);\n                    tabIndex_1 = '-1';\n                }\n                targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n                target.setAttribute('aria-expanded', isCollapsed.toString());\n                tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n                var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n                rows.forEach(function (cell) { cell.setAttribute('tabindex', tabIndex_1); });\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'rowExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnExpandCollapse = function (e) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var args = { cancel: false, target: headerTarget, requestType: 'columnExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n                var colIndex = target.cellIndex;\n                _this.columnToggle(target);\n                var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n                if (collapsed === (_this.parent.columns.length - _this.hideColumnKeys.length)) {\n                    var index = (colIndex + 1 === collapsed) ? 1 : colIndex + 2;\n                    var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n                    var nextCol = _this.parent.element.querySelector(headerSelector);\n                    addClass([nextCol], cls.COLLAPSED_CLASS);\n                    _this.columnToggle(nextCol);\n                }\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'columnExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnToggle = function (target) {\n        var _this = this;\n        var colIndex = target.cellIndex;\n        var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n        var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n        var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n        var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n        if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n            removeClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                if (this.parent.enableVirtualization) {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.virtualLayoutModule.getWidth()); });\n                }\n                else {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.layoutModule.getWidth()); });\n                }\n            }\n            classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n            var _loop_1 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n                removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n                remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n                target.setAttribute('aria-expanded', 'true');\n                targetCol.setAttribute('aria-expanded', 'true');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    collapasedText.style.height = 'auto';\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n                var row = targetRow_1[_i];\n                _loop_1(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                removeClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'true');\n            }\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n            this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n        }\n        else {\n            addClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(events.toggleWidth); });\n            }\n            classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n            var key = target.getAttribute('data-key');\n            var _loop_2 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n                var index = targetCol.cellIndex;\n                var text = void 0;\n                if (!this_1.parent.enableVirtualization) {\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                else {\n                    var value = this_1.parent.dataModule.isRemote() ?\n                        this_1.parent.columnDataCount[this_1.parent.columns[index].keyField]\n                        : this_1.parent.virtualLayoutModule.columnData[this_1.parent.columns[index].keyField].length;\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        value + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                targetCol.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                addClass([targetCol, target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n                targetCol.setAttribute('aria-expanded', 'false');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n                var row = targetRow_2[_a];\n                _loop_2(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                addClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n            }\n            this.columnToggleArray.push(target.getAttribute('data-key'));\n            this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n        }\n    };\n    Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n        var _this = this;\n        if (!target) {\n            return;\n        }\n        var cards = this.parent.getSelectedCards();\n        if (this.parent.cardSettings.selectionType !== 'None') {\n            var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n            var index = !isNoU(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n            if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n                return;\n            }\n            if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n                cards.forEach(function (el) {\n                    _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n                    _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n                    _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n                });\n            }\n            if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n                var curCards_1 = [];\n                var start = void 0;\n                var end = void 0;\n                var i = void 0;\n                var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n                allCards.forEach(function (el) { return curCards_1.push(el.getAttribute('data-id')); });\n                var curId = target.getAttribute('data-id');\n                var lastId = this.lastCard.getAttribute('data-id');\n                var curIndex = end = curCards_1.indexOf(curId);\n                var lastIndex = start = curCards_1.indexOf(lastId);\n                var select = curIndex > lastIndex ? 'next' : 'prev';\n                if (select === 'prev') {\n                    start = curIndex;\n                    end = lastIndex;\n                }\n                for (i = start; i <= end; i++) {\n                    var card = allCards[i];\n                    addClass([card], cls.CARD_SELECTION_CLASS);\n                    card.setAttribute('aria-selected', 'true');\n                    card.setAttribute('tabindex', '0');\n                    this.selectionArray.push(card.getAttribute('data-id'));\n                    this.selectedCardsElement.push(card);\n                    this.selectedCardsData.push(this.parent.getCardDetails(card));\n                    this.lastCardSelection = card;\n                    if (select === 'prev') {\n                        this.lastCardSelection = allCards[start];\n                    }\n                }\n            }\n            else {\n                addClass([target], cls.CARD_SELECTION_CLASS);\n                target.setAttribute('aria-selected', 'true');\n                target.setAttribute('tabindex', '0');\n                this.selectionArray.push(target.getAttribute('data-id'));\n                this.selectedCardsElement.push(target);\n                this.selectedCardsData.push(this.parent.getCardDetails(target));\n                this.lastCard = this.lastCardSelection = target;\n                this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n                if (this.lastSelectionRow.previousElementSibling) {\n                    var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n                    var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n                    if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n                        this.rowExpandCollapse(parentEle);\n                    }\n                }\n            }\n        }\n    };\n    Action.prototype.addColumn = function (columnOptions, index) {\n        var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n        this.parent.columns.splice(index, 0, addColumn);\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    Action.prototype.deleteColumn = function (index) {\n        var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n        if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n        }\n        this.parent.columns.splice(index, 1);\n        if (this.parent.columns.length === 0) {\n            detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n            detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n        }\n        else {\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.showColumn = function (key) {\n        var index = this.hideColumnKeys.indexOf(key.toString());\n        if (index !== -1) {\n            this.hideColumnKeys.splice(index, 1);\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.hideColumn = function (key) {\n        this.hideColumnKeys.push(key.toString());\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    /**\n     * Maintain the single card selection\n     *\n     * @param {Record<string, any>} data - Specifies the selected card data.\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    Action.prototype.SingleCardSelection = function (data) {\n        if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n            // eslint-disable-next-line no-useless-escape\n            var card = this.parent.element.querySelector('.e-card[data-id=\\\"' +\n                // eslint-disable-next-line no-useless-escape\n                data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n            if (card) {\n                addClass([card], cls.CARD_SELECTION_CLASS);\n                card.setAttribute('aria-selected', 'true');\n                card.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    return Action;\n}());\nexport { Action };\n","import { isNullOrUndefined as isNoU, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban CRUD module\n */\nvar Crud = /** @class */ (function () {\n    /**\n     * Constructor for CRUD module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Crud(parent) {\n        this.parent = parent;\n    }\n    Crud.prototype.addCard = function (cardData, index) {\n        var _this = this;\n        var args = {\n            cancel: false, requestType: 'cardCreate', addedRecords: (cardData instanceof Array) ? cardData : [cardData],\n            changedRecords: [], deletedRecords: []\n        };\n        this.parent.trigger(events.actionBegin, args, function (addArgs) {\n            if (!addArgs.cancel) {\n                var modifiedData_1 = [];\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    if (cardData instanceof Array) {\n                        modifiedData_1 = cardData;\n                    }\n                    else {\n                        modifiedData_1.push(cardData);\n                    }\n                    modifiedData_1.forEach(function (data, index) {\n                        if (!data[_this.parent.sortSettings.field]) {\n                            var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);\n                            if (_this.parent.sortSettings.direction === 'Ascending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] =\n                                    (columnData[columnData.length - 1][_this.parent.sortSettings.field]) + index + 1;\n                            }\n                            else if (_this.parent.sortSettings.direction === 'Descending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index + 1;\n                            }\n                            if (columnData.length === 0) {\n                                data[_this.parent.sortSettings.field] = 1;\n                            }\n                        }\n                    });\n                    if (!(cardData instanceof Array)) {\n                        if (!index && _this.parent.sortSettings.direction === 'Descending') {\n                            // eslint-disable-next-line max-len\n                            _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function (obj, count) {\n                                if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {\n                                    index = count + 1;\n                                }\n                            });\n                        }\n                    }\n                    if (index !== 0 && !index && _this.parent.sortSettings.direction === 'Descending') {\n                        index = 0;\n                    }\n                    modifiedData_1 = _this.priorityOrder(modifiedData_1, index);\n                }\n                var addedRecords = (cardData instanceof Array) ? cardData : [cardData];\n                var changedRecords = (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') ? modifiedData_1 : [];\n                var editParms = { addedRecords: addedRecords, changedRecords: changedRecords, deletedRecords: [] };\n                var type = (cardData instanceof Array || modifiedData_1.length > 0) ? 'batch' : 'insert';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardCreated', cardData, index);\n            }\n        });\n    };\n    Crud.prototype.getIndexFromData = function (data) {\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + data[this.parent.cardSettings.headerField] + \"\\\"]\");\n        var element = closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS);\n        var index = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS)).indexOf(cardElement);\n        return index;\n    };\n    Crud.prototype.updateCard = function (cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        var args = {\n            requestType: 'cardChange', cancel: false, addedRecords: [],\n            changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n        };\n        index = isNoU(index) ? this.getIndexFromData(args.changedRecords[0]) : index;\n        this.parent.trigger(events.actionBegin, args, function (updateArgs) {\n            if (!updateArgs.cancel) {\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    var modifiedData = [];\n                    if (cardData instanceof Array) {\n                        modifiedData = cardData;\n                    }\n                    else {\n                        modifiedData.push(cardData);\n                    }\n                    cardData = _this.priorityOrder(modifiedData, index);\n                }\n                var editParms = {\n                    addedRecords: [], changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n                };\n                var type = (cardData instanceof Array) ? 'batch' : 'update';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardChanged', cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag);\n            }\n        });\n    };\n    Crud.prototype.deleteCard = function (cardData) {\n        var _this = this;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        if (typeof cardData === 'string' || typeof cardData === 'number') {\n            editParms.deletedRecords = this.parent.kanbanData.filter(function (data) {\n                return data[_this.parent.cardSettings.headerField] === cardData;\n            });\n        }\n        else {\n            editParms.deletedRecords = (cardData instanceof Array) ? cardData : [cardData];\n        }\n        var args = {\n            requestType: 'cardRemove', cancel: false, addedRecords: [], changedRecords: [], deletedRecords: editParms.deletedRecords\n        };\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var type = (editParms.deletedRecords.length > 1) ? 'batch' : 'delete';\n                var cardData_1 = editParms.deletedRecords;\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardRemoved', cardData_1[0]);\n            }\n        });\n    };\n    Crud.prototype.priorityOrder = function (cardData, cardIndex) {\n        var _this = this;\n        var cardsId = cardData.map(function (obj) { return obj[_this.parent.cardSettings.headerField]; });\n        var num = cardData[cardData.length - 1][this.parent.sortSettings.field];\n        var allModifiedKeys = cardData.map(function (obj) { return obj[_this.parent.keyField]; });\n        var modifiedKey = allModifiedKeys.filter(function (key, index) { return allModifiedKeys.indexOf(key) === index; }).sort();\n        var columnAllDatas;\n        var finalData = [];\n        var originalIndex = [];\n        var _loop_1 = function (columnKey) {\n            var keyData = cardData.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnKey;\n            });\n            columnAllDatas = this_1.parent.enableVirtualization ? this_1.parent.virtualLayoutModule.getColumnData(columnKey)\n                : this_1.parent.layoutModule.getColumnData(columnKey);\n            for (var _i = 0, _a = keyData; _i < _a.length; _i++) {\n                var data = _a[_i];\n                if (this_1.parent.swimlaneSettings.keyField) {\n                    var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);\n                    columnAllDatas = this_1.parent.getColumnData(columnKey, swimlaneDatas);\n                }\n            }\n            keyData.forEach(function (key) { return finalData.push(key); });\n            if (!isNoU(cardIndex)) {\n                var _loop_2 = function (j) {\n                    columnAllDatas.filter(function (data, index) {\n                        if (data[_this.parent.cardSettings.headerField] === cardsId[j] && index <= cardIndex) {\n                            originalIndex.push(index);\n                        }\n                    });\n                };\n                for (var j = 0; j < cardsId.length; j++) {\n                    _loop_2(j);\n                }\n                if (originalIndex.length > 0) {\n                    cardIndex = cardIndex + originalIndex.length;\n                }\n                if (this_1.parent.sortSettings.direction === 'Ascending') {\n                    for (var i = cardIndex; i < columnAllDatas.length; i++) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n                else {\n                    for (var i = cardIndex - 1; i >= 0; i--) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {\n            var columnKey = modifiedKey_1[_i];\n            _loop_1(columnKey);\n        }\n        return finalData;\n    };\n    return Crud;\n}());\nexport { Crud };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Draggable, formatUnit, createElement, isNullOrUndefined as isNoU, addClass, closest, detach } from '@syncfusion/ej2-base';\nimport { removeClass, classList, remove, EventHandler, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\n/**\n * Drag and Drop module is used to perform card actions.\n */\nvar DragAndDrop = /** @class */ (function () {\n    /**\n     * Constructor for drag and drop module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function DragAndDrop(parent) {\n        this.insertClone = 'afterend';\n        this.parent = parent;\n        this.dragObj = {\n            element: null, cloneElement: null, instance: null, targetClone: null, draggedClone: null, targetCloneMulti: null,\n            selectedCards: [], pageX: 0, pageY: 0, navigationInterval: null, cardDetails: [], modifiedData: []\n        };\n        this.dragEdges = { left: false, right: false, top: false, bottom: false };\n        this.isDragging = false;\n        this.isExternalDrop = false;\n    }\n    DragAndDrop.prototype.wireDragEvents = function (element) {\n        var dragContainment;\n        if (!this.parent.element != null && this.parent.externalDropId.length === 0) {\n            dragContainment = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        }\n        this.dragObj.instance = new Draggable(element, {\n            clone: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: true,\n            cursorAt: { top: -10, left: -10 },\n            dragArea: dragContainment,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this)\n        });\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup &&\n            this.parent.touchModule.mobilePopup.element.classList.contains(cls.POPUP_OPEN_CLASS)) {\n            this.parent.touchModule.mobilePopup.hide();\n        }\n        this.dragObj.element = closest(e.sender.target, '.' + cls.CARD_CLASS);\n        if (isNoU(this.dragObj.element)) {\n            return null;\n        }\n        this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);\n        var cloneWrapper = createElement('div', { innerHTML: this.dragObj.element.outerHTML });\n        this.dragObj.cloneElement = cloneWrapper.children.item(0);\n        addClass([this.dragObj.cloneElement], cls.CLONED_CARD_CLASS);\n        this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);\n        this.dragObj.targetCloneMulti = createElement('div', { className: cls.TARGET_MULTI_CLONE_CLASS });\n        this.dragObj.targetClone = createElement('div', {\n            className: cls.DROPPED_CLONE_CLASS,\n            styles: 'width:100%;height:' + formatUnit(this.dragObj.element.offsetHeight)\n        });\n        this.dragObj.modifiedData = [];\n        return this.dragObj.cloneElement;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        this.dragObj.selectedCards = this.dragObj.element;\n        this.borderElm = this.parent.element.querySelectorAll('.' + cls.BORDER_CLASS);\n        if (this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n            var className = '.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')';\n            var closestEle = closest(this.dragObj.element, '.' + cls.CONTENT_ROW_CLASS);\n            this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));\n            this.dragObj.selectedCards.forEach(function (element) {\n                _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element));\n            });\n        }\n        else {\n            this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];\n        }\n        if (!isNoU(this.dragObj.selectedCards) && !isNoU(this.dragObj.selectedCards.length) &&\n            this.dragObj.selectedCards.length >= 1) {\n            this.dragObj.selectedCards[0].closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        else if (!isNoU(this.dragObj.selectedCards) &&\n            !isNoU(this.dragObj.selectedCards.closest('.e-content-cells'))) {\n            this.dragObj.selectedCards.closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        var dragArgs = { cancel: false, data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                _this.removeElement(_this.dragObj.cloneElement);\n                _this.dragObj.instance.intDestroy(e);\n                _this.dragObj.element = null;\n                _this.dragObj.targetClone = null;\n                _this.dragObj.draggedClone = null;\n                _this.dragObj.cloneElement = null;\n                _this.dragObj.targetCloneMulti = null;\n                return;\n            }\n            if (_this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                _this.dragObj.selectedCards.forEach(function (element) { _this.draggedClone(element); });\n                if (_this.dragObj.selectedCards.length > 1) {\n                    _this.dragObj.cloneElement.innerHTML = '';\n                    var drag = createElement('div', {\n                        className: 'e-multi-card-text',\n                        innerHTML: _this.dragObj.selectedCards.length + ' ' + _this.parent.localeObj.getConstant('cards')\n                    });\n                    _this.dragObj.cloneElement.appendChild(drag);\n                    classList(_this.dragObj.cloneElement, ['e-multi-card-clone'], [cls.CARD_SELECTION_CLASS]);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    else {\n                        _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    _this.dragObj.cloneElement.style.width = '90px';\n                }\n            }\n            else {\n                _this.draggedClone(_this.dragObj.element);\n            }\n            EventHandler.add(document.body, 'keydown', _this.keydownHandler, _this);\n            _this.parent.notify(events.contentReady, {});\n        });\n    };\n    DragAndDrop.prototype.draggedClone = function (element) {\n        this.dragObj.draggedClone = createElement('div', {\n            className: cls.DRAGGED_CLONE_CLASS,\n            styles: 'width:' + formatUnit(element.offsetWidth - 1) + ';height:' + formatUnit(element.offsetHeight)\n        });\n        element.insertAdjacentElement('afterend', this.dragObj.draggedClone);\n        addClass([element], cls.DRAGGED_CARD_CLASS);\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        var _this = this;\n        if (!e.target) {\n            return;\n        }\n        var cardElement = closest(e.target, '.' + cls.ROOT_CLASS + ' .' + cls.CARD_CLASS);\n        if (!isNoU(cardElement) && this.parent.enableVirtualization && !isNoU(e.target.previousElementSibling) &&\n            !isNoU(e.target.previousElementSibling.querySelector('.e-target-dropped-clone'))) {\n            cardElement = e.target.previousElementSibling.querySelector('.e-target-dropped-clone').nextElementSibling;\n        }\n        var targetEle = e.target;\n        if (!isNoU(e.target.parentElement)) {\n            if (e.target.nodeName === 'SPAN' && e.target.classList.contains('e-empty-card')) {\n                targetEle = e.target.parentElement;\n            }\n            else if (e.target.nodeName === 'DIV' && e.target.classList.contains('e-kanban-border')) {\n                if (!(this.parent.element.querySelector('.e-target-dropped-clone') === e.target.nextElementSibling.firstChild)) {\n                    targetEle = e.target.parentElement;\n                }\n            }\n        }\n        var target = cardElement || targetEle;\n        var selector = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DROPPABLE_CLASS;\n        var contentCell = closest(target, selector);\n        var cellDimension;\n        var borderElem;\n        var dropElement;\n        if (target.nextElementSibling && target.nextElementSibling.lastChild) {\n            dropElement = target.nextElementSibling.lastChild.previousElementSibling;\n        }\n        this.externalDrop(target);\n        this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;\n        this.calculateArgs(e);\n        if (contentCell && document.body.style.cursor !== 'not-allowed') {\n            var targetKey = this.getColumnKey(contentCell);\n            var keys = targetKey.split(',');\n            this.multiCloneRemove();\n            var isDrag = (targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS)))\n                ? true : false;\n            if (keys.length === 1 || isDrag) {\n                if (target.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n                    this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n                }\n                if (target.classList.contains(cls.CARD_CLASS) || this.insertClone === 'beforebegin') {\n                    var element = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ?\n                        (target.previousElementSibling.classList.contains(cls.DRAGGED_CARD_CLASS) ? null : target.previousElementSibling)\n                        : target.previousElementSibling;\n                    this.insertClone = 'afterend';\n                    if (isNoU(element)) {\n                        var pageY = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? (this.dragObj.pageY / 2) :\n                            this.dragObj.pageY;\n                        var height = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.offsetHeight :\n                            (target.offsetHeight / 2);\n                        if ((pageY - (this.kanbanObj.element.getBoundingClientRect().top + target.offsetTop)) < height) {\n                            this.insertClone = 'beforebegin';\n                        }\n                    }\n                    if (target.classList.contains(cls.CARD_CLASS)) {\n                        if (this.parent.enableVirtualization) {\n                            this.insertClone = this.isTargetElementVisible(target) ? this.insertClone : 'beforebegin';\n                        }\n                        target.insertAdjacentElement(this.insertClone, this.dragObj.targetClone);\n                    }\n                }\n                else if (target.classList.contains(cls.CONTENT_CELLS_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)) {\n                    if (target.querySelectorAll('.' + cls.DRAGGED_CARD_CLASS).length !== 0 &&\n                        target.querySelectorAll('.' + cls.CARD_CLASS + ':not(.e-kanban-dragged-card):not(.e-cloned-card)').length === 0) {\n                        return;\n                    }\n                    else {\n                        target.querySelector('.' + cls.CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);\n                    }\n                }\n                else if ((target.classList.contains(cls.CARD_WRAPPER_CLASS) ||\n                    target.classList.contains(cls.CARD_VIRTUAL_WRAPPER_CLASS)) &&\n                    !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && contentCell.querySelectorAll('.' + cls.CARD_CLASS).length === 0) {\n                    target.appendChild(this.dragObj.targetClone);\n                }\n                else if (target.classList.contains(cls.BORDER_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && (target.nextElementSibling && target.nextElementSibling.classList.contains(cls.CARD_WRAPPER_CLASS))\n                    && this.dragObj.targetClone && (!dropElement || !dropElement.classList.contains(cls.DROPPED_CLONE_CLASS))) {\n                    if (!this.parent.enableVirtualization && !this.isTargetElementVisible(target.nextElementSibling)) {\n                        target.nextElementSibling.appendChild(this.dragObj.targetClone);\n                    }\n                }\n            }\n            else if (keys.length > 1 && (contentCell.classList.contains(cls.DROPPING_CLASS) ||\n                contentCell.firstChild && contentCell.firstChild.classList.contains(cls.DROPPING_CLASS))) {\n                this.multiCloneCreate(keys, contentCell);\n            }\n            this.kanbanObj.notify(events.contentReady, {});\n        }\n        if (this.kanbanObj.element.querySelectorAll('.' + cls.DROPPING_CLASS).length === 0) {\n            this.cellDropping();\n        }\n        var isCollapsed = false;\n        if (contentCell) {\n            isCollapsed = contentCell.classList.contains(cls.COLLAPSED_CLASS) && contentCell.classList.contains(cls.DROPPING_CLASS);\n            if (contentCell.getAttribute('aria-expanded') === 'true' || !contentCell.parentElement.hasAttribute('aria-expanded')) {\n                cellDimension = contentCell.getBoundingClientRect();\n                this.updateDimension(cellDimension);\n            }\n            borderElem = contentCell.querySelector('.' + cls.BORDER_CLASS);\n        }\n        if (target && target.tagName === 'TABLE' && !isNoU(target.querySelector('.' + cls.CONTENT_ROW_CLASS))) {\n            cellDimension = target.querySelector('.' + cls.CONTENT_ROW_CLASS).getBoundingClientRect();\n            this.updateDimension(cellDimension, target);\n        }\n        if (isCollapsed) {\n            this.toggleVisible(target);\n            addClass([contentCell], cls.TOGGLE_VISIBLE_CLASS);\n        }\n        var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TOGGLE_VISIBLE_CLASS));\n        if (tColumn.length > 0 && !target.classList.contains(cls.TOGGLE_VISIBLE_CLASS)\n            && !closest(target, '.' + cls.TOGGLE_VISIBLE_CLASS)) {\n            this.toggleVisible(target, tColumn.slice(-1)[0]);\n            removeClass(tColumn, cls.TOGGLE_VISIBLE_CLASS);\n        }\n        this.kanbanObj.notify(events.contentReady, {});\n        var multiKeyTarget = closest(target, '.' + cls.MULTI_COLUMN_KEY_CLASS);\n        if (multiKeyTarget) {\n            var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' +\n                cls.DISABLED_CLASS + ')')).filter(function (element) { return _this.getColumnKey(element) === _this.getColumnKey(multiKeyTarget); });\n            if (columnKeys.length > 0) {\n                addClass(columnKeys, cls.MULTI_ACTIVE_CLASS);\n                if (columnKeys[0].previousElementSibling) {\n                    addClass([columnKeys[0].previousElementSibling], 'e-multi-bottom-border');\n                }\n            }\n        }\n        document.body.style.cursor = (contentCell && contentCell.classList.contains(cls.DROPPING_CLASS) ||\n            (contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) ? '' : 'not-allowed';\n        if (cardElement && !(closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS)).classList.contains(cls.DROPPING_CLASS) &&\n            !(contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) {\n            cardElement.style.cursor = 'not-allowed';\n            document.body.style.cursor = 'not-allowed';\n        }\n        if (this.isExternalDrop && document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        if (document.body.style.cursor === 'not-allowed') {\n            this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n            this.multiCloneRemove();\n        }\n        this.updateScrollPosition();\n        var dragArgs = { data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.kanbanObj.trigger(events.drag, dragArgs);\n        this.parent.isExternalKanbanDrop = false;\n        this.isExternalDrop = false;\n    };\n    DragAndDrop.prototype.removeElement = function (element, kanbanObj) {\n        kanbanObj = kanbanObj ? kanbanObj : this.parent;\n        if (kanbanObj.element.getElementsByClassName(element.className).length > 0) {\n            remove(element);\n        }\n    };\n    DragAndDrop.prototype.isTargetElementVisible = function (targetElem) {\n        var wrapperElem = closest(targetElem, '.' + cls.CARD_WRAPPER_CLASS);\n        if (!isNoU(wrapperElem)) {\n            var wrapperElemBottom = wrapperElem.getBoundingClientRect().bottom;\n            var targetElemBottom = targetElem.getBoundingClientRect().bottom;\n            if (targetElemBottom > wrapperElemBottom) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    };\n    DragAndDrop.prototype.externalDrop = function (target) {\n        var _this = this;\n        this.parent.externalDropId.forEach(function (externalDropId) {\n            var targetRootElement = closest(target, externalDropId);\n            if (targetRootElement) {\n                if (targetRootElement.classList.contains('e-kanban')) {\n                    _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];\n                    _this.parent.isExternalKanbanDrop = true;\n                    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS +\n                        '):not(.' + cls.COLLAPSED_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n                    var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));\n                    addClass(cells, cls.DROPPING_CLASS);\n                }\n                else {\n                    _this.isExternalDrop = true;\n                }\n            }\n        });\n    };\n    DragAndDrop.prototype.multiCloneCreate = function (keys, contentCell) {\n        var offsetHeight = contentCell.offsetHeight;\n        var limitEle = contentCell.querySelector('.' + cls.LIMITS_CLASS);\n        if (limitEle) {\n            offsetHeight -= limitEle.offsetHeight;\n        }\n        this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);\n        if (contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n            addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n        }\n        addClass([contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n        contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS).style.height = 'auto';\n        contentCell.style.borderStyle = 'none';\n        this.removeElement(this.dragObj.targetClone);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n            var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n            var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute('data-key'), key, transition);\n            var name_1 = allowTransition ? '' : ' ' + cls.DISABLED_CLASS;\n            var colKey = createElement('div', {\n                className: cls.MULTI_COLUMN_KEY_CLASS + name_1,\n                attrs: { 'data-key': key.trim() }\n            });\n            var text = createElement('div', { className: 'e-text', innerHTML: key.trim() });\n            contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);\n            colKey.style.cursor = allowTransition ? '' : 'not-allowed';\n            colKey.style.lineHeight = colKey.style.height = formatUnit((offsetHeight / keys.length));\n            text.style.top = formatUnit((offsetHeight / 2) - (text.offsetHeight / 2));\n        }\n    };\n    DragAndDrop.prototype.allowedTransition = function (currentCardKey, targetCardKey, allowedKey) {\n        var allowTransition = true;\n        var targetKey = targetCardKey.split(',');\n        for (var i = 0; i < targetKey.length; i++) {\n            if (currentCardKey === targetKey[i].trim()) {\n                return true;\n            }\n            if (allowedKey) {\n                if (allowedKey.length === 1 && allowedKey[0].length === 0) {\n                    return true;\n                }\n                for (var j = 0; j < allowedKey.length; j++) {\n                    if (targetKey[i].trim() === allowedKey[j].trim()) {\n                        return true;\n                    }\n                    else {\n                        allowTransition = false;\n                    }\n                }\n            }\n        }\n        return allowTransition;\n    };\n    DragAndDrop.prototype.cellDropping = function () {\n        var _this = this;\n        var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        var dragRow = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_ROW_CLASS);\n        if (dragCell && dragCell.classList.contains(cls.DROP_CLASS)) {\n            addClass([dragCell], cls.DROPPING_CLASS);\n        }\n        this.addDropping(dragRow, dragCell);\n        if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {\n            var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ')';\n            var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));\n            [].slice.call(rows).forEach(function (row) {\n                if (dragRow !== row) {\n                    _this.addDropping(row, dragCell);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.addDropping = function (dragRow, dragCell) {\n        var _this = this;\n        if (dragCell && this.borderElm && this.borderElm.length !== 0) {\n            if (dragCell.classList.contains(cls.DROPPING_CLASS)) {\n                removeClass([dragCell], cls.DROPPING_CLASS);\n            }\n            var cellDimension = dragCell.getBoundingClientRect();\n            this.updateDimension(cellDimension);\n        }\n        else if (dragCell && dragRow) {\n            [].slice.call(dragRow.children).forEach(function (cell) {\n                var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n                if (cell !== dragCell && cell.classList.contains(cls.DROP_CLASS) &&\n                    _this.allowedTransition(dragCell.getAttribute('data-key'), cell.getAttribute('data-key'), transition)) {\n                    addClass([cell], cls.DROPPING_CLASS);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.updateDimension = function (dimensions, target) {\n        [].slice.call(this.borderElm).forEach(function (element) {\n            if (element.parentElement && (element.parentElement.getAttribute('aria-expanded') === 'true' || !element.parentElement.hasAttribute('aria-expanded'))) {\n                addClass([element], cls.DROPPING_CLASS);\n            }\n            var hasAddButton = element.previousElementSibling;\n            element.style.height = parseInt(dimensions.height.toString(), 10) - (hasAddButton &&\n                hasAddButton.classList.contains(cls.SHOW_ADD_BUTTON) ? hasAddButton.offsetHeight + hasAddButton.offsetTop : 0) + 'px';\n            if (!target || target.tagName !== 'TABLE') {\n                element.style.width = parseInt(dimensions.width.toString(), 10) + 'px';\n            }\n            element.style.left = (element.parentElement.getBoundingClientRect().left - closest(element, '.e-kanban').getBoundingClientRect().left) + 'px';\n        });\n    };\n    DragAndDrop.prototype.keydownHandler = function (e) {\n        if (e.code === 'Escape' && this.dragObj.cloneElement) {\n            EventHandler.remove(this.dragObj.cloneElement, 'keydown', this.keydownHandler);\n            this.dragObj.element.removeAttribute('aria-grabbed');\n            this.dragStopClear();\n            this.dragStopPostClear();\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        var contentCell = closest(this.dragObj.targetClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (this.parent.enableVirtualization && !isNoU(contentCell)) {\n            contentCell.classList.add('e-dropped-column');\n        }\n        var columnKey;\n        var dropIndex;\n        var dataDropIndexKeyfieldValue;\n        var isMultipleDrag;\n        EventHandler.remove(document.body, 'keydown', this.keydownHandler);\n        [].slice.call(this.borderElm).forEach(function (element) {\n            element.classList.remove(cls.DROPPING_CLASS);\n        });\n        if (this.dragObj.targetClone.parentElement) {\n            isMultipleDrag = (this.dragObj.selectedCards && this.dragObj.selectedCards.length > 1\n                && this.parent.sortSettings.sortBy === 'Index');\n            var className = !isMultipleDrag ? '.' + cls.CARD_CLASS + ':not(.' + cls.DRAGGED_CARD_CLASS + ', .' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS :\n                '.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS;\n            var element = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));\n            dropIndex = element.indexOf(this.dragObj.targetClone);\n            if (this.parent.enableVirtualization && !isNoU(this.dragObj.targetClone.nextElementSibling)) {\n                dataDropIndexKeyfieldValue = this.dragObj.targetClone.nextElementSibling.getAttribute('data-id');\n            }\n        }\n        if (!isNoU(this.kanbanObj) && this.kanbanObj.element.querySelector('.' + cls.TARGET_MULTI_CLONE_CLASS)) {\n            columnKey = closest(e.target, '.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')');\n        }\n        if (contentCell || columnKey) {\n            var cardStatus_1;\n            if (contentCell) {\n                cardStatus_1 = this.getColumnKey(contentCell);\n            }\n            else {\n                cardStatus_1 = this.getColumnKey(columnKey);\n                contentCell = closest(columnKey, '.' + cls.CONTENT_CELLS_CLASS);\n            }\n            if (this.dragObj.selectedCards instanceof HTMLElement) {\n                this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);\n            }\n            else {\n                this.dragObj.selectedCards.forEach(function (element) { _this.updateDroppedData(element, cardStatus_1, contentCell); });\n            }\n            if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === 'Index') {\n                this.changeOrder(this.dragObj.modifiedData, e.helper);\n            }\n        }\n        if (this.dragObj.modifiedData.length === 0) {\n            this.dragObj.modifiedData = this.dragObj.cardDetails;\n        }\n        var dragArgs = {\n            cancel: false, data: this.dragObj.modifiedData, event: e, element: this.dragObj.selectedCards,\n            dropIndex: dropIndex\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            _this.dragStopClear();\n            if (!dragEventArgs.cancel) {\n                if (contentCell || columnKey) {\n                    var updateCard = dragEventArgs.data instanceof Array &&\n                        dragEventArgs.data.length > 1 ? dragEventArgs.data :\n                        dragEventArgs.data[0];\n                    var draggedColumnKey = void 0;\n                    var droppedColumnKey = void 0;\n                    if (_this.parent.enableVirtualization) {\n                        draggedColumnKey = contentCell.closest('.e-kanban').querySelector('.e-dragged-column').getAttribute('data-key');\n                        droppedColumnKey = contentCell.getAttribute('data-key');\n                    }\n                    _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex, true, dataDropIndexKeyfieldValue, draggedColumnKey, droppedColumnKey, isMultipleDrag);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.refreshColumnData(draggedColumnKey, droppedColumnKey);\n                        _this.parent.virtualLayoutModule.ensureColumnNotEmpty(draggedColumnKey);\n                    }\n                }\n            }\n            _this.removeEmptyTrElement();\n            _this.dragStopPostClear();\n        });\n    };\n    DragAndDrop.prototype.removeEmptyTrElement = function () {\n        if (!this.parent.swimlaneSettings.showEmptyRow) {\n            var swimlaneRowList = this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row');\n            for (var j = 0; j < swimlaneRowList.length; j++) {\n                var cardRowData = swimlaneRowList[j].nextElementSibling.querySelectorAll('.e-card-wrapper .e-card');\n                if (!isNoU(swimlaneRowList[j].nextElementSibling) && cardRowData.length === 0) {\n                    detach(swimlaneRowList[j].nextElementSibling);\n                    detach(swimlaneRowList[j]);\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.dragStopClear = function () {\n        this.removeElement(this.dragObj.draggedClone);\n        this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n        this.removeElement(this.dragObj.cloneElement);\n        var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll('.' + cls.DRAGGED_CLONE_CLASS));\n        dragMultiClone.forEach(function (clone) { remove(clone); });\n        this.dragObj.element.style.removeProperty('width');\n        this.multiCloneRemove();\n        if (this.dragObj.selectedCards instanceof HTMLElement) {\n            removeClass([this.dragObj.selectedCards], cls.DRAGGED_CARD_CLASS);\n        }\n        else {\n            removeClass(this.dragObj.selectedCards, cls.DRAGGED_CARD_CLASS);\n        }\n        clearInterval(this.dragObj.navigationInterval);\n        this.dragObj.navigationInterval = null;\n        if (document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        var styleCards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[style]'));\n        styleCards.forEach(function (styleCard) { styleCard.style.cursor = ''; });\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ')';\n        var cells = [].slice.call(this.parent.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n        cells.forEach(function (cell) { return removeClass([cell], cls.DROPPING_CLASS); });\n        if (this.parent.externalDropObj) {\n            var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + ' .' +\n                cls.CONTENT_CELLS_CLASS));\n            externalCells.forEach(function (externalCell) { return removeClass([externalCell], cls.DROPPING_CLASS); });\n        }\n    };\n    DragAndDrop.prototype.dragStopPostClear = function () {\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.tabHold = false;\n        }\n        if (this.parent.element.querySelector('.e-dragged-column')) {\n            this.parent.element.querySelector('.e-dragged-column').classList.remove('e-dragged-column');\n        }\n        if (this.parent.element.querySelector('.e-dropped-column')) {\n            this.parent.element.querySelector('.e-dropped-column').classList.remove('e-dropped-column');\n        }\n        this.dragObj.cardDetails = this.dragObj.modifiedData = [];\n        this.isDragging = false;\n        this.parent.isExternalKanbanDrop = false;\n        this.parent.externalDropObj = null;\n    };\n    DragAndDrop.prototype.updateDroppedData = function (element, cardStatus, contentCell) {\n        var crudObj = this.parent.getCardDetails(element);\n        var crudData = extend({}, crudObj, null, true);\n        if (cardStatus.split(',').length === 1) {\n            crudData[this.parent.keyField] = cardStatus;\n        }\n        if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {\n            var prev = closest(contentCell, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling;\n            if (this.parent.isAdaptive) {\n                var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;\n                crudData[this.parent.swimlaneSettings.keyField] = keyField;\n            }\n            else {\n                crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);\n            }\n        }\n        this.dragObj.modifiedData.push(crudData);\n    };\n    DragAndDrop.prototype.changeOrder = function (modifieddata, draggedCard) {\n        var _this = this;\n        var prevele = false;\n        var element;\n        if (this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = (draggedCard === this.dragObj.targetClone.previousElementSibling) &&\n                (this.dragObj.targetClone.previousElementSibling &&\n                    this.dragObj.targetClone.previousElementSibling.previousElementSibling) ?\n                this.dragObj.targetClone.previousElementSibling.previousElementSibling : this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        if (element && !element.classList.contains(cls.DRAGGED_CARD_CLASS) && !element.classList.contains(cls.CLONED_CARD_CLASS)\n            && !element.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n            prevele = true;\n        }\n        else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === 'Descending') {\n            element = this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            return;\n        }\n        if (element.classList.contains(cls.CARD_CLASS)) {\n            var obj = this.kanbanObj.getCardDetails(element);\n            var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];\n            if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === 'Descending') {\n                modifieddata = modifieddata.reverse();\n            }\n            modifieddata.forEach(function (data, index) {\n                if (prevele) {\n                    data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;\n                }\n                else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {\n                    data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;\n                }\n                else if (keyIndex_1 === 1) {\n                    data[_this.kanbanObj.sortSettings.field] = index + 1;\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.toggleVisible = function (target, tColumn) {\n        var _this = this;\n        var headerCells = '.' + cls.HEADER_CELLS_CLASS + ':not(.' + cls.STACKED_HEADER_CELL_CLASS + ')';\n        var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));\n        lists.forEach(function (list) {\n            if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {\n                _this.kanbanObj.actionModule.columnToggle(list);\n            }\n        });\n        var cloneTarget = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (cloneTarget) {\n            var width = formatUnit(cloneTarget.offsetWidth - events.cardSpace);\n            this.dragObj.draggedClone.style.width = width;\n            this.dragObj.cloneElement.style.width = width;\n        }\n    };\n    DragAndDrop.prototype.multiCloneRemove = function () {\n        var cloneMulti = !isNoU(this.kanbanObj) ? [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TARGET_MULTI_CLONE_CLASS)) : [];\n        if (cloneMulti.length > 0) {\n            var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS));\n            columnKey.forEach(function (node) { return remove(node); });\n            cloneMulti.forEach(function (node) {\n                var cell = closest(node, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell) {\n                    cell.style.borderStyle = '';\n                    if (cell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                        removeClass([cell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n                    }\n                    removeClass([cell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n                }\n            });\n            this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);\n        }\n    };\n    DragAndDrop.prototype.calculateArgs = function (e) {\n        var eventArgs = this.getPageCoordinates(e);\n        this.dragObj.pageY = eventArgs.pageY;\n        this.dragObj.pageX = eventArgs.pageX;\n        this.isDragging = true;\n        if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {\n            this.kanbanObj.tooltipModule.tooltipObj.close();\n        }\n    };\n    DragAndDrop.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    DragAndDrop.prototype.getColumnKey = function (target) {\n        if (target && target.getAttribute('data-key')) {\n            return target.getAttribute('data-key').trim();\n        }\n        return '';\n    };\n    DragAndDrop.prototype.updateScrollPosition = function () {\n        var _this = this;\n        if (isNoU(this.dragObj.navigationInterval)) {\n            this.dragObj.navigationInterval = window.setInterval(function () { _this.autoScroll(); }, 100);\n        }\n    };\n    DragAndDrop.prototype.autoScrollValidation = function () {\n        var pageY = this.dragObj.pageY;\n        var pageX = this.dragObj.pageX;\n        var autoScrollDistance = 30;\n        var dragEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            dragEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            dragEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            dragEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            dragEdges.right = true;\n        }\n        this.dragEdges = dragEdges;\n    };\n    DragAndDrop.prototype.autoScroll = function () {\n        this.autoScrollValidation();\n        var scrollSensitivity = 30;\n        if (this.kanbanObj.isAdaptive) {\n            var parent_1;\n            if (this.dragEdges.top || this.dragEdges.bottom) {\n                if (this.dragObj.targetClone) {\n                    parent_1 = closest(this.dragObj.targetClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n                else {\n                    parent_1 = closest(this.dragObj.draggedClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n            }\n            else if (this.dragEdges.right || this.dragEdges.left) {\n                parent_1 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            }\n            if (parent_1) {\n                var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;\n                var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n                if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                    parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;\n                }\n                if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                    var width = this.parent.enableVirtualization ? this.kanbanObj.virtualLayoutModule.getWidth() :\n                        this.kanbanObj.layoutModule.getWidth();\n                    var scroll_1 = (width * (this.kanbanObj.columns.length - 1)) >\n                        parent_1.scrollLeft;\n                    if (scroll_1 || this.dragEdges.left) {\n                        parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                    }\n                }\n            }\n        }\n        else {\n            var parent_2 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            var column = this.dragObj.targetClone.parentElement;\n            var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;\n            var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;\n            if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                if (this.parent.swimlaneSettings.enableFrozenRows) {\n                    this.dragObj.cloneElement.style.top = !this.dragEdges.top ? (parseInt(this.dragObj.cloneElement.style.top, 10) + scrollSensitivity) + 'px' : (parseInt(this.dragObj.cloneElement.style.top, 10) - scrollSensitivity) + 'px';\n                }\n                if (column) {\n                    column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                if (column) {\n                    column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);\n            }\n            else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);\n            }\n        }\n    };\n    DragAndDrop.prototype.unWireDragEvents = function (element) {\n        if (!isNoU(element) && !isNoU(element.ej2_instances[0])) {\n            var dragInstance = element.ej2_instances[0];\n            if (dragInstance && !dragInstance.isDestroyed) {\n                dragInstance.destroy();\n            }\n        }\n    };\n    return DragAndDrop;\n}());\nexport { DragAndDrop };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, remove, isNullOrUndefined, closest, extend, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { FormValidator, NumericTextBox, TextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Dialog module is used to perform card actions.\n */\nvar KanbanDialog = /** @class */ (function () {\n    /**\n     * Constructor for dialog module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanDialog(parent) {\n        this.preventUpdate = false;\n        this.parent = parent;\n    }\n    KanbanDialog.prototype.openDialog = function (action, data) {\n        this.action = action;\n        this.parent.activeCardData.data = data;\n        this.renderDialog(data, action);\n        this.dialogObj.show();\n    };\n    KanbanDialog.prototype.closeDialog = function () {\n        this.dialogObj.hide();\n    };\n    KanbanDialog.prototype.renderDialog = function (args, action) {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            buttons: this.getDialogButtons(action),\n            content: this.getDialogContent(args, action),\n            cssClass: cls.DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            header: this.parent.localeObj.getConstant(action === 'Add' ? 'addTitle' : action === 'Edit' ? 'editTitle' : 'deleteTitle'),\n            height: 'auto',\n            isModal: true,\n            showCloseIcon: true,\n            width: (action === 'Delete') ? 400 : 350,\n            visible: false,\n            beforeOpen: this.onBeforeDialogOpen.bind(this),\n            beforeClose: this.onBeforeDialogClose.bind(this)\n        };\n        this.dialogObj = new Dialog(extend(dialogModel, action !== 'Delete' ? (this.parent.dialogSettings.model || {}) : {}), this.element);\n        if (action !== 'Delete') {\n            this.applyFormValidation();\n        }\n        this.dialogObj.element.querySelector('.e-dlg-closeicon-btn').title = this.parent.localeObj.getConstant('close');\n    };\n    KanbanDialog.prototype.getDialogContent = function (args, action) {\n        if (action === 'Delete') {\n            return this.parent.localeObj.getConstant('deleteContent');\n        }\n        else {\n            var container = createElement('div', { className: cls.FORM_WRAPPER_CLASS });\n            var form = createElement('form', {\n                id: this.parent.element.id + 'EditForm',\n                className: cls.FORM_CLASS, attrs: { onsubmit: 'return false;' }\n            });\n            if (this.parent.dialogSettings.template) {\n                if (args) {\n                    this.destroyComponents();\n                    [].slice.call(form.childNodes).forEach(function (node) { return remove(node); });\n                }\n                var templateId = this.parent.element.id + '_dialogTemplate';\n                var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, 'dialogTemplate', templateId, false);\n                append(dialogTemplate, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                var dialogWrapper = createElement('div', { className: cls.DIALOG_CONTENT_CONTAINER });\n                form.appendChild(dialogWrapper);\n                var table = createElement('table');\n                dialogWrapper.appendChild(table);\n                var dialogFields = this.getDialogFields();\n                for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {\n                    var field = dialogFields_1[_i];\n                    var tr = createElement('tr');\n                    table.appendChild(tr);\n                    tr.appendChild(createElement('td', { className: 'e-label', innerHTML: field.text ? field.text : field.key }));\n                    var td = createElement('td');\n                    tr.appendChild(td);\n                    td.appendChild(this.renderComponents(field));\n                }\n            }\n            container.appendChild(form);\n            return container;\n        }\n    };\n    KanbanDialog.prototype.getDialogFields = function () {\n        var fields = this.parent.dialogSettings.fields;\n        if (fields.length === 0) {\n            fields = [\n                { text: 'ID', key: this.parent.cardSettings.headerField, type: 'TextBox' },\n                { key: this.parent.keyField, type: 'DropDown' },\n                { key: this.parent.cardSettings.contentField, type: 'TextArea' }\n            ];\n            if (this.parent.sortSettings.field) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.sortSettings.field, type: 'TextBox' });\n            }\n            if (this.parent.swimlaneSettings.keyField) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.swimlaneSettings.keyField, type: 'DropDown' });\n            }\n        }\n        return fields;\n    };\n    KanbanDialog.prototype.getDialogButtons = function (action) {\n        var primaryButtonClass = action === 'Delete' ? 'e-dialog-yes' : action === 'Add' ? 'e-dialog-add' : 'e-dialog-edit';\n        var flatButtonClass = action === 'Delete' ? 'e-dialog-no' : 'e-dialog-cancel';\n        var dialogButtons = [\n            {\n                buttonModel: {\n                    cssClass: 'e-flat ' + primaryButtonClass, isPrimary: true,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'save' : 'yes')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }, {\n                buttonModel: {\n                    cssClass: 'e-flat ' + flatButtonClass, isPrimary: false,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'cancel' : 'no')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (action === 'Edit') {\n            var deleteButton = {\n                buttonModel: { cssClass: 'e-flat e-dialog-delete', isPrimary: false, content: this.parent.localeObj.getConstant('delete') },\n                click: this.dialogButtonClick.bind(this)\n            };\n            dialogButtons.splice(0, 0, deleteButton);\n        }\n        return dialogButtons;\n    };\n    KanbanDialog.prototype.renderComponents = function (field) {\n        var wrapper = createElement('div', { className: field.key + '_wrapper' });\n        var element = createElement('input', { className: cls.FIELD_CLASS, attrs: { 'name': field.key } });\n        wrapper.appendChild(element);\n        var divElement;\n        var dropDownOptions;\n        var controlObj;\n        var fieldValue = this.parent.activeCardData.data ?\n            this.parent.activeCardData.data[field.key] : null;\n        switch (field.type) {\n            case 'DropDown':\n                if (field.key === this.parent.keyField) {\n                    var currentKeys = this.parent.enableVirtualization ?\n                        this.parent.virtualLayoutModule.columnKeys : this.parent.layoutModule.columnKeys;\n                    if (this.parent.actionModule.hideColumnKeys.length > 0) {\n                        currentKeys = [];\n                        for (var i = 0; i < this.parent.columns.length; i++) {\n                            var isColumnVisible = this.parent.enableVirtualization ?\n                                this.parent.virtualLayoutModule.isColumnVisible(this.parent.columns[i]) :\n                                this.parent.layoutModule.isColumnVisible(this.parent.columns[i]);\n                            if (isColumnVisible) {\n                                var isNumeric = typeof this.parent.columns[i].keyField === 'number';\n                                if (isNumeric) {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());\n                                }\n                                else {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(',').map(function (e) { return e.trim(); }));\n                                }\n                            }\n                        }\n                    }\n                    dropDownOptions = { dataSource: currentKeys, value: fieldValue ? fieldValue.toString() : fieldValue };\n                }\n                else if (field.key === this.parent.swimlaneSettings.keyField) {\n                    dropDownOptions = {\n                        dataSource: [].slice.call(this.parent.enableVirtualization ? this.parent.virtualLayoutModule.kanbanRows :\n                            this.parent.layoutModule.kanbanRows),\n                        fields: { text: 'textField', value: 'keyField' }, value: fieldValue\n                    };\n                }\n                controlObj = new DropDownList(dropDownOptions);\n                break;\n            case 'Numeric':\n                controlObj = new NumericTextBox({ value: fieldValue });\n                break;\n            case 'TextBox':\n                controlObj = new TextBox({ value: fieldValue });\n                if (fieldValue && this.parent.cardSettings.headerField === field.key) {\n                    controlObj.enabled = false;\n                }\n                break;\n            case 'TextArea':\n                remove(element);\n                divElement = createElement('div');\n                element = createElement('textarea', {\n                    className: cls.FIELD_CLASS, attrs: { 'name': field.key, 'rows': '3', 'aria-label': this.parent.cardSettings.contentField },\n                    innerHTML: fieldValue\n                });\n                wrapper.appendChild(divElement).appendChild(element);\n                break;\n            default:\n                break;\n        }\n        if (controlObj) {\n            controlObj.appendTo(element);\n        }\n        return wrapper;\n    };\n    KanbanDialog.prototype.onBeforeDialogOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            data: this.parent.activeCardData.data,\n            cancel: false, element: this.element,\n            target: this.parent.activeCardData.element,\n            requestType: this.action\n        };\n        this.storeElement = document.activeElement;\n        if (parseInt(args.maxHeight, 10) <= 250) {\n            args.maxHeight = '250px';\n        }\n        this.parent.trigger(events.dialogOpen, eventProp, function (openArgs) {\n            args.cancel = openArgs.cancel;\n            if (openArgs.cancel) {\n                _this.destroy();\n            }\n        });\n    };\n    KanbanDialog.prototype.onBeforeDialogClose = function (args) {\n        var _this = this;\n        var formInputs = this.getFormElements();\n        var cardObj = {};\n        if (args.isInteracted) {\n            /* close icon preventing data update */\n            this.preventUpdate = true;\n        }\n        if (!this.preventUpdate) {\n            for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {\n                var input = formInputs_1[_i];\n                var columnName = input.name || this.getColumnName(input);\n                if (!isNullOrUndefined(columnName) && columnName !== '') {\n                    var value = this.getValueFromElement(input);\n                    if (columnName === this.parent.cardSettings.headerField) {\n                        value = this.getIDType() === 'string' ? value : parseInt(value, 10);\n                    }\n                    cardObj[columnName] = value;\n                }\n            }\n        }\n        this.preventUpdate = false;\n        cardObj = extend(this.parent.activeCardData.data, cardObj);\n        var eventProp = { data: cardObj, cancel: false, element: this.element, requestType: this.action };\n        this.parent.trigger(events.dialogClose, eventProp, function (closeArgs) {\n            args.cancel = closeArgs.cancel;\n            if (!closeArgs.cancel) {\n                _this.cardData = eventProp.data;\n                _this.destroy();\n                _this.parent.actionModule.SingleCardSelection(_this.cardData);\n            }\n        });\n    };\n    KanbanDialog.prototype.getIDType = function () {\n        if (this.parent.kanbanData.length !== 0) {\n            return typeof (this.parent.kanbanData[0][this.parent.cardSettings.headerField]);\n        }\n        return 'string';\n    };\n    KanbanDialog.prototype.applyFormValidation = function () {\n        var _this = this;\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            rules[field.key] = (field.validationRules && Object.keys(field.validationRules).length > 0) ? field.validationRules : null;\n        }\n        this.formObj = new FormValidator(form, {\n            rules: rules,\n            customPlacement: function (inputElement, error) {\n                var id = error.getAttribute('for');\n                var elem = _this.element.querySelector('#' + id + '_Error');\n                if (!elem) {\n                    _this.createTooltip(inputElement, error, id, '');\n                }\n            },\n            validationComplete: function (args) {\n                var elem = _this.element.querySelector('#' + args.inputName + '_Error');\n                if (elem) {\n                    elem.style.display = (args.status === 'failure') ? '' : 'none';\n                }\n            }\n        });\n    };\n    KanbanDialog.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.parentElement.getBoundingClientRect();\n        if (this.element.classList.contains(cls.DIALOG_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-kanban-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    KanbanDialog.prototype.destroyToolTip = function () {\n        if (this.element) {\n            this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS).forEach(function (node) { return remove(node); });\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    KanbanDialog.prototype.dialogButtonClick = function (event) {\n        var target = event.target.cloneNode(true);\n        if (!isNullOrUndefined(event.keyCode) && event.keyCode === 13) {\n            var valTrg = this.dialogObj.element.querySelector('.e-footer-content button.e-primary');\n            target = valTrg.cloneNode(true);\n        }\n        var id = this.formObj.element.id;\n        if (document.getElementById(id) && this.formObj.validate() &&\n            (target.classList.contains('e-dialog-edit') || target.classList.contains('e-dialog-add'))) {\n            this.dialogObj.hide();\n            if (!isNullOrUndefined(this.cardData)) {\n                if (target.classList.contains('e-dialog-edit')) {\n                    var activeCard = this.parent.activeCardData;\n                    var updateIndex = void 0;\n                    if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField]\n                        && activeCard.element) {\n                        updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);\n                    }\n                    if (this.parent.enableHtmlSanitizer) {\n                        if (typeof this.cardData[this.parent.cardSettings.contentField] === 'string') {\n                            this.cardData[this.parent.cardSettings.contentField] =\n                                SanitizeHtmlHelper.sanitize(this.cardData[this.parent.cardSettings.contentField]);\n                        }\n                    }\n                    this.parent.crudModule.updateCard(this.cardData, updateIndex);\n                }\n                if (target.classList.contains('e-dialog-add')) {\n                    this.parent.crudModule.addCard(this.cardData);\n                }\n                this.parent.actionModule.SingleCardSelection(this.cardData);\n                this.cardData = null;\n            }\n        }\n        if (!target.classList.contains('e-dialog-edit') && !target.classList.contains('e-dialog-add')) {\n            if (target.classList.contains('e-dialog-cancel')) {\n                this.preventUpdate = true;\n            }\n            this.dialogObj.hide();\n            if (target.classList.contains('e-dialog-yes')) {\n                this.parent.crudModule.deleteCard(this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-no')) {\n                this.openDialog('Edit', this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-delete')) {\n                this.openDialog('Delete', this.parent.activeCardData.data);\n            }\n        }\n    };\n    KanbanDialog.prototype.getFormElements = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + cls.FIELD_CLASS));\n        var validElements = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (element.classList.contains('e-control')) {\n                validElements.push(element);\n            }\n            else if (element.querySelector('.e-control')) {\n                validElements.push(element.querySelector('.e-control'));\n            }\n            else {\n                validElements.push(element);\n            }\n        }\n        return validElements;\n    };\n    KanbanDialog.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist') || element.classList.contains('e-multiselect')) {\n                fieldSelector = element.classList.contains('e-dropdownlist') ? 'e-ddl' : 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numeric';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    KanbanDialog.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = element.value;\n            }\n        }\n        return value;\n    };\n    KanbanDialog.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements();\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances;\n            if (instance && instance.length > 0) {\n                instance.forEach(function (node) { return node.destroy(); });\n            }\n            if (this.parent.isReact && this.formObj) {\n                this.formObj.element.remove();\n            }\n        }\n    };\n    KanbanDialog.prototype.destroy = function () {\n        this.destroyToolTip();\n        this.destroyComponents();\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            this.storeElement.focus();\n            this.dialogObj = null;\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return KanbanDialog;\n}());\nexport { KanbanDialog };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, addClass, removeClass, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban keyboard module\n */\nvar Keyboard = /** @class */ (function () {\n    /**\n     * Constructor for keyboard module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function Keyboard(parent) {\n        this.keyConfigs = {\n            firstCardSelection: '36',\n            lastCardSelection: '35',\n            upArrow: '38',\n            downArrow: '40',\n            rightArrow: '39',\n            leftArrow: '37',\n            multiSelectionEnter: 'ctrl+13',\n            multiSelectionSpace: 'ctrl+32',\n            multiSelectionByUpArrow: 'shift+38',\n            multiSelectionByDownArrow: 'shift+40',\n            shiftTab: 'shift+tab',\n            enter: '13',\n            tab: 'tab',\n            delete: '46',\n            escape: '27',\n            space: '32'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.multiSelection = false;\n    }\n    Keyboard.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var selectedCard = this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS).item(0);\n        if (!selectedCard && !closest(document.activeElement, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var contentCell;\n        var selectedCards;\n        var selectedCardsData = [];\n        switch (e.action) {\n            case 'upArrow':\n            case 'downArrow':\n            case 'multiSelectionByUpArrow':\n            case 'multiSelectionByDownArrow':\n                e.preventDefault();\n                this.processUpDownArrow(e.action, selectedCard);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.processLeftRightArrow(e);\n                break;\n            case 'firstCardSelection':\n            case 'lastCardSelection':\n                this.processCardSelection(e.action, selectedCard);\n                break;\n            case 'multiSelectionEnter':\n            case 'multiSelectionSpace':\n                if (document.activeElement) {\n                    this.parent.actionModule.cardSelection(document.activeElement, true, false);\n                }\n                break;\n            case 'space':\n            case 'enter':\n                this.processEnter(e, selectedCard);\n                break;\n            case 'escape':\n                if (document.activeElement.classList.contains(cls.CARD_CLASS) ||\n                    document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if (document.activeElement.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                        removeClass([document.activeElement], cls.CARD_SELECTION_CLASS);\n                        document.activeElement.focus();\n                    }\n                    else {\n                        var ele = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                        var cards = [].slice.call(ele.querySelectorAll('.' + cls.CARD_CLASS));\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        ele.focus();\n                        this.cardTabIndexRemove();\n                        this.addRemoveTabIndex('Add');\n                    }\n                }\n                break;\n            case 'tab':\n            case 'shiftTab':\n                contentCell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n                    if (!document.activeElement.nextElementSibling && e.action === 'tab') {\n                        e.preventDefault();\n                    }\n                    if (!document.activeElement.previousElementSibling && contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)\n                        && e.action === 'tab') {\n                        addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.SHOW_ADD_FOCUS);\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if ((!contentCell.querySelector('.' + cls.CARD_CLASS) && e.action === 'tab') || e.action === 'shiftTab') {\n                        e.preventDefault();\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.ROOT_CLASS)) {\n                    this.cardTabIndexRemove();\n                    this.parent.keyboardModule.addRemoveTabIndex('Add');\n                }\n                break;\n            case 'delete':\n                selectedCards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n                selectedCards.forEach(function (selected) { selectedCardsData.push(_this.parent.getCardDetails(selected)); });\n                this.parent.crudModule.deleteCard(selectedCardsData);\n                break;\n        }\n    };\n    Keyboard.prototype.processCardSelection = function (action, selectedCard) {\n        if (selectedCard) {\n            removeClass([selectedCard], cls.CARD_SELECTION_CLASS);\n            if (this.parent.enableVirtualization) {\n                this.parent.virtualLayoutModule.disableAttributeSelection(selectedCard);\n            }\n            else {\n                this.parent.layoutModule.disableAttributeSelection(selectedCard);\n            }\n            var selection = this.parent.actionModule.selectionArray;\n            selection.splice(selection.indexOf(selectedCard.getAttribute('data-id')), 1);\n        }\n        this.cardTabIndexRemove();\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        var element = action === 'firstCardSelection' ? cards[0] : cards[cards.length - 1];\n        this.parent.actionModule.cardSelection(element, false, false);\n        this.addRemoveTabIndex('Remove');\n        element.focus();\n        var card = [].slice.call(closest(element, '.' + cls.CONTENT_CELLS_CLASS).querySelectorAll('.' + cls.CARD_CLASS));\n        card.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n    };\n    Keyboard.prototype.processLeftRightArrow = function (e) {\n        if (document.activeElement.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            if (e.action === 'rightArrow' && document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (e.action === 'leftArrow' && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n        }\n    };\n    Keyboard.prototype.processUpDownArrow = function (action, selectedCard) {\n        if (action === 'upArrow' && document.activeElement) {\n            if (document.activeElement.classList.contains(cls.CARD_CLASS) && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n            else if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                document.activeElement.setAttribute('tabindex', '-1');\n                removeClass([document.activeElement], cls.SHOW_ADD_FOCUS);\n                var cell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell.querySelectorAll('.' + cls.CARD_CLASS).length > 0) {\n                    [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS)).slice(-1)[0].focus();\n                }\n            }\n            this.removeSelection();\n        }\n        else if (action === 'downArrow' && document.activeElement &&\n            document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            if (document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling) {\n                var ele = closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling;\n                ele.setAttribute('tabindex', '0');\n                addClass([ele], cls.SHOW_ADD_FOCUS);\n                ele.focus();\n            }\n            this.removeSelection();\n        }\n        if ((action === 'multiSelectionByUpArrow' || action === 'multiSelectionByDownArrow')\n            && selectedCard && this.parent.cardSettings.selectionType === 'Multiple') {\n            var card = void 0;\n            if (action === 'multiSelectionByUpArrow') {\n                card = document.activeElement.previousElementSibling;\n            }\n            else {\n                card = document.activeElement.nextElementSibling;\n            }\n            if (card) {\n                this.parent.actionModule.cardSelection(card, false, true);\n                card.focus();\n                this.multiSelection = true;\n            }\n        }\n    };\n    Keyboard.prototype.removeSelection = function () {\n        if (this.multiSelection) {\n            var cards = this.parent.getSelectedCards();\n            if (cards.length > 0) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n            }\n            this.multiSelection = false;\n        }\n    };\n    Keyboard.prototype.cardTabIndexRemove = function () {\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        cards.forEach(function (card) { card.setAttribute('tabindex', '-1'); });\n        var addButton = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SHOW_ADD_BUTTON));\n        addButton.forEach(function (add) {\n            add.setAttribute('tabindex', '-1');\n            removeClass([add], cls.SHOW_ADD_FOCUS);\n        });\n    };\n    Keyboard.prototype.processEnter = function (e, selectedCard) {\n        if (e.action === 'space') {\n            e.preventDefault();\n        }\n        var element = (e.target);\n        if (element.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.parent.actionModule.columnExpandCollapse(e);\n        }\n        if (element.classList.contains(cls.SWIMLANE_ROW_EXPAND_CLASS) || element.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.parent.actionModule.rowExpandCollapse(e);\n        }\n        if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            this.parent.actionModule.cardSelection(document.activeElement, false, false);\n        }\n        if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.actionModule.addButtonClick(document.activeElement);\n            }\n            document.activeElement.focus();\n        }\n        if (element.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            var cards = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS));\n            this.addRemoveTabIndex('Remove');\n            if (cards.length > 0) {\n                element.querySelector('.' + cls.CARD_CLASS).focus();\n                cards.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n            }\n            if (element.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).setAttribute('tabindex', '0');\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).focus();\n            }\n        }\n        if (selectedCard === document.activeElement && this.parent.element.querySelectorAll('.' + cls.CARD_SELECTION_CLASS).length === 1) {\n            this.parent.activeCardData = {\n                data: this.parent.getCardDetails(selectedCard), element: selectedCard\n            };\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.dialogModule.openDialog('Edit', this.parent.getCardDetails(selectedCard));\n            }\n            selectedCard.focus();\n        }\n    };\n    Keyboard.prototype.addRemoveTabIndex = function (action) {\n        var attribute = action === 'Add' ? '0' : '-1';\n        var headerIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ICON_CLASS));\n        if (headerIcon.length > 0) {\n            headerIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_EXPAND_CLASS));\n        if (swimlaneIcon.length > 0) {\n            swimlaneIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));\n        contentCell.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n    };\n    Keyboard.prototype.destroy = function () {\n        this.keyboardModule.destroy();\n    };\n    return Keyboard;\n}());\nexport { Keyboard };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, append, closest, addClass, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\n/**\n * Tooltip for Kanban board\n */\nvar KanbanTooltip = /** @class */ (function () {\n    /**\n     * Constructor for tooltip module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanTooltip(parent) {\n        this.parent = parent;\n        this.renderTooltip();\n    }\n    KanbanTooltip.prototype.renderTooltip = function () {\n        this.tooltipObj = new Tooltip({\n            cssClass: this.parent.cssClass + ' ' + cls.TOOLTIP_CLASS,\n            enableRtl: this.parent.enableRtl,\n            mouseTrail: !this.parent.isAdaptive,\n            offsetY: 5,\n            position: 'BottomCenter',\n            showTipPointer: true,\n            target: '.' + cls.TOOLTIP_TEXT_CLASS,\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n        this.tooltipObj.isStringTemplate = true;\n    };\n    KanbanTooltip.prototype.onBeforeRender = function (args) {\n        if (this.parent.dragAndDropModule.isDragging) {\n            args.cancel = true;\n            return;\n        }\n        var tooltipContent;\n        if (this.parent.tooltipTemplate) {\n            tooltipContent = createElement('div');\n            var target = closest(args.target, '.' + cls.CARD_CLASS);\n            var data = this.parent.getCardDetails(target);\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = this.parent.templateParser(this.parent.tooltipTemplate)(data, this.parent, 'tooltipTemplate', templateId, false);\n            append(tooltipTemplate, tooltipContent);\n            this.parent.renderTemplates();\n        }\n        else {\n            tooltipContent = initializeCSPTemplate(function () {\n                return \"<div class=\\\"e-card-header-caption\\\">\" + args.target.innerText + \"</div>\";\n            });\n        }\n        this.tooltipObj.setProperties({ content: tooltipContent }, true);\n    };\n    KanbanTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate']);\n    };\n    KanbanTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return KanbanTooltip;\n}());\nexport { KanbanTooltip };\n","import { Touch, EventHandler, remove, addClass, createElement, closest } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban touch module\n */\nvar KanbanTouch = /** @class */ (function () {\n    /**\n     * Constructor for touch module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function KanbanTouch(parent) {\n        this.parent = parent;\n        this.tabHold = false;\n    }\n    KanbanTouch.prototype.wireTouchEvents = function () {\n        this.element = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        this.touchObj = new Touch(this.element, { tapHold: this.tapHoldHandler.bind(this) });\n    };\n    KanbanTouch.prototype.tapHoldHandler = function (e) {\n        this.tabHold = true;\n        var target = closest(e.originalEvent.target, '.' + cls.CARD_CLASS);\n        if (target && this.parent.cardSettings.selectionType === 'Multiple') {\n            this.parent.actionModule.cardSelection(target, true, false);\n            if (!this.mobilePopup) {\n                this.renderMobilePopup();\n                this.mobilePopup.show();\n            }\n            this.updatePopupContent();\n        }\n    };\n    KanbanTouch.prototype.renderMobilePopup = function () {\n        if (this.parent.cardSettings.selectionType === 'Multiple') {\n            var mobilePopupWrapper = createElement('div', {\n                className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close',\n                innerHTML: \"<div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\"></button></div>\" +\n                    (\"<div class=\\\"\" + cls.POPUP_CONTENT_CLASS + \"\\\"></div>\")\n            });\n            document.body.appendChild(mobilePopupWrapper);\n            addClass([mobilePopupWrapper], cls.DEVICE_CLASS);\n            this.mobilePopup = new Popup(mobilePopupWrapper, {\n                targetType: 'container',\n                enableRtl: this.parent.enableRtl,\n                hideAnimation: { name: 'ZoomOut' },\n                showAnimation: { name: 'ZoomIn' },\n                collision: { X: 'fit', Y: 'fit' },\n                position: { X: 'left', Y: 'top' },\n                viewPortElement: document.body,\n                zIndex: 1004,\n                close: this.popupClose.bind(this)\n            });\n            var closeIcon = this.mobilePopup.element.querySelector('.' + cls.CLOSE_CLASS);\n            var buttonObj = new Button({\n                cssClass: 'e-flat e-round e-small',\n                enableRtl: this.parent.enableRtl,\n                iconCss: cls.ICON_CLASS + ' ' + cls.CLOSE_ICON_CLASS\n            });\n            buttonObj.appendTo(closeIcon);\n            buttonObj.isStringTemplate = true;\n            EventHandler.add(closeIcon, 'click', this.closeClick, this);\n        }\n    };\n    KanbanTouch.prototype.getPopupContent = function () {\n        var popupContent;\n        var selectedCards = this.parent.getSelectedCards();\n        if (selectedCards.length > 1) {\n            popupContent = '(' + selectedCards.length + ') ' + this.parent.localeObj.getConstant('cardsSelected');\n        }\n        else if (selectedCards.length === 1) {\n            popupContent = ' ' + this.parent.getCardDetails(selectedCards[0])[this.parent.cardSettings.headerField];\n        }\n        return popupContent;\n    };\n    KanbanTouch.prototype.updatePopupContent = function () {\n        if (!this.mobilePopup) {\n            return;\n        }\n        var popupContent = this.getPopupContent();\n        if (popupContent) {\n            this.mobilePopup.element.querySelector('.' + cls.POPUP_CONTENT_CLASS).textContent = popupContent;\n        }\n        else {\n            this.mobilePopup.hide();\n        }\n    };\n    KanbanTouch.prototype.closeClick = function () {\n        this.parent.touchModule.mobilePopup.hide();\n    };\n    KanbanTouch.prototype.popupClose = function () {\n        this.popupDestroy();\n    };\n    KanbanTouch.prototype.popupDestroy = function () {\n        if (this.mobilePopup && this.mobilePopup.element) {\n            var instance = this.mobilePopup.element.querySelector('.e-control.e-btn').ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n            this.mobilePopup.destroy();\n            remove(this.mobilePopup.element);\n            this.mobilePopup = null;\n        }\n    };\n    KanbanTouch.prototype.unWireTouchEvents = function () {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n        }\n        this.touchObj = null;\n        this.element = null;\n    };\n    KanbanTouch.prototype.destroy = function () {\n        this.popupDestroy();\n        this.unWireTouchEvents();\n        this.tabHold = false;\n    };\n    return KanbanTouch;\n}());\nexport { KanbanTouch };\n","import { append, createElement, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from './constant';\nimport * as cls from './css-constant';\n/**\n * Kanban mobile layout rendering module\n *\n */\nvar MobileLayout = /** @class */ (function () {\n    function MobileLayout(parent) {\n        this.parent = parent;\n    }\n    MobileLayout.prototype.renderSwimlaneHeader = function () {\n        var toolbarWrapper = createElement('div', {\n            className: cls.SWIMLANE_HEADER_CLASS,\n            innerHTML: '<div class=\"' + cls.SWIMLANE_HEADER_TOOLBAR_CLASS + '\"><div class=\"' + cls.TOOLBAR_MENU_CLASS +\n                '\"><div class=\"e-icons ' + cls.TOOLBAR_MENU_ICON_CLASS + '\"></div></div><div class=\"' + cls.TOOLBAR_LEVEL_TITLE_CLASS +\n                '\"><div class=\"' + cls.TOOLBAR_SWIMLANE_NAME_CLASS + '\"></div></div></div>'\n        });\n        this.parent.element.appendChild(toolbarWrapper);\n        EventHandler.add(toolbarWrapper.querySelector('.' + cls.TOOLBAR_MENU_ICON_CLASS), 'click', this.menuClick, this);\n    };\n    MobileLayout.prototype.renderSwimlaneTree = function () {\n        var height = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).offsetHeight;\n        var treeHeight = window.innerHeight - height;\n        this.popupOverlay = createElement('div', { className: cls.SWIMLANE_OVERLAY_CLASS, styles: 'height: ' + treeHeight + 'px;' });\n        var wrapper = createElement('div', { className: cls.SWIMLANE_CONTENT_CLASS, styles: 'top:' + height + 'px;' });\n        var treeWrapper = createElement('div', {\n            className: cls.SWIMLANE_RESOURCE_CLASS + ' e-popup-close', styles: 'height: ' + treeHeight + 'px;'\n        });\n        wrapper.appendChild(treeWrapper);\n        wrapper.appendChild(this.popupOverlay);\n        this.parent.element.appendChild(wrapper);\n        var swimlaneTree = createElement('div', { className: cls.SWIMLANE_TREE_CLASS });\n        treeWrapper.appendChild(swimlaneTree);\n        var dataSource = this.parent.enableVirtualization ?\n            this.parent.virtualLayoutModule.kanbanRows : this.parent.layoutModule.kanbanRows;\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: dataSource,\n                id: 'keyField',\n                text: 'textField'\n            },\n            nodeTemplate: this.parent.swimlaneSettings.template,\n            nodeClicked: this.treeSwimlaneClick.bind(this),\n            drawNode: this.drawNode.bind(this)\n        });\n        this.treeViewObj.appendTo(swimlaneTree);\n        var popupObj = {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + cls.CONTENT_CLASS)\n        };\n        popupObj.content = this.treeViewObj.element;\n        this.treePopup = new Popup(treeWrapper, popupObj);\n    };\n    MobileLayout.prototype.menuClick = function () {\n        if (this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.layoutModule.swimlaneIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], 'e-enable');\n        }\n    };\n    MobileLayout.prototype.treeSwimlaneClick = function (args) {\n        this.treePopup.hide();\n        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n        this.parent.layoutModule.swimlaneIndex = treeNodes.indexOf(args.node);\n        this.parent.layoutModule.scrollLeft = 0;\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        args.event.preventDefault();\n    };\n    MobileLayout.prototype.hidePopup = function () {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], 'e-enable');\n    };\n    MobileLayout.prototype.getWidth = function () {\n        return (window.innerWidth * 80) / 100;\n    };\n    MobileLayout.prototype.drawNode = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.parent.swimlaneSettings.template && this.parent.isReact) {\n            var templateId = this.parent.element.id + '_treeviewTemplate';\n            var treeViewTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(args.nodeData, this.parent, 'nodeTemplate', templateId, false);\n            append(treeViewTemplate, args.node.querySelector('.e-list-text'));\n        }\n    };\n    return MobileLayout;\n}());\nexport { MobileLayout };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */ (function (_super) {\n    __extends(LayoutRender, _super);\n    function LayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.kanbanRows = [];\n        _this.parent = parent;\n        _this.columnKeys = [];\n        _this.swimlaneIndex = 0;\n        _this.swimlaneData = {};\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.parent.on(events.dataReady, _this.initRender, _this);\n        _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        return _this;\n    }\n    LayoutRender.prototype.initRender = function () {\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        this.swimlaneData = this.getSwimlaneCards();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n            this.renderSwimlaneHeader();\n        }\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        this.renderContent();\n        this.renderCards();\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    LayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        var tableBody = createElement('tbody', { className: 'e-hide', innerHTML: '<tr><td></td></tr>', attrs: { 'role': 'rowgroup' } });\n        headerTable.appendChild(tableBody);\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'scope': 'col' }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                this_1.columnData = this_1.getColumnCards(this_1.parent.kanbanData);\n                var noOfCard = this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0', 'role': 'button' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    LayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS, attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tHead = createElement('thead', { className: 'e-hide', attrs: { 'role': 'none' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var thElem = createElement('th', { id: column.keyField, innerHTML: column.keyField, attrs: { 'scope': 'col' } });\n            thElem.style.display = 'none';\n            tHead.appendChild(thElem);\n        }\n        contentTable.appendChild(tHead);\n        var tBody = createElement('tbody', { attrs: { 'role': 'treegrid', 'aria-label': 'Kanban Content' } });\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        this.swimlaneRow = this.kanbanRows;\n        this.initializeSwimlaneTree();\n        for (var _b = 0, _c = this.swimlaneRow; _b < _c.length; _b++) {\n            var row = _c[_b];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n                this.renderSwimlaneRow(tBody, row, isCollaspsed);\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className,\n            attrs: { 'role': 'row', 'aria-label': row.keyField + 'row content' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass, attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'tabindex': '0',\n                        'aria-describedby': column.keyField.toString(), 'role': 'gridcell' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' +\n                        this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.initializeSwimlaneTree = function () {\n        if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n            var swimlaneHeaderName = this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS);\n            this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n            this.renderSwimlaneTree();\n            if (this.parent.swimlaneSettings.template) {\n                var cardCount = this.swimlaneData[this.swimlaneRow[0].keyField].length;\n                var templateArgs = extend({}, this.swimlaneRow[0], { count: cardCount }, true);\n                var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', '', false);\n                swimlaneHeaderName.appendChild(swimlaneTemplate[0]);\n            }\n            else {\n                swimlaneHeaderName.innerHTML = this.swimlaneRow[0].textField;\n            }\n        }\n    };\n    LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n        var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n        var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n        var tr = createElement('tr', {\n            className: name + className, attrs: { 'aria-label': row.keyField + ' row header',\n                'role': 'row', 'data-key': row.keyField, 'aria-expanded': (!isCollapsed).toString() }\n        });\n        var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n        var td = createElement('td', { className: cls.CONTENT_CELLS_CLASS,\n            attrs: { 'data-role': 'kanban-column', 'role': 'gridcell', colspan: col.toString() } });\n        var swimlaneHeader = createElement('div', { className: cls.SWIMLANE_HEADER_CLASS });\n        td.appendChild(swimlaneHeader);\n        var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n        var iconDiv = createElement('div', {\n            className: cls.ICON_CLASS + ' ' + iconClass, attrs: {\n                'tabindex': '0', 'role': 'button', 'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n            }\n        });\n        swimlaneHeader.appendChild(iconDiv);\n        var headerWrap = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n        swimlaneHeader.appendChild(headerWrap);\n        var cardCount = this.swimlaneData[row.keyField].length;\n        if (this.parent.swimlaneSettings.template) {\n            var templateArgs = extend({}, row, { count: cardCount }, true);\n            addClass([td], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_swimlaneTemplate';\n            var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n            append(swimlaneTemplate, headerWrap);\n        }\n        else {\n            headerWrap.appendChild(createElement('div', {\n                className: cls.SWIMLANE_ROW_TEXT_CLASS,\n                innerHTML: row.textField,\n                attrs: { 'data-role': row.textField }\n            }));\n        }\n        if (this.parent.swimlaneSettings.showItemCount) {\n            swimlaneHeader.appendChild(createElement('div', {\n                className: cls.CARD_ITEM_COUNT_CLASS,\n                innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n            }));\n        }\n        tr.appendChild(td);\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'swimlaneRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var rows = this.swimlaneRow;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var columnData = _this.parent.swimlaneSettings.keyField ?\n                        _this.getColumnData(column.keyField, (_this.parent.swimlaneSettings.showEmptyRow &&\n                            isNoU(_this.swimlaneData[rows[index].keyField])) ? []\n                            : _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n                    dataCount += columnData.length;\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var cardWrapper_1 = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox', 'tabindex': '0',\n                            'aria-label': column.keyField.toString()\n                        }\n                    });\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper_1);\n                    if (columnData.length > 0) {\n                        var _loop_3 = function (data) {\n                            var cardText = data[_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(data);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: data, element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n                            var data = _a[_i];\n                            _loop_3(data);\n                        }\n                    }\n                    else {\n                        cardWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    LayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: { 'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option', 'aria-roledescription': 'Card'\n            }\n        });\n        if (this.parent.cardHeight !== 'auto') {\n            cardElement.style.height = formatUnit(this.parent.cardHeight);\n        }\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    LayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS, innerHTML: this.parent.localeObj.getConstant('noCard'),\n            attrs: { 'aria-label': this.parent.localeObj.getConstant('noCard'), 'role': 'option' }\n        });\n        return emptyCard;\n    };\n    LayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    LayoutRender.prototype.getRows = function () {\n        var _this = this;\n        var kanbanRows = [];\n        if (this.parent.swimlaneSettings.keyField) {\n            this.parent.kanbanData.map(function (obj) {\n                if (!_this.parent.swimlaneSettings.showEmptyRow) {\n                    if ((isNoU(obj[_this.parent.keyField])) || (obj[_this.parent.keyField] === '') ||\n                        (obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1)) {\n                        return;\n                    }\n                }\n                var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n                var keyField = obj[_this.parent.swimlaneSettings.keyField];\n                if (!obj[_this.parent.swimlaneSettings.keyField]) {\n                    if (_this.parent.swimlaneSettings.showUnassignedRow) {\n                        textField = _this.parent.localeObj.getConstant('unassigned');\n                        keyField = '';\n                    }\n                    else {\n                        return;\n                    }\n                }\n                kanbanRows.push({ keyField: keyField, textField: textField });\n            });\n            kanbanRows = kanbanRows.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.keyField; }).indexOf(item.keyField);\n            });\n            kanbanRows = this.swimlaneSorting(kanbanRows);\n            kanbanRows.forEach(function (row) {\n                row.count = _this.parent.kanbanData.filter(function (obj) {\n                    return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 &&\n                        obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                }).length;\n            });\n            if (kanbanRows.length === 0) {\n                kanbanRows.push({ keyField: '', textField: '' });\n            }\n        }\n        else {\n            kanbanRows.push({ keyField: '', textField: '' });\n        }\n        return kanbanRows;\n    };\n    LayoutRender.prototype.swimlaneSorting = function (rows) {\n        if (this.parent.swimlaneSettings.sortComparer) {\n            rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n        }\n        else {\n            rows.sort(function (a, b) { return a.textField.localeCompare(b.textField, undefined, { numeric: true }); });\n            if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n                rows.reverse();\n            }\n        }\n        return rows;\n    };\n    LayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString(), 'scope': 'col' }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    LayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    LayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n        if (!isNoU(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n            this.frozenRows(e);\n        }\n    };\n    LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n        var frozenKey = currentElem.getAttribute('data-key');\n        if (!isNoU(frozenKey)) {\n            this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n        }\n    };\n    LayoutRender.prototype.frozenRows = function (e) {\n        var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (isNoU(this.frozenSwimlaneRow)) {\n            this.frozenSwimlaneRow = createElement('div', { className: cls.FROZEN_SWIMLANE_ROW_CLASS });\n            var frozenRow = createElement('div', { className: cls.FROZEN_ROW_CLASS });\n            this.frozenSwimlaneRow.appendChild(frozenRow);\n            this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n            frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n            this.addFrozenSwimlaneDataKey(firstSwimlane);\n            setStyleAttribute(this.frozenSwimlaneRow, { height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n                width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n                top: formatUnit(header.getBoundingClientRect().height.toString())\n            });\n            setStyleAttribute(header, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n            setStyleAttribute(content, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n        }\n        else {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var curSwim = swimlaneRows[this.frozenOrder];\n            var prevSwim = swimlaneRows[this.frozenOrder - 1];\n            var nextSwim = swimlaneRows[this.frozenOrder + 1];\n            var curSwimHeight = void 0;\n            var prevSwimHeight = void 0;\n            var nextSwimHeight = void 0;\n            if (curSwim) {\n                curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n            }\n            if (prevSwim) {\n                prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n            }\n            if (nextSwim) {\n                nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n            }\n            var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n            var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n            if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(nextSwim);\n                }\n                ++this.frozenOrder;\n            }\n            else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(prevSwim);\n                }\n                --this.frozenOrder;\n            }\n        }\n        if (e && e.target.scrollTop === 0) {\n            this.removeFrozenRows();\n        }\n    };\n    LayoutRender.prototype.removeFrozenRows = function () {\n        remove(this.frozenSwimlaneRow);\n        this.frozenSwimlaneRow = null;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        setStyleAttribute(header, { position: '', top: '' });\n        setStyleAttribute(content, { position: '', top: '' });\n        this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };\n        content.scrollTop = 0;\n        this.frozenOrder = 0;\n    };\n    LayoutRender.prototype.onColumnScroll = function (e) {\n        var target = e.target;\n        if (target.offsetParent) {\n            var columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[\"\" + columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n    };\n    LayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean}\n     * @private\n     * @hidden\n     */\n    LayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    LayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    LayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n                _this.swimlaneRow.forEach(function (row, index) {\n                    _this.renderLimits(column, rowCells[index]);\n                    var rowCards = cardData.filter(function (card) {\n                        return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                    });\n                    var colorClass = _this.getValidationClass(column, rowCards.length);\n                    if (colorClass) {\n                        addClass([rowCells[index]], colorClass);\n                    }\n                });\n            }\n            else {\n                _this.renderLimits(column, headerCell);\n                var colorClass = _this.getValidationClass(column, cardData.length);\n                if (colorClass) {\n                    addClass(rowCells.concat(headerCell), colorClass);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    LayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_4 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_4(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    LayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[\"\" + key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[\"\" + key] ? firstData[\"\" + key].toLowerCase() : '';\n                second = secondData[\"\" + key] ? secondData[\"\" + key].toLowerCase() : '';\n            }\n            else {\n                first = firstData[\"\" + key];\n                second = secondData[\"\" + key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    LayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    LayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    LayoutRender.prototype.getSwimlaneCards = function () {\n        var _this = this;\n        var swimlaneData = {};\n        if (this.parent.swimlaneSettings.keyField) {\n            this.kanbanRows.forEach(function (row) {\n                return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n                    return !isNoU(obj[_this.parent.keyField]) &&\n                        _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 &&\n                        ((!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow) ?\n                            '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n                });\n            });\n        }\n        return swimlaneData;\n    };\n    LayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    LayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    LayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        // eslint-disable-next-line no-useless-escape\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            // eslint-disable-next-line no-useless-escape\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + cardLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        if (this.parent.swimlaneSettings.keyField) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n            swimlaneRows.forEach(function (swimlane) {\n                var swimlaneKey = swimlane.getAttribute('data-key');\n                var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n                if (itemCount && swimlaneKey) {\n                    var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n                    itemCount.innerHTML = '- ' + cards.length + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            });\n        }\n        this.refreshValidation();\n    };\n    LayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n            var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n            if (this.parent.element.querySelector(rowSelector)) {\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n            }\n            else {\n                var columnIndex = this.columnKeys.indexOf(key);\n                if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n                    var index_1 = this.kanbanRows.findIndex(function (rowData) { return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField]; });\n                    var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n                    var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                    if (swim[index_1]) {\n                        swimRow = swim[index_1];\n                    }\n                    this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n                    this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n                }\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n                [].slice.call(cardRow.children).forEach(function (cell) {\n                    var cardWrapper = createElement('div', { className: cls.CARD_WRAPPER_CLASS });\n                    cell.appendChild(cardWrapper);\n                    cardWrapper.appendChild(_this.renderEmptyCard());\n                });\n            }\n        }\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[\"\" + field_1] === data[\"\" + field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[\"\" + field_1] === data[\"\" + field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_1 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                addClass([cardElement_1], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_1, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_1);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    LayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        if (cardElement) {\n            this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n            var cardContainer = cardElement.parentElement;\n            remove(cardElement);\n            if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n                cardContainer.appendChild(this.renderEmptyCard());\n            }\n        }\n    };\n    LayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    LayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    LayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n        }\n    };\n    LayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n    };\n    LayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return LayoutRender;\n}(MobileLayout));\nexport { LayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, detach, debounce } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor, Predicate } from '@syncfusion/ej2-data';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar VirtualLayoutRender = /** @class */ (function (_super) {\n    __extends(VirtualLayoutRender, _super);\n    function VirtualLayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.parent = parent;\n        _this.kanbanRows = [];\n        _this.scrollStatus = {};\n        _this.offsets = {};\n        _this.tempOffsets = {};\n        _this.offsetKeys = [];\n        _this.columnKeys = [];\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.winResize = _this.windowResize.bind(_this);\n        if (_this.parent.enableVirtualization) {\n            _this.parent.on(events.dataReady, _this.initRender, _this);\n            _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        }\n        return _this;\n    }\n    VirtualLayoutRender.prototype.initRender = function () {\n        this.isSwimlane = !isNoU(this.parent.swimlaneSettings.keyField) &&\n            this.parent.swimlaneSettings.keyField.trim().length > 1 ? true : false;\n        this.query = this.parent.query instanceof Query ? this.parent.query : new Query();\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.cardHeight = this.cardHeightCalculate();\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        if (!this.isSwimlane) {\n            this.renderContent();\n            this.renderCards();\n        }\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    VirtualLayoutRender.prototype.cardHeightCalculate = function () {\n        var cardHeight;\n        if (this.parent.cardHeight === 'auto') {\n            cardHeight = 100 + 8; // 8 is the margin bottom value of the card.\n        }\n        else {\n            cardHeight = parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10) + 8;\n        }\n        return cardHeight;\n    };\n    VirtualLayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString() }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                var noOfCard = this_1.parent.dataModule.isRemote() ?\n                    this_1.parent.columnDataCount[column.keyField] : this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    VirtualLayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tBody = createElement('tbody');\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        for (var _i = 0, _a = this.kanbanRows; _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    VirtualLayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className, attrs: { 'aria-expanded': 'true' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'aria-expanded': 'true',\n                        'tabindex': '0', 'role': 'navigation' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' + (this.parent.dataModule.isRemote() ?\n                        this.parent.columnDataCount[column.keyField] : this.getColumnData(column.keyField).length) +\n                        '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n                if (this.parent.enableVirtualization) {\n                    var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n                    //'15' is reduced for optimal padding in the bottom and to avoid page scrollbar appear in the height auto case.\n                    if (this.parent.height === 'auto') {\n                        td.style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n                    }\n                    else {\n                        td.style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n                    }\n                }\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.windowResize = function () {\n        var cloumnsTDElem = this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS);\n        var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n        for (var j = 0; j < cloumnsTDElem.length; j++) {\n            if (this.parent.height === 'auto') {\n                cloumnsTDElem[j].style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n            }\n            else {\n                cloumnsTDElem[j].style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.refreshColumnData = function (draggedColumnKey, droppedColumnKey, requestType, crudKeyField) {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var isCRUD = (requestType === 'cardChanged' || requestType === 'cardCreated' || requestType === 'cardRemoved')\n            && !isNoU(crudKeyField);\n        cardRows.forEach(function (tr) {\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column) && (column.keyField === draggedColumnKey || column.keyField === droppedColumnKey)\n                    || isCRUD) {\n                    var cards_1 = 0;\n                    var blocks = [];\n                    var columnData = _this.getColumnCards()[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote() ?\n                        _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    var overallHeight = _this.cardHeight * currentColumnDataCount;\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_1; });\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseInt(columnWrapper.style.height.split('px')[0], 10) / _this.cardHeight);\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = columnWrapper.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                    var maxBlock = currentColumnDataCount % 2 === 0 ? currentColumnDataCount - 2 : currentColumnDataCount - 1;\n                    var viewInfo = _this.getInfoFromView(_this.scrollStatus[column.keyField]);\n                    var transformY = _this.getTranslateY(viewInfo);\n                    var cardVirtualElement = cardWrapper.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n                    cardVirtualElement.style.maxHeight = currentColumnDataCount * _this.cardHeight + 'px';\n                    _this.setPadding(transformY, cardVirtualElement, currentColumnDataCount);\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: _this.scrollStatus[column.keyField].currentScrollTop,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: _this.scrollStatus[column.keyField].scrollDirection,\n                        currentBlockIndex: _this.scrollStatus[column.keyField].currentBlockIndex,\n                        oldBlockIndex: _this.scrollStatus[column.keyField].oldBlockIndex,\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_3 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var cards_2 = 0;\n                    var currentScrollIndex = 0;\n                    var blocks = [];\n                    _this.offsets = {};\n                    _this.tempOffsets = {};\n                    var columnData = _this.columnData[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote()\n                        ? _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    dataCount += currentColumnDataCount;\n                    var overallHeight = (_this.cardHeight * currentColumnDataCount) + 7; //7 is difference between top space of the scroll element\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseFloat(columnWrapper.style.height.split('px')[0]) / _this.cardHeight);\n                    var currentColumnBlock = singleIndexCardCount > currentColumnDataCount ? currentColumnDataCount :\n                        Math.floor(currentColumnDataCount / singleIndexCardCount);\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_2; });\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight + 7;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    var cardVirtualWrapper_1 = createElement('div', {\n                        className: cls.CARD_VIRTUAL_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    cardWrapper.appendChild(cardVirtualWrapper_1);\n                    var maxBlock = currentColumnBlock % 2 === 0 ? currentColumnBlock : currentColumnBlock + 1;\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: null,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: null,\n                        currentBlockIndex: [1, 2],\n                        oldBlockIndex: [1, 2],\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper);\n                    if (currentColumnDataCount > 0) {\n                        var _loop_4 = function (i) {\n                            var cardText = columnData[i][_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(columnData[i]);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: columnData[i], element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardVirtualWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var i = currentScrollIndex; i < singleIndexCardCount * 2 && i < columnData.length; i++) {\n                            _loop_4(i);\n                        }\n                        cardVirtualWrapper_1.style.maxHeight = _this.cardHeight * currentColumnDataCount + 'px';\n                    }\n                    else {\n                        cardVirtualWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                    _this.setPadding(0, cardVirtualWrapper_1, currentColumnDataCount);\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_3(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    VirtualLayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: {\n                'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option'\n            }\n        });\n        cardElement.style.height = this.cardHeight - 8 + 'px'; // Since in the public card height calculation margin bottom is added, so it reduced here.\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    VirtualLayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noCard')\n        });\n        return emptyCard;\n    };\n    VirtualLayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    VirtualLayoutRender.prototype.getRows = function () {\n        var kanbanRows = [];\n        kanbanRows.push({ keyField: '', textField: '' });\n        return kanbanRows;\n    };\n    VirtualLayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString() }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    VirtualLayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    VirtualLayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n    };\n    VirtualLayoutRender.prototype.getOffset = function (block, viewInfo) {\n        return Math.min(viewInfo.offsets[block] | 0, viewInfo.offsets[viewInfo.maxBlock] | 0);\n    };\n    VirtualLayoutRender.prototype.getTranslateY = function (viewInfo) {\n        var block = (viewInfo.newBlockIndex[0] || 1) - 1;\n        var translate = this.getOffset(block, viewInfo);\n        var endTranslate = this.getOffset(viewInfo.newBlockIndex[viewInfo.newBlockIndex.length - 1], viewInfo);\n        var result = translate > viewInfo.currentScrollTop ?\n            this.getOffset(block - 1, viewInfo) : endTranslate < (viewInfo.currentScrollTop + viewInfo.columnHeight) ?\n            this.getOffset(block + 1, viewInfo) : translate;\n        return result;\n    };\n    VirtualLayoutRender.prototype.setPadding = function (paddingTop, scrollElem, dataCount, isScrolledToLast, direction) {\n        if (isScrolledToLast && direction === 'down') {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = '0px';\n        }\n        else {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = this.cardHeight * dataCount - paddingTop + \"px\";\n        }\n    };\n    VirtualLayoutRender.prototype.getData = function (keyField, column, take, skip) {\n        var query = this.query.clone();\n        var predicate = new Predicate(keyField, 'equal', column, true);\n        query.where(predicate);\n        query.take(take);\n        query.skip(skip);\n        query.addParams('KanbanVirtualScroll', 'KanbanVirtualScroll');\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            return def.promise;\n        }\n        return this.parent.dataModule.dataManager.executeQuery(query);\n    };\n    VirtualLayoutRender.prototype.eventPromise = function (args, query) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.updateData = def.resolve;\n        state.action = args;\n        return def;\n    };\n    VirtualLayoutRender.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    VirtualLayoutRender.prototype.dataManagerSuccess = function (e, type) {\n        var _this = this;\n        var resultData;\n        if (type) {\n            resultData = extend([], !isNoU(e.result.result) ?\n                e.result.result : e.result, null, true);\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                resultData = extend([], !isNoU(args.result.result) ?\n                    args.result.result : args.result, null, true);\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        return resultData;\n    };\n    VirtualLayoutRender.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    VirtualLayoutRender.prototype.onColScrollShowSkeleton = function (args) {\n        var target = args.target;\n        if (this.parent.element.querySelectorAll('.e-card-skeleton-wrapper').length > 0) {\n            return;\n        }\n        var key = target.parentElement.getAttribute('data-key');\n        var previousScrollTop = this.scrollStatus[key].previousScrollTop;\n        var parentElemHeight = target.parentElement.clientHeight;\n        if ((target.scrollTop - previousScrollTop) > parentElemHeight || (previousScrollTop - target.scrollTop) > parentElemHeight) {\n            this.showSkeleton(target, this.scrollStatus[key].singleIndexCardCount);\n        }\n    };\n    VirtualLayoutRender.prototype.showSkeleton = function (cardWrapper, skeletonCount) {\n        var cardVirtualSkeletonWrapper = createElement('div', {\n            className: 'e-card-virtual-skeleton-wrapper', attrs: { 'role': 'listbox' }\n        });\n        cardWrapper.parentElement.insertBefore(cardVirtualSkeletonWrapper, cardWrapper);\n        cardVirtualSkeletonWrapper.style.position = 'absolute';\n        cardVirtualSkeletonWrapper.style.zIndex = '10';\n        for (var j = 0; j < skeletonCount; j++) {\n            var skeletonWrapper = createElement('div', { className: 'e-card-skeleton-wrapper' });\n            var skeleton = createElement('span', { className: 'e-skeleton e-skeleton-text e-shimmer-wave' });\n            skeleton.style.height = this.cardHeight + 'px';\n            // Assumption fix, issue reproduce in rare cases only .\n            if (!isNoU(cardWrapper.querySelector('.e-card'))) {\n                skeleton.style.width = cardWrapper.querySelector('.e-card').getBoundingClientRect().width + 'px';\n            }\n            skeletonWrapper.appendChild(skeleton);\n            cardVirtualSkeletonWrapper.appendChild(skeletonWrapper);\n        }\n    };\n    VirtualLayoutRender.prototype.hideSkeleton = function (cardWrapper) {\n        setTimeout(function () {\n            var skeletonWrapper = cardWrapper.querySelectorAll('.e-card-virtual-skeleton-wrapper');\n            for (var i = 0; i < skeletonWrapper.length; i++) {\n                detach(skeletonWrapper[i]);\n            }\n        }, 50);\n    };\n    VirtualLayoutRender.prototype.onColumnScroll = function (e) {\n        var _this = this;\n        var target = e.target;\n        var currentScrolledHeight = target.scrollTop;\n        var columnKey;\n        if (target.offsetParent) {\n            columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n        if (this.parent.enableVirtualization) {\n            var cardWrapper_1 = target;\n            var dataCount = 0;\n            var columnData = this.getColumnCards()[columnKey];\n            var currentColumnDataCount = this.parent.dataModule.isRemote() ?\n                this.parent.columnDataCount[columnKey] : columnData.length;\n            dataCount += currentColumnDataCount;\n            var overallHeight = this.cardHeight * dataCount;\n            var removeIndex = [];\n            var addIndex = [];\n            this.checkScrollDirection(columnKey, currentScrolledHeight);\n            if (this.findScrollSpeed(target, columnKey) === 'fast' && currentScrolledHeight > overallHeight) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            var maxBlock = this.scrollStatus[columnKey].maxBlock;\n            var isLastBlockRendered = this.scrollStatus[columnKey].currentBlockIndex.indexOf(maxBlock) > -1;\n            var isDuplicateScroll = e.timeStamp - this.scrollStatus[columnKey].previousTimeStamps < 300;\n            if (isLastBlockRendered && !isNoU(this.scrollStatus[columnKey].previousTimeStamps) && isDuplicateScroll) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            this.scrollStatus[columnKey].previousTimeStamps = e.timeStamp;\n            var viewInfo_1 = this.getInfoFromView(this.scrollStatus[columnKey]);\n            removeIndex = viewInfo_1.currentBlockIndex.filter(function (val) {\n                return viewInfo_1.newBlockIndex.indexOf(val) === -1;\n            });\n            addIndex = viewInfo_1.newBlockIndex.filter(function (val) {\n                return viewInfo_1.currentBlockIndex.indexOf(val) === -1;\n            });\n            var isScrolledToLast = currentScrolledHeight + target.clientHeight >= overallHeight;\n            var transformY = isScrolledToLast ? overallHeight - (cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS).childElementCount * this.cardHeight)\n                : this.getTranslateY(viewInfo_1);\n            var cardVirtualElement_1 = cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            if (removeIndex.length > 0) {\n                var removeStartIndex = void 0;\n                var removeEndIndex = void 0;\n                if (removeIndex[0] === 1) {\n                    removeStartIndex = 0;\n                    removeEndIndex = (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount) - 1;\n                }\n                else {\n                    removeStartIndex = ((removeIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    removeEndIndex = removeStartIndex + (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount);\n                }\n                this.removeCardsOnScroll(cardVirtualElement_1, this.scrollStatus[columnKey].scrollDirection === 'down' ? true : false, removeStartIndex, removeEndIndex);\n            }\n            if (addIndex.length > 0) {\n                if (this.parent.dataModule.isRemote()) {\n                    var visibleStartIndex = ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    var resultData_1 = [];\n                    var dataManager = this.getData(this.parent.keyField, columnKey, (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length), visibleStartIndex);\n                    dataManager.then(function (e) {\n                        resultData_1 = _this.dataManagerSuccess(e);\n                        _this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, _this.scrollStatus[columnKey].scrollDirection === 'down' ? 0 : (resultData_1.length - 1), true, resultData_1, null);\n                    }).catch(function (e) { return _this.dataManagerFailure(e); });\n                }\n                else {\n                    var visibleStartIndex = this.scrollStatus[columnKey].scrollDirection === 'down' ? ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount)\n                            + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) - 1;\n                    var visibleLength = this.scrollStatus[columnKey].scrollDirection === 'down' ? visibleStartIndex + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, visibleStartIndex, false, columnData, visibleLength);\n                }\n            }\n            this.scrollStatus[columnKey].currentBlockIndex = this.scrollStatus[columnKey].newBlockIndex;\n            this.setPadding(transformY, cardVirtualElement_1, currentColumnDataCount, isScrolledToLast, this.scrollStatus[columnKey].scrollDirection);\n            viewInfo_1.currentBlockIndex = viewInfo_1.newBlockIndex;\n            this.parent.renderTemplates();\n            this.hideSkeleton(cardWrapper_1.parentElement);\n        }\n    };\n    VirtualLayoutRender.prototype.checkScrollDirection = function (columnKey, currentScrolledHeight) {\n        // Update the previous and current scroll top value\n        this.scrollStatus[columnKey].previousScrollTop = this.scrollStatus[columnKey].currentScrollTop;\n        this.scrollStatus[columnKey].currentScrollTop = currentScrolledHeight;\n        // Check the scroll direction\n        if (currentScrolledHeight > this.scrollStatus[columnKey].previousScrollTop) {\n            this.scrollStatus[columnKey].scrollDirection = 'down';\n        }\n        else {\n            this.scrollStatus[columnKey].scrollDirection = 'up';\n        }\n    };\n    VirtualLayoutRender.prototype.findScrollSpeed = function (target, columnKey) {\n        // Find the scroll speed\n        if (this.scrollStatus[columnKey].scrollDirection === 'down' &&\n            (target.scrollTop - this.scrollStatus[columnKey].previousScrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        else if (this.scrollStatus[columnKey].scrollDirection === 'up' &&\n            (this.scrollStatus[columnKey].previousScrollTop - target.scrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        return 'slow';\n    };\n    VirtualLayoutRender.prototype.removeCardsOnScroll = function (cardVirtualElement, isDown, removeStartIndex, removeEndIndex) {\n        for (var j = removeStartIndex; j < removeEndIndex; j++) {\n            var removableElem = isDown ? cardVirtualElement.firstChild\n                : cardVirtualElement.lastChild;\n            while (!isNoU(removableElem) && (removableElem.classList.contains(cls.DRAGGED_CARD_CLASS) ||\n                removableElem.classList.contains(cls.DRAGGED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.DROPPED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.CLONED_CARD_CLASS))) {\n                removableElem = isDown ? removableElem.nextSibling : removableElem.previousSibling;\n            }\n            if (!isNoU(removableElem)) {\n                detach(removableElem);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.scrollCardInsert = function (columnKey, cardVirtualElement, target, currentScrolledHeight, cardWrapper, startNumber, isRemote, resultData, visibleLength) {\n        var _this = this;\n        var conditonsScrollDownCase = isRemote ? resultData.length : visibleLength;\n        var conditonsScrollUpCase = isRemote ? 0 : visibleLength;\n        if (resultData.length > 0) {\n            var _loop_5 = function (j) {\n                if (!isNoU(resultData[j])) {\n                    var cardText = resultData[j][this_2.parent.cardSettings.headerField];\n                    var cardIndex = this_2.parent.actionModule.selectionArray.indexOf(cardText);\n                    var cardElement_1 = this_2.renderCard(resultData[j]);\n                    if (cardIndex !== -1) {\n                        cardElement_1.setAttribute('aria-selected', 'true');\n                        addClass([cardElement_1], cls.CARD_SELECTION_CLASS);\n                    }\n                    var args = { data: resultData[j], element: cardElement_1, cancel: false };\n                    this_2.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                        if (!cardArgs.cancel) {\n                            if (_this.scrollStatus[columnKey].scrollDirection === 'down') {\n                                cardVirtualElement.appendChild(cardElement_1);\n                            }\n                            else {\n                                cardVirtualElement.insertBefore(cardElement_1, cardVirtualElement.firstChild);\n                            }\n                            _this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                            addClass([cardElement_1], cls.DROPPABLE_CLASS);\n                        }\n                    });\n                }\n            };\n            var this_2 = this;\n            for (var j = startNumber; this.scrollStatus[columnKey].scrollDirection === 'down' ? (j < conditonsScrollDownCase) :\n                j >= conditonsScrollUpCase; this.scrollStatus[columnKey].scrollDirection === 'down' ? j++ : j--) {\n                _loop_5(j);\n            }\n            target.scrollTop = currentScrolledHeight;\n        }\n        else {\n            cardWrapper.appendChild(this.renderEmptyCard());\n        }\n    };\n    VirtualLayoutRender.prototype.ensureColumnNotEmpty = function (draggedColumnKey) {\n        var singleIndexCardCount = this.scrollStatus[draggedColumnKey].singleIndexCardCount;\n        var draggedColumnData = this.columnData[draggedColumnKey];\n        var draggedTdColummElement = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row) [data-key=\"' + draggedColumnKey + '\"]');\n        var wrapperELement = draggedTdColummElement.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n        var cardsList = wrapperELement.querySelectorAll('.' + cls.CARD_CLASS);\n        if (cardsList.length > 0) {\n            var lastCardDataId = cardsList[cardsList.length - 1].getAttribute('data-id');\n            var firstCardDataId = cardsList[0].getAttribute('data-id');\n            var lastCardIndex = void 0;\n            var firstCardIndex = void 0;\n            if (cardsList.length < singleIndexCardCount * 2) {\n                for (var i = 0; i < draggedColumnData.length; i++) {\n                    if (lastCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        lastCardIndex = i;\n                    }\n                    if (firstCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        firstCardIndex = i;\n                    }\n                }\n                var cardCount = cardsList.length;\n                for (var i = cardCount; i < singleIndexCardCount * 2; i++) {\n                    var isLast = lastCardIndex === draggedColumnData.length - 1 ? true : false;\n                    var nextCardIndex = lastCardIndex < draggedColumnData.length ? lastCardIndex + 1 : firstCardIndex - 1;\n                    if (nextCardIndex <= draggedColumnData.length) {\n                        var nextCardData = draggedColumnData[nextCardIndex];\n                        if (!isNoU(nextCardData)) {\n                            var nextCard = this.renderCard(nextCardData);\n                            this.triggerCardRendering(nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast);\n                            if (isLast) {\n                                firstCardIndex = nextCardIndex;\n                            }\n                            else {\n                                lastCardIndex = nextCardIndex;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.triggerCardRendering = function (nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast) {\n        var _this = this;\n        var cardText = draggedColumnData[nextCardIndex][this.parent.cardSettings.headerField];\n        var cardIndex = this.parent.actionModule.selectionArray.indexOf(cardText);\n        if (cardIndex !== -1) {\n            nextCard.setAttribute('aria-selected', 'true');\n            addClass([nextCard], cls.CARD_SELECTION_CLASS);\n        }\n        var args = { data: draggedColumnData[nextCardIndex], element: nextCard, cancel: false };\n        this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n            if (!cardArgs.cancel) {\n                if (!isLast) {\n                    wrapperELement.appendChild(nextCard);\n                }\n                else {\n                    wrapperELement.insertBefore(nextCard, wrapperELement.querySelectorAll('.' + cls.CARD_CLASS)[0]);\n                }\n                _this.parent.dragAndDropModule.wireDragEvents(nextCard);\n                addClass([nextCard], cls.DROPPABLE_CLASS);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.ensureBlocks = function (info) {\n        var index = info.newBlockIndex[info.block];\n        var maxPage = Math.ceil(info.totalColumnData / info.singleIndexCardCount);\n        var max = Math.max;\n        var indexes;\n        if (info.scrollDirection === 'down') {\n            indexes = index >= maxPage ? [max(index, 1), --index, --index].reverse() :\n                (index + 1 >= maxPage ? [max(index - 1, 1), index, ++index] :\n                    [max(index, 1), ++index, ++index]);\n        }\n        else {\n            indexes = index === maxPage ? [max(index - 2, 1), max(index - 1, 1), index] :\n                [max(index - 1, 1), index, index + 1];\n        }\n        // eslint-disable-next-line\n        return indexes.filter(function (indexRemoveZero) { return indexRemoveZero > 0; });\n    };\n    VirtualLayoutRender.prototype.getInfoFromView = function (scrollStatus) {\n        var isBlockAdded = false;\n        var infoType = scrollStatus;\n        infoType.page = this.getPageFromTop(scrollStatus);\n        infoType.newBlockIndex = this.getBlockIndexes(infoType.page);\n        var blocks = this.ensureBlocks(infoType);\n        if (infoType.newBlockIndex.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.newBlockIndex.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.newBlockIndex = isBlockAdded ? blocks : infoType.newBlockIndex;\n        return infoType;\n    };\n    VirtualLayoutRender.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualLayoutRender.prototype.getPageFromTop = function (info) {\n        var _this = this;\n        var total = info.totalColumnData;\n        var page = 0;\n        this.offsetKeys = Object.keys(info.offsets);\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = info.currentScrollTop <= info.offsets[parseInt(offset, 10)]\n                || (iOffset === total && info.currentScrollTop > info.offsets[parseInt(offset, 10)]);\n            if (border) {\n                var maxPage = Math.ceil(total / info.singleIndexCardCount);\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && info.currentScrollTop <= info.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = (iOffset + 1) > maxPage ? maxPage : iOffset + 1;\n                }\n                iOffset = iOffset > maxPage ? maxPage : iOffset;\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.getPage(iOffset, maxPage), maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualLayoutRender.prototype.getPage = function (block, maxPage) {\n        if (block + 1 > maxPage) {\n            return block % 2 === 0 ? block / 2 : (block - 1) / 2;\n        }\n        else {\n            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n        }\n    };\n    VirtualLayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean} - Check column is visible or not.\n     * @private\n     * @hidden\n     */\n    VirtualLayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    VirtualLayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            _this.renderLimits(column, headerCell);\n            var colorClass = _this.getValidationClass(column, cardData.length);\n            if (colorClass) {\n                addClass(rowCells.concat(headerCell), colorClass);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    VirtualLayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    VirtualLayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_6 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_6(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[key].toLowerCase();\n                second = secondData[key].toLowerCase();\n            }\n            else {\n                first = firstData[key];\n                second = secondData[key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    VirtualLayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    VirtualLayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    VirtualLayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    VirtualLayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    VirtualLayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var columnDataLength = _this.parent.dataModule.isRemote() ? _this.parent.columnDataCount[column.keyField]\n                        : _this.columnData[column.keyField].length;\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\"' + column.keyField + '\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\"' + key.trim() + '\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + columnDataLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        this.refreshValidation();\n    };\n    VirtualLayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCardBasedOnIndex = function (data, index, isDropped, requestType) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[field_1] === data[field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[field_1] === data[field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_2 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_2);\n                addClass([cardElement_2], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_2, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                var addCardCondition = isDropped ? true : cardWrapper_2.childNodes.length\n                    < _this.scrollStatus[key].singleIndexCardCount;\n                if (!cardArgs.cancel && addCardCondition || !isNoU(requestType)) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_2);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_2, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    VirtualLayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        if (cardElement) {\n            this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n            var cardContainer = cardElement.parentElement;\n            remove(cardElement);\n            if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n                cardContainer.appendChild(this.renderEmptyCard());\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        window.addEventListener('resize', this.winResize);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColScrollShowSkeleton, _this);\n            EventHandler.add(wrapper, 'scroll', debounce(_this.onColumnScroll, 200), _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    VirtualLayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        window.removeEventListener('resize', this.winResize);\n        this.winResize = null;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            EventHandler.remove(content, 'scroll', this.onColScrollShowSkeleton);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', debounce(_this.onColumnScroll, 200)); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    VirtualLayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            if (cards.length > 0) {\n                cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        if (cards.length > 0) {\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n        }\n    };\n    VirtualLayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return VirtualLayoutRender;\n}(MobileLayout));\nexport { VirtualLayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, NotifyPropertyChanges, Property, Complex, Collection, detach } from '@syncfusion/ej2-base';\nimport { addClass, classList, removeClass, compile, formatUnit, L10n, Browser, Event } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { Data } from './data';\nimport { SwimlaneSettings } from '../models/swimlane-settings';\nimport { CardSettings } from '../models/card-settings';\nimport { DialogSettings } from '../models/dialog-settings';\nimport { Columns } from '../models/columns';\nimport { StackedHeaders } from '../models/stacked-headers';\nimport { SortSettings } from '../models/sort-settings';\nimport { Action } from '../actions/action';\nimport { Crud } from '../actions/crud';\nimport { DragAndDrop } from '../actions/drag';\nimport { KanbanDialog } from '../actions/dialog';\nimport { Keyboard } from '../actions/keyboard';\nimport { KanbanTooltip } from '../actions/tooltip';\nimport { KanbanTouch } from '../actions/touch';\nimport { LayoutRender } from './layout-render';\nimport { VirtualLayoutRender } from './virtual-layout-render';\nimport * as events from '../base/constant';\nimport * as cls from './css-constant';\n/**\n * The Kanban board is an efficient way to visually depict various stages of a process using cards with transparent workflows.\n * The Kanban board has rich set of APIs, methods, and events used to enable or disable its features and customize them.\n * ```html\n * <div id=\"kanban\"></div>\n * ```\n * ```typescript\n * <script>\n *   var kanbanObj = new Kanban();\n *   kanbanObj.appendTo(\"#kanban\");\n * </script>\n * ```\n */\nvar Kanban = /** @class */ (function (_super) {\n    __extends(Kanban, _super);\n    /**\n     * Constructor for creating the Kanban widget\n     *\n     * @param {KanbanModel} options Accepts the kanban properties to render the Kanban board.\n     * @param {string | HTMLElement} element Accepts the DOM element reference as either selector or element to render the Kanban Board.\n     */\n    function Kanban(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.columnDataCount = {};\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.kanbanData = [];\n        if (!this.enablePersistence || !this.swimlaneToggleArray) {\n            this.swimlaneToggleArray = [];\n        }\n        this.activeCardData = { data: null, element: null };\n        var defaultLocale = {\n            items: 'items',\n            min: 'Min',\n            max: 'Max',\n            cardsSelected: 'Cards Selected',\n            addTitle: 'Add New Card',\n            editTitle: 'Edit Card Details',\n            deleteTitle: 'Delete Card',\n            deleteContent: 'Are you sure you want to delete this card?',\n            save: 'Save',\n            delete: 'Delete',\n            cancel: 'Cancel',\n            yes: 'Yes',\n            no: 'No',\n            close: 'Close',\n            noCard: 'No cards to display',\n            unassigned: 'Unassigned',\n            cards: 'Cards'\n        };\n        this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);\n        this.scrollPosition = { content: { left: 0, top: 0 }, column: {} };\n        this.isInitialRender = true;\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules.\n     * @private\n     */\n    Kanban.prototype.requiredModules = function () {\n        var modules = [];\n        return modules;\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance state.\n     * @private\n     */\n    Kanban.prototype.getPersistData = function () {\n        if (this.dataSource.length > 0) {\n            return this.addOnPersist(['columns', 'dataSource', 'swimlaneToggleArray']);\n        }\n        else {\n            return this.addOnPersist(['columns', 'kanbanData', 'swimlaneToggleArray']);\n        }\n    };\n    /**\n     * Core method to return the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Kanban.prototype.getModuleName = function () {\n        return 'kanban';\n    };\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.render = function () {\n        var addClasses = [cls.ROOT_CLASS];\n        var removeClasses = [];\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL_CLASS);\n        }\n        else {\n            removeClasses.push(cls.RTL_CLASS);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.cssClass) {\n            addClasses.push(this.cssClass);\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.element.style.width = formatUnit(this.width);\n        this.element.style.height = formatUnit(this.height);\n        this.element.setAttribute('role', 'application');\n        this.element.setAttribute('aria-label', 'Kanban Board');\n        createSpinner({ target: this.element });\n        this.showSpinner();\n        this.initializeModules();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {KanbanModel} newProp Gets the updated values\n     * @param {KanbanModel} oldProp Gets the previous values\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass);\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass);\n                    }\n                    break;\n                case 'enableRtl':\n                case 'locale':\n                    this.refresh();\n                    break;\n                case 'width':\n                    this.element.style.width = formatUnit(newProp.width);\n                    this.element.querySelector('.' + cls.HEADER_CLASS).firstElementChild.style.width = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'height':\n                    this.element.style.height = formatUnit(newProp.height);\n                    this.element.querySelector('.' + cls.CONTENT_CLASS).style.height = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'dataSource':\n                case 'query':\n                    if (this.dataModule) {\n                        this.dataModule.setState({ isDataChanged: false });\n                    }\n                    this.dataModule = new Data(this);\n                    break;\n                case 'columns':\n                case 'constraintType':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'swimlaneSettings':\n                    this.onSwimlaneSettingsPropertyChanged(newProp.swimlaneSettings, oldProp.swimlaneSettings);\n                    break;\n                case 'cardSettings':\n                    this.onCardSettingsPropertyChanged(newProp.cardSettings, oldProp.cardSettings);\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.wireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.wireDragEvent();\n                        }\n                    }\n                    else {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.unWireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.unWireDragEvent();\n                        }\n                    }\n                    break;\n                case 'enableTooltip':\n                    if (this.tooltipModule) {\n                        this.tooltipModule.destroy();\n                        this.tooltipModule = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.tooltipModule = new KanbanTooltip(this);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.refreshCards();\n                        }\n                        else {\n                            this.layoutModule.refreshCards();\n                        }\n                    }\n                    break;\n                case 'dialogSettings':\n                    if (newProp.dialogSettings) {\n                        this.dialogModule = new KanbanDialog(this);\n                    }\n                    break;\n                case 'allowKeyboard':\n                    if (this.keyboardModule) {\n                        this.keyboardModule.destroy();\n                        this.keyboardModule = null;\n                    }\n                    if (newProp.allowKeyboard) {\n                        this.keyboardModule = new Keyboard(this);\n                    }\n                    break;\n                case 'stackedHeaders':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshHeaders();\n                    }\n                    else {\n                        this.layoutModule.refreshHeaders();\n                    }\n                    break;\n                case 'sortSettings':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onSwimlaneSettingsPropertyChanged = function (newProp, _oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'keyField':\n                case 'textField':\n                case 'showEmptyRow':\n                case 'showItemCount':\n                case 'template':\n                case 'sortDirection':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'enableFrozenRows':\n                    if (this.layoutModule.frozenSwimlaneRow && !this.swimlaneSettings.enableFrozenRows) {\n                        this.layoutModule.removeFrozenRows();\n                    }\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onCardSettingsPropertyChanged = function (newProp, _oldProp) {\n        var cards = [];\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showHeader':\n                case 'headerField':\n                case 'contentField':\n                case 'template':\n                case 'tagsField':\n                case 'grabberField':\n                case 'footerCssField':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshCards();\n                    }\n                    else {\n                        this.layoutModule.refreshCards();\n                    }\n                    break;\n                case 'selectionType':\n                    cards = this.getSelectedCards();\n                    if (cards.length > 0) {\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.disableAttributeSelection(cards);\n                        }\n                        else {\n                            this.layoutModule.disableAttributeSelection(cards);\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    Kanban.prototype.initializeModules = function () {\n        this.dataModule = new Data(this);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule = new VirtualLayoutRender(this);\n        }\n        else {\n            this.layoutModule = new LayoutRender(this);\n        }\n        if (this.allowKeyboard) {\n            this.keyboardModule = new Keyboard(this);\n        }\n        this.actionModule = new Action(this);\n        this.crudModule = new Crud(this);\n        this.dragAndDropModule = new DragAndDrop(this);\n        this.dialogModule = new KanbanDialog(this);\n        if (this.enableTooltip) {\n            this.tooltipModule = new KanbanTooltip(this);\n        }\n        if (Browser.isDevice || Browser.isTouch) {\n            this.touchModule = new KanbanTouch(this);\n        }\n    };\n    Kanban.prototype.renderTemplates = function () {\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Kanban.prototype.resetTemplates = function (templates) {\n        if (this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    Kanban.prototype.destroyModules = function () {\n        if (this.layoutModule) {\n            this.layoutModule.destroy();\n            this.layoutModule = null;\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n            this.keyboardModule = null;\n        }\n        if (this.touchModule) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        if (this.tooltipModule) {\n            this.tooltipModule.destroy();\n            this.tooltipModule = null;\n        }\n        if (this.virtualLayoutModule) {\n            this.virtualLayoutModule.destroy();\n            this.virtualLayoutModule = null;\n        }\n        this.dialogModule = null;\n        this.actionModule = null;\n        this.crudModule = null;\n        this.dataModule = null;\n        this.dragAndDropModule = null;\n    };\n    Kanban.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template === 'function') {\n                    return compile(template);\n                }\n                else if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Returns the card details based on card ID from the board.\n     *\n     * @function getCardDetails\n     * @param {Element} target Accepts the card element to get the details.\n     * @returns {Object} Returns the card details based on given target.\n     */\n    Kanban.prototype.getCardDetails = function (target) {\n        var _this = this;\n        var isNumeric = typeof (this.kanbanData[0])[this.cardSettings.headerField] === 'number';\n        var targetId = isNumeric ? parseInt(target.getAttribute('data-id'), 10) : target.getAttribute('data-id');\n        var cardObj = this.kanbanData.filter(function (data) {\n            return data[_this.cardSettings.headerField] === targetId;\n        })[0];\n        return cardObj;\n    };\n    /**\n     * Returns the column data based on column key input.\n     *\n     * @function getColumnData\n     * @param {string | number} columnKey Accepts the column key to get the objects.\n     * @param {Object[]} dataSource Accepts the collection of objects to get the results based on given columnKey.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getColumnData = function (columnKey, dataSource) {\n        if (this.enableVirtualization) {\n            return this.virtualLayoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n        }\n        return this.layoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n    };\n    /**\n     * Returns the swimlane column data based on swimlane keyField input.\n     *\n     * @function getSwimlaneData\n     * @param {string} keyField Accepts the swimlane keyField to get the objects.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getSwimlaneData = function (keyField) {\n        return this.layoutModule.getSwimlaneCards()[\"\" + keyField] || [];\n    };\n    /**\n     * Gets the list of selected cards from the board.\n     *\n     * @function getSelectedCards\n     * @returns {HTMLElement[]} Returns the card elements based on selection.\n     */\n    Kanban.prototype.getSelectedCards = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS));\n    };\n    /**\n     * Allows you to show the spinner on Kanban at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using the showSpinner method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * To manually open the dialog.\n     *\n     * @function openDialog\n     * @param {CurrentAction} action Accepts the action for which the dialog needs to be opened such as either for new card creation or\n     *  editing of existing cards. The applicable action names are `Add` and `Edit`.\n     * @param {Object} data It can be card data.\n     * @returns {void}\n     */\n    Kanban.prototype.openDialog = function (action, data) {\n        this.dialogModule.openDialog(action, data);\n    };\n    /**\n     * To manually close the dialog.\n     *\n     * @function closeDialog\n     * @returns {void}\n     */\n    Kanban.prototype.closeDialog = function () {\n        this.dialogModule.closeDialog();\n    };\n    /**\n     * Adds the new card to the data source of Kanban and layout.\n     *\n     * @function addCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be added into Kanban.\n     * @param {number} index Accepts the index to insert the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.addCard = function (cardData, index) {\n        this.crudModule.addCard(cardData, index);\n    };\n    /**\n     * Updates the changes made in the card object by passing it as a parameter to the data source.\n     *\n     * @function updateCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be updated into Kanban.\n     * @param {number} index Accepts the index to update the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.updateCard = function (cardData, index) {\n        this.crudModule.updateCard(cardData, index);\n    };\n    /**\n     * Deletes the card based on the provided ID or card collection in the argument list.\n     *\n     * @function deleteCard\n     * @param {string | number | Object | Object[]} cardData Accepts the ID of the remove card in string or number type or\n     * Single card object or Collection of card objects to be removed from Kanban\n     * @returns {void}\n     */\n    Kanban.prototype.deleteCard = function (cardData) {\n        this.crudModule.deleteCard(cardData);\n    };\n    /**\n     * Add the column to Kanban board dynamically based on the provided column options and index in the argument list.\n     *\n     * @function addColumn\n     * @param {ColumnsModel} columnOptions Accepts the properties to new column that are going to be added in the board.\n     * @param {number} index Accepts the index of column to add the new column.\n     * @returns {void}\n     */\n    Kanban.prototype.addColumn = function (columnOptions, index) {\n        this.actionModule.addColumn(columnOptions, index);\n    };\n    /**\n     * Deletes the column based on the provided index value.\n     *\n     * @function deleteColumn\n     * @param {number} index Accepts the index of column to delete the existing column from Kanban board.\n     * @returns {void}\n     */\n    Kanban.prototype.deleteColumn = function (index) {\n        this.actionModule.deleteColumn(index);\n    };\n    /**\n     * Shows the column from hidden based on the provided key in the columns.\n     *\n     * @function showColumn\n     * @param {string | number} key Accepts the hidden column key name to be shown from the hidden state in board.\n     * @returns {void}\n     */\n    Kanban.prototype.showColumn = function (key) {\n        this.actionModule.showColumn(key);\n    };\n    /**\n     * Hides the column from Kanban board based on the provided key in the columns.\n     *\n     * @function hideColumn\n     * @param {string | number} key Accepts the visible column key name to be hidden from the board.\n     * @returns {void}\n     */\n    Kanban.prototype.hideColumn = function (key) {\n        this.actionModule.hideColumn(key);\n    };\n    /**\n     * Method to refresh the Kanban UI based on modified records.\n     *\n     * @function refreshUI\n     * @param {ActionEventArgs} args Accepts the added, changed or deleted data.\n     * @param {number} index Accepts the index of the changed items.\n     * @returns {void}\n     */\n    Kanban.prototype.refreshUI = function (args, index) {\n        index = index ? index : 0;\n        this.dataModule.refreshUI(args, index);\n    };\n    /**\n     * Method to refresh the column header.\n     *\n     * @method refreshHeader\n     * @returns {void}\n     */\n    Kanban.prototype.refreshHeader = function () {\n        this.resetTemplates(['columnTemplate']);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule.refreshHeaders();\n        }\n        else {\n            this.layoutModule.refreshHeaders();\n        }\n        this.renderTemplates();\n    };\n    /**\n     * Removes the control from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Kanban.prototype.destroy = function () {\n        this.destroyModules();\n        [].slice.call(this.element.childNodes).forEach(function (node) { detach(node); });\n        var removeClasses = [cls.ROOT_CLASS];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"cardHeight\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"query\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"keyField\", void 0);\n    __decorate([\n        Property('Column')\n    ], Kanban.prototype, \"constraintType\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"externalDropId\", void 0);\n    __decorate([\n        Collection([], Columns)\n    ], Kanban.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Collection([], StackedHeaders)\n    ], Kanban.prototype, \"stackedHeaders\", void 0);\n    __decorate([\n        Complex({}, SwimlaneSettings)\n    ], Kanban.prototype, \"swimlaneSettings\", void 0);\n    __decorate([\n        Complex({}, CardSettings)\n    ], Kanban.prototype, \"cardSettings\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Kanban.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, DialogSettings)\n    ], Kanban.prototype, \"dialogSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"showEmptyColumn\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardRendered\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogOpen\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogClose\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataSourceChanged\", void 0);\n    Kanban = __decorate([\n        NotifyPropertyChanges\n    ], Kanban);\n    return Kanban;\n}(Component));\nexport { Kanban };\n"],"names":["actionBegin","actionComplete","actionFailure","cardClick","cardDoubleClick","cardRendered","queryCellInfo","dataBinding","dataBound","dragStart","drag","dragStop","dialogOpen","dialogClose","contentReady","dataReady","dataSourceChanged","dataStateChange","Data","prototype","initDataManager","dataSource","query","this","dataManager","DataManager","Query","kanbanData","parent","isRemote","offline","undefined","url","columnKeyFields","columns","_i","_a","length","column","keyField","toString","split","_b","_c","innerColumns","push","trim","getQuery","parameter","clone","enableVirtualization","cardHeight","parseInt","formatUnit","take","height","Math","ceil","window","innerHeight","i","where","isNullOrUndefined","addParams","getData","def","eventPromise","requestType","isObservable","promise","executeQuery","setState","state","dataState","getStateEventArgument","adaptr","UrlAdaptor","dm","adaptor","processQuery","data","JSON","parse","extend","pvtData","args","index","editArgs_1","_this","dataArgs","Deferred","deff","isDataChanged","action","isPending","resolver","resolve","endEdit","cancelEdit","reject","trigger","events.dataSourceChanged","then","events.dataStateChange","addedRecords","forEach","changedRecords","changedRecord","cardObj","filter","cardSettings","headerField","deletedRecords","deletedRecord","findIndex","splice","catch","hideSpinner","getTable","fromTable","refreshDataManager","e","dataManagerSuccess","dataManagerFailure","type","offlineArgs","isDestroyed","updateKanbanData","virtualLayoutModule","refresh","events.dataBinding","notify","events.dataReady","processedData","events.dataBound","initload","layoutModule","renderTemplates","resultData","result","count","columnsKeyFields","Key","columnDataCount","Value","events.actionFailure","error","updateDataManager","updateType","params","isDropped","dataDropIndexKeyFieldValue","draggedKey","droppedKey","isMultipleDrag","actionArgs","showSpinner","cancel","events.actionComplete","syncDataSource","refreshUI","refreshColumnData","Array","isArray","modifyArrayData","insert","dataModule","remove","json","update","currentIndex","saveChanges","onLineData","position","columnData","getColumnCards","renderCardBasedOnIndex","removeCard","isSelectedCard","actionModule","SingleCardSelection","sortSettings","field","sortBy","direction","swimlaneSettings","kanbanRows","getRows","swimlaneData","getSwimlaneCards","events.contentReady","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","_super","__extends","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","SwimlaneSettings","ChildProperty","Property","apply","CardSettings","DialogSettings","Columns","StackedHeaders","SortSettings","ROOT_CLASS","RTL_CLASS","DEVICE_CLASS","ICON_CLASS","TEMPLATE_CLASS","SWIMLANE_CLASS","TABLE_CLASS","HEADER_CLASS","HEADER_TABLE_CLASS","HEADER_CELLS_CLASS","HEADER_WRAP_CLASS","HEADER_TITLE_CLASS","HEADER_TEXT_CLASS","HEADER_ICON_CLASS","STACKED_HEADER_ROW_CLASS","STACKED_HEADER_CELL_CLASS","CONTENT_CELLS_CLASS","CONTENT_CLASS","CONTENT_TABLE_CLASS","HEADER_ROW_TOGGLE_CLASS","HEADER_ROW_CLASS","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","SWIMLANE_ROW_EXPAND_CLASS","SWIMLANE_ROW_COLLAPSE_CLASS","CARD_ITEM_COUNT_CLASS","CARD_WRAPPER_CLASS","CARD_VIRTUAL_WRAPPER_CLASS","CARD_CLASS","DROPPABLE_CLASS","DRAG_CLASS","DROP_CLASS","DISABLED_CLASS","CARD_HEADER_CLASS","CARD_CONTENT_CLASS","CARD_HEADER_TEXT_CLASS","CARD_HEADER_TITLE_CLASS","CARD_TAGS_CLASS","CARD_TAG_CLASS","CARD_COLOR_CLASS","CARD_LABEL_CLASS","CARD_FOOTER_CLASS","EMPTY_CARD_CLASS","CARD_FOOTER_CSS_CLASS","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","COLLAPSE_HEADER_TEXT_CLASS","COLLAPSED_CLASS","DIALOG_CLASS","FORM_CLASS","ERROR_VALIDATION_CLASS","FIELD_CLASS","DRAGGED_CLONE_CLASS","CLONED_CARD_CLASS","DRAGGED_CARD_CLASS","DROPPED_CLONE_CLASS","DROPPING_CLASS","BORDER_CLASS","TOGGLE_VISIBLE_CLASS","MULTI_CARD_WRAPPER_CLASS","TARGET_MULTI_CLONE_CLASS","MULTI_COLUMN_KEY_CLASS","CARD_SELECTION_CLASS","TOOLTIP_TEXT_CLASS","SWIMLANE_HEADER_CLASS","TOOLBAR_MENU_ICON_CLASS","TOOLBAR_SWIMLANE_NAME_CLASS","SWIMLANE_OVERLAY_CLASS","SWIMLANE_CONTENT_CLASS","SWIMLANE_RESOURCE_CLASS","LIMITS_CLASS","MAX_COUNT_CLASS","MIN_COUNT_CLASS","MAX_COLOR_CLASS","MIN_COLOR_CLASS","CLOSE_CLASS","POPUP_CONTENT_CLASS","SHOW_ADD_BUTTON","SHOW_ADD_ICON","SHOW_ADD_FOCUS","FROZEN_SWIMLANE_ROW_CLASS","FROZEN_ROW_CLASS","Action","clickHandler","targetIcon","closest","classList","contains","cls.CARD_CLASS","allowKeyboard","keyboardModule","cardTabIndexRemove","cls.HEADER_ICON_CLASS","columnExpandCollapse","cls.CONTENT_ROW_CLASS","cls.SWIMLANE_ROW_CLASS","rowExpandCollapse","cls.SHOW_ADD_BUTTON","addButtonClick","cls.FROZEN_SWIMLANE_ROW_CLASS","swimlaneRows","slice","call","element","querySelectorAll","frozenSwimlaneRow","querySelector","cls.ICON_CLASS","frozenOrder","cls.SWIMLANE_ROW_COLLAPSE_CLASS","cls.SWIMLANE_ROW_EXPAND_CLASS","newData","id","map","obj","max","cls.CONTENT_CELLS_CLASS","getAttribute","card","nextElementSibling","cls.BORDER_CLASS","lastElementChild","firstElementChild","getCardDetails","previousElementSibling","openDialog","doubleClickHandler","selectedCard","cardClickObj","activeCardData","events.cardClick","event","clickArgs","cls.CARD_SELECTION_CLASS","removeClass","disableAttributeSelection","isCtrlKey","ctrlKey","isAdaptive","touchModule","mobilePopup","tabHold","cardSelection","shiftKey","updatePopupContent","cell","setAttribute","addRemoveTabIndex","cardDoubleClickObj","events.cardDoubleClick","doubleClickArgs","dialogModule","isFrozenElem","headerTarget","HTMLElement","currentSwimlaneHeader","isNoU","events.actionBegin","tgtRow","isCollapsed","tabIndex_1","rowIndex","cls.COLLAPSED_CLASS","swimlaneToggleArray","indexOf","addClass","colIndex","cls.HEADER_CELLS_CLASS","cellIndex","columnToggle","collapsed","hideColumnKeys","nextCol","cls.STACKED_HEADER_CELL_CLASS","targetRow","colSelector","cls.TABLE_CLASS","cls.COLUMN_EXPAND_CLASS","cls.COLUMN_COLLAPSE_CLASS","colGroup","col","style","width","getWidth","targetRow_1","_loop_1","row","targetCol","cls.COLLAPSE_HEADER_TEXT_CLASS","parentElement","collapasedText","getBoundingClientRect","columnToggleArray","setProperties","isExpanded","this_1","targetRow_2","_loop_2","value","text","showItemCount","headerText","appendChild","createElement","className","innerHTML","isCtrl","isShift","cards","getSelectedCards","selectionType","contentRow","lastSelectionRow","el","selectionArray","selectedCardsElement","selectedCardsData","curCards_1","start","end","allCards","curId","lastId","lastCard","curIndex","lastIndex","select","lastCardSelection","parentEle","addColumn","columnOptions","createInstance","deleteColumn","listKey","item","cls.HEADER_ROW_TOGGLE_CLASS","detach","cls.HEADER_CLASS","cls.CONTENT_CLASS","showColumn","hideColumn","Crud","addCard","cardData","addArgs","modifiedData_1","getColumnData","priorityOrder","editParms","getIndexFromData","cardElement","updateCard","updateArgs","modifiedData","deleteCard","deleteArgs","cardIndex","columnAllDatas","cardsId","num","allModifiedKeys","modifiedKey","sort","finalData","originalIndex","columnKey","keyData","swimlaneDatas","getSwimlaneData","j","modifiedKey_1","DragAndDrop","wireDragEvents","dragContainment","externalDropId","dragObj","instance","Draggable","enableTapHold","enableTailMode","cursorAt","top","left","dragArea","bind","enableAutoScroll","helper","dragHelper","hide","sender","offsetWidth","cloneWrapper","outerHTML","cloneElement","children","cls.CLONED_CARD_CLASS","targetCloneMulti","cls.TARGET_MULTI_CLONE_CLASS","targetClone","cls.DROPPED_CLONE_CLASS","styles","offsetHeight","dragArgs","selectedCards","borderElm","closestEle","cardDetails","add","events.dragStart","dragEventArgs","removeElement","intDestroy","draggedClone","localeObj","getConstant","EventHandler","document","body","keydownHandler","cls.DRAGGED_CLONE_CLASS","insertAdjacentElement","cls.DRAGGED_CARD_CLASS","cellDimension","borderElem","cls.ROOT_CLASS","targetEle","nodeName","firstChild","contentCell","lastChild","dropElement","externalDrop","kanbanObj","isExternalKanbanDrop","externalDropObj","calculateArgs","cursor","targetKey","getColumnKey","keys","isDrag","multiCloneRemove","insertClone","pageY","offsetTop","isTargetElementVisible","cls.CARD_WRAPPER_CLASS","cls.CARD_VIRTUAL_WRAPPER_CLASS","cls.DROPPING_CLASS","multiCloneCreate","cellDropping","columnKeys","tColumn","hasAttribute","updateDimension","tagName","toggleVisible","cls.TOGGLE_VISIBLE_CLASS","multiKeyTarget","cls.MULTI_COLUMN_KEY_CLASS","cls.DISABLED_CLASS","isExternalDrop","updateScrollPosition","events.drag","getElementsByClassName","targetElem","wrapperElem","bottom","targetRootElement","ej2_instances","cells","limitEle","cls.LIMITS_CLASS","cls.MULTI_CARD_WRAPPER_CLASS","borderStyle","keys_1","dragCell","transition","transitionColumns","allowTransition","allowedTransition","colKey","attrs","data-key","lineHeight","currentCardKey","targetCardKey","allowedKey","rows","dragRow","cls.DROP_CLASS","addDropping","allowDragAndDrop","dimensions","hasAddButton","code","removeAttribute","dragStopClear","dragStopPostClear","dataDropIndexKeyfieldValue","dropIndex","cardStatus_1","updateDroppedData","changeOrder","events.dragStop","draggedColumnKey","droppedColumnKey","crudModule","ensureColumnNotEmpty","removeEmptyTrElement","showEmptyRow","swimlaneRowList","cardRowData","removeProperty","clearInterval","navigationInterval","styleCard","externalCell","isDragging","cardStatus","crudObj","crudData","prev","swimlaneIndex","modifieddata","draggedCard","keyIndex_1","prevele","reverse","cloneTarget","list","cloneMulti","node","eventArgs","getPageCoordinates","pageX","tooltipModule","tooltipObj","close","changedTouches","setInterval","autoScroll","autoScrollValidation","dragEdges","right","viewBoundaries","pageYOffset","pageXOffset","parent_2","xScrollable","yBounds","xBounds","parent_1","yIsScrollable","scrollHeight","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","yScrollable","enableFrozenRows","scrollY","scrollTo","scrollX","unWireDragEvents","dragInstance","destroy","KanbanDialog","renderDialog","dialogObj","show","closeDialog","dialogModel","buttons","getDialogButtons","content","getDialogContent","cssClass","cls.DIALOG_CLASS","enableRtl","header","isModal","showCloseIcon","visible","beforeOpen","onBeforeDialogOpen","beforeClose","onBeforeDialogClose","Dialog","dialogSettings","model","applyFormValidation","title","container","form","cls.FORM_CLASS","onsubmit","template","destroyComponents","childNodes","templateId","dialogTemplate","templateParser","append","dialogWrapper","table","dialogFields_1","getDialogFields","tr","td","renderComponents","fields","contentField","flatButtonClass","dialogButtons","buttonModel","isPrimary","click","dialogButtonClick","deleteButton","dropDownOptions","controlObj","wrapper","cls.FIELD_CLASS","name","fieldValue","currentKeys","isColumnVisible","concat","DropDownList","NumericTextBox","TextBox","enabled","divElement","aria-label","appendTo","eventProp","storeElement","activeElement","maxHeight","events.dialogOpen","openArgs","formInputs","getFormElements","isInteracted","preventUpdate","formInputs_1","input","columnName","getColumnName","getValueFromElement","getIDType","events.dialogClose","closeArgs","rules","validationRules","formObj","FormValidator","customPlacement","inputElement","createTooltip","validationComplete","elem","inputName","display","status","dlgContent","inputClient","client","div","cls.ERROR_VALIDATION_CLASS","arrow","destroyToolTip","reset","activeCard","cloneNode","keyCode","getElementById","validate","updateIndex","enableHtmlSanitizer","SanitizeHtmlHelper","sanitize","validElements","elements_1","fieldSelector","control","attrName","isDropDowns","attrEle","checked","formelement_1","isReact","focus","Keyboard","keyActionHandler","ele","preventDefault","processUpDownArrow","processLeftRightArrow","processCardSelection","processEnter","cls.SHOW_ADD_FOCUS","selected","selection","removeSelection","multiSelection","attribute","headerIcon","swimlaneIcon","keyConfigs","firstCardSelection","upArrow","downArrow","rightArrow","leftArrow","multiSelectionEnter","multiSelectionSpace","multiSelectionByUpArrow","multiSelectionByDownArrow","shiftTab","enter","tab","delete","escape","space","tabIndex","KeyboardEvents","keyAction","eventName","KanbanTooltip","renderTooltip","Tooltip","mouseTrail","offsetY","showTipPointer","cls.TOOLTIP_TEXT_CLASS","beforeRender","onBeforeRender","onBeforeClose","isStringTemplate","tooltipContent","tooltipTemplate","dragAndDropModule","initializeCSPTemplate","innerText","resetTemplates","KanbanTouch","wireTouchEvents","touchObj","Touch","tapHold","tapHoldHandler","originalEvent","renderMobilePopup","closeIcon","buttonObj","mobilePopupWrapper","cls.POPUP_WRAPPER_CLASS","cls.CLOSE_CLASS","cls.POPUP_CONTENT_CLASS","cls.DEVICE_CLASS","Popup","targetType","hideAnimation","showAnimation","collision","X","Y","viewPortElement","zIndex","popupClose","Button","iconCss","closeClick","getPopupContent","popupContent","textContent","popupDestroy","unWireTouchEvents","MobileLayout","renderSwimlaneHeader","toolbarWrapper","cls.SWIMLANE_HEADER_CLASS","cls.TOOLBAR_MENU_ICON_CLASS","cls.TOOLBAR_SWIMLANE_NAME_CLASS","menuClick","renderSwimlaneTree","treeHeight","popupOverlay","cls.SWIMLANE_OVERLAY_CLASS","cls.SWIMLANE_CONTENT_CLASS","treeWrapper","cls.SWIMLANE_RESOURCE_CLASS","swimlaneTree","popupObj","treeViewObj","TreeView","nodeTemplate","nodeClicked","treeSwimlaneClick","drawNode","actionOnScroll","duration","treePopup","treeNodes","hidePopup","innerWidth","treeViewTemplate","nodeData","LayoutRender","initRender","on","scrollUiUpdate","renderHeader","renderContent","renderCards","renderValidation","wireEvents","isInitialRender","headerWrap","cls.SWIMLANE_CLASS","headerTable","cls.HEADER_TABLE_CLASS","tableHead","renderColGroup","tableBody","role","stackedHeaders","createStackedRow","cls.HEADER_ROW_CLASS","th_1","headerWrapper","noOfCard","isExpand","icon","dataObj","data-role","scope","allowToggle","cls.HEADER_WRAP_CLASS","headerTitle","cls.HEADER_TITLE_CLASS","templateArgs","minCount","maxCount","cls.TEMPLATE_CLASS","templateHeader","header_1","cls.HEADER_TEXT_CLASS","itemCount","cls.CARD_ITEM_COUNT_CLASS","tabindex","textField","events.queryCellInfo","columnArgs","contentWrap","contentTable","cls.CONTENT_TABLE_CLASS","tHead","thElem","tBody","isCollaspsed","swimlaneRow","initializeSwimlaneTree","renderSwimlaneRow","renderSingleContent","button","dragClass","allowDrag","cls.DRAG_CLASS","allowDrop","cls.DROPPABLE_CLASS","aria-describedby","showAddButton","cls.SHOW_ADD_ICON","swimlaneHeaderName","swimlaneTemplate","cardCount","aria-expanded","colspan","swimlaneHeader","iconDiv","cardRows","removeTrs","columnTransition","dataCount","columnWrapper","cardWrapper_1","_loop_3","cardText","renderCard","events.cardRendered","cardArgs","renderEmptyCard","showEmptyColumn","data-id","aria-selected","aria-roledescription","cardTemplate","cardHeader","tooltipClass","enableTooltip","cardContent","showHeader","cls.CARD_HEADER_CLASS","cardCaption","cls.CARD_HEADER_TEXT_CLASS","cls.CARD_HEADER_TITLE_CLASS","cls.CARD_CONTENT_CLASS","tagsField","cardTags","cls.CARD_TAGS_CLASS","tags_1","tag","cls.CARD_TAG_CLASS","cls.CARD_LABEL_CLASS","grabberField","cls.CARD_COLOR_CLASS","borderLeftColor","footerCssField","cardFields","cls.CARD_FOOTER_CLASS","cls.CARD_FOOTER_CSS_CLASS","cls.EMPTY_CARD_CLASS","isToggle","showUnassignedRow","arr","swimlaneSorting","sortComparer","a","localeCompare","numeric","sortDirection","cls.STACKED_HEADER_ROW_CLASS","rows_1","keyFields","h","colSpan","th","swimlaneToolbar","cardWrapper","onAdaptiveScroll","paddingValue","clientWidth","clientHeight","paddingLeft","paddingRight","onContentScroll","scrollPosition","frozenRows","addFrozenSwimlaneDataKey","currentElem","frozenKey","nextSwim","curSwimHeight","prevSwimHeight","nextSwimHeight","firstSwimlane","frozenRow","cls.FROZEN_ROW_CLASS","insertBefore","setStyleAttribute","curSwim","prevSwim","frozenSwimHeight","frozenRowsElement","removeFrozenRows","onColumnScroll","offsetParent","isVisible","renderLimits","limits","cls.MIN_COUNT_CLASS","cls.MAX_COUNT_CLASS","childElementCount","headerCell","rowCells","colorClass","keySelector","constraintType","rowCards","getValidationClass","cls.MAX_COLOR_CLASS","cls.MIN_COLOR_CLASS","refreshValidation","minClass","maxClass","columnValue","columnKeys_1","_loop_4","sortCategory","sortOrder","first","second","isNumeric","firstData","secondData","toLowerCase","documentClick","Element","refreshHeaders","child","refreshCards","wireDragEvent","isColumnTemplateRefreshed","countSelector","cardLength","keys_2","swimlane","swimlaneKey","Browser","isIE","scrollData","rowSelector","field_1","cardWrapper_2","emptyCard","cardElement_1","cardRow","index_1","rowData","swim","swimRow","colData","replace","cardContainer","cardKey","touchStartEvent","unWireEvents","unWireDragEvent","off","swimlaneToolBarEle","swimlaneContent","VirtualLayoutRender","isSwimlane","cardHeightCalculate","headerHeight","windowResize","cloumnsTDElem","crudKeyField","isCRUD","cards_1","currentColumnDataCount","overallHeight","blocks","singleIndexCardCount","offsets","tempOffsets","maxBlock","viewInfo","getInfoFromView","scrollStatus","transformY","getTranslateY","cardVirtualElement","setPadding","currentStatus","columnOverAllHeight","columnHeight","previousScrollTop","currentScrollTop","scrollDirection","currentBlockIndex","oldBlockIndex","totalColumnData","cards_2","parseFloat","currentColumnBlock","floor","cardVirtualWrapper_1","getOffset","block","min","newBlockIndex","translate","endTranslate","paddingTop","scrollElem","isScrolledToLast","paddingBottom","skip","predicate","Predicate","updateData","onColScrollShowSkeleton","parentElemHeight","showSkeleton","skeletonCount","cardVirtualSkeletonWrapper","skeletonWrapper","skeleton","hideSkeleton","setTimeout","viewInfo_1","addIndex","cardVirtualElement_1","removeEndIndex","resultData_1","visibleStartIndex","visibleLength","currentScrolledHeight","removeIndex","checkScrollDirection","findScrollSpeed","isLastBlockRendered","isDuplicateScroll","timeStamp","previousTimeStamps","val","removeStartIndex","removeCardsOnScroll","scrollCardInsert","isDown","removableElem","nextSibling","previousSibling","startNumber","conditonsScrollDownCase","conditonsScrollUpCase","this_2","_loop_5","draggedColumnData","wrapperELement","cardsList","lastCardDataId","firstCardDataId","lastCardIndex","firstCardIndex","nextCard","isLast","nextCardIndex","nextCardData","triggerCardRendering","ensureBlocks","info","maxPage","indexes","indexRemoveZero","newBlock","isBlockAdded","infoType","page","getPageFromTop","getBlockIndexes","total","offsetKeys","some","offset","iOffset","Number","border","getPage","_loop_6","columnDataLength","cardElement_2","addCardCondition","addEventListener","winResize","debounce","removeEventListener","Kanban","Component","preRender","isDevice","enablePersistence","L10n","getModuleName","items","cardsSelected","addTitle","editTitle","deleteTitle","deleteContent","save","yes","no","noCard","unassigned","locale","requiredModules","getPersistData","addOnPersist","render","addClasses","removeClasses","cls.RTL_CLASS","createSpinner","initializeModules","onPropertyChanged","newProp","oldProp","onSwimlaneSettingsPropertyChanged","onCardSettingsPropertyChanged","_oldProp","isTouch","renderReactTemplates","templates","clearTemplate","destroyModules","compile","targetId","refreshHeader","Collection","Complex","Event","NotifyPropertyChanges","options","needsID"],"mappings":"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"}