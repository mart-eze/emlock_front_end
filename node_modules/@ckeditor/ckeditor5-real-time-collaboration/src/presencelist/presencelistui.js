/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x2200(_0x6a1a22,_0xe946ae){const _0x2c8b6a=_0x2c8b();return _0x2200=function(_0x220016,_0x4caf4c){_0x220016=_0x220016-0xa6;let _0x19ae3a=_0x2c8b6a[_0x220016];return _0x19ae3a;},_0x2200(_0x6a1a22,_0xe946ae);}const _0xbcfffe=_0x2200;(function(_0x296d61,_0x4c4c9d){const _0x301d52=_0x2200,_0x5e69fb=_0x296d61();while(!![]){try{const _0xe7ae8=parseInt(_0x301d52(0x109))/0x1+parseInt(_0x301d52(0xee))/0x2*(parseInt(_0x301d52(0xab))/0x3)+parseInt(_0x301d52(0xbd))/0x4+-parseInt(_0x301d52(0xdc))/0x5+parseInt(_0x301d52(0xb2))/0x6+parseInt(_0x301d52(0xa9))/0x7+-parseInt(_0x301d52(0xae))/0x8*(parseInt(_0x301d52(0xc5))/0x9);if(_0xe7ae8===_0x4c4c9d)break;else _0x5e69fb['push'](_0x5e69fb['shift']());}catch(_0x3847f3){_0x5e69fb['push'](_0x5e69fb['shift']());}}}(_0x2c8b,0xc41b9));import{ContextPlugin as _0x265cb8}from'ckeditor5/src/core.js';import{CKEditorError as _0x15f713,Collection as _0x176dcc}from'ckeditor5/src/utils.js';import{clickOutsideHandler as _0x4ad5fb,BalloonPanelView as _0x922e31,BodyCollection as _0x13ce53}from'ckeditor5/src/ui.js';import{isElement as _0x25824e}from'es-toolkit/compat';import _0x28a2d5 from'../realtimecollaborativeediting/sessions.js';import _0x5adff4 from'./view/presencelistview.js';import _0xbaf1cb from'./view/presencecounterview.js';import _0x141f2e from'./view/presencedropdownlistview.js';function _0x2c8b(){const _0x4d4a78=['pin','indexOf','min','presenceList.displayMe','130802gOoSQQ','_bodyCollection','join','get','onClick','plugins','locale','focus','presencelist:hide','items','4145589BsFqfy','Shift+Tab','3IWTDpr','hasTooltip','presencelist:show','23200136vgTUYA','isExpanded','[contenteditable]','focusTracker','6941622CpbNyo','appendChild','config','execute','_handleUserAdd','PresenceListUI','map','detachFromDom','context','content','change:isFocused','4150088BwrvgH','_createView','allConnectedUsers','class','button','input','[tabindex]','offsetWidth','9QrKlZt','destroy','Tab','displayMe','Enter','init','isOfficialPlugin','define','from','keystrokes','isCollapsed',':not([disabled]):not([tabindex=\x22-1\x22])','_handleUserRemove','presenceList.container','offsetHeight','find','remove','view','presenceList','activeElement','checkIfScrollable','requires','number','1635225fGhOoW','using','unpin','inlineListView','isRendered','_allConnectedUsers','hideDropdown','tabIndex','ck\x20ck-presence-list__balloon','isVisible','Esc','body','length','presenceDropdownView','pluginName','attachToDom','isMe','balloonPanelView','2225662fRdlEn','sort','textarea','reverse','listenTo','filter','presencelist-collapseat-invalid-format','showDropdown','element','isPremiumPlugin','bind','render','isFocusable','presencelist-missing-container','counterView','add','currentDisplayedUsers','select','usersCount','presenceList.collapseAt','bindTo','querySelectorAll','set'];_0x2c8b=function(){return _0x4d4a78;};return _0x2c8b();}import _0xcf6c56 from'./view/presencedropdownlistitemview.js';import _0xbe0bb from'./view/presenceinlinelistitemview.js';const C={'collapseAt':0x6,'displayMe':!0x0};export default class r extends _0x265cb8{[_0xbcfffe(0xfe)];[_0xbcfffe(0xed)];[_0xbcfffe(0xd6)];[_0xbcfffe(0xe9)];[_0xbcfffe(0x10a)]=null;static get[_0xbcfffe(0xea)](){const _0x38dbdc=_0xbcfffe;return _0x38dbdc(0xb7);}static get[_0xbcfffe(0xcb)](){return!0x0;}static get[_0xbcfffe(0xf7)](){return!0x0;}constructor(_0x771883){const _0x3b1f8c=_0xbcfffe;super(_0x771883),this[_0x3b1f8c(0xba)][_0x3b1f8c(0xb4)][_0x3b1f8c(0xcc)](_0x3b1f8c(0xd7),C);const _0x2b0389=_0x771883[_0x3b1f8c(0xb4)][_0x3b1f8c(0x10c)](_0x3b1f8c(0x101));if(_0x3b1f8c(0xdb)!=typeof _0x2b0389)throw new _0x15f713(_0x3b1f8c(0xf4),this);if(_0x2b0389<0x1)throw new _0x15f713(_0x3b1f8c(0xf4),this);this[_0x3b1f8c(0xe1)]=this[_0x3b1f8c(0xba)][_0x3b1f8c(0x10e)][_0x3b1f8c(0x10c)](_0x28a2d5)[_0x3b1f8c(0xbf)],this[_0x3b1f8c(0x104)](_0x3b1f8c(0x100),0x0),this[_0x3b1f8c(0xfe)]=new _0x176dcc(),this[_0x3b1f8c(0xed)]=new _0x922e31(),this[_0x3b1f8c(0xed)][_0x3b1f8c(0xc0)]=_0x3b1f8c(0xe4),this[_0x3b1f8c(0xd6)]=this[_0x3b1f8c(0xbe)](),this[_0x3b1f8c(0xe9)]=void 0x0;}static get[_0xbcfffe(0xda)](){return[_0x28a2d5];}[_0xbcfffe(0xca)](){const _0x1342eb=_0xbcfffe;for(const _0x84f0ce of this[_0x1342eb(0xe1)])this[_0x1342eb(0xb6)](_0x84f0ce);this[_0x1342eb(0xf2)](this[_0x1342eb(0xe1)],_0x1342eb(0xfd),(_0x569aae,_0x56e97d)=>{const _0x493a3d=_0x1342eb;this[_0x493a3d(0xb6)](_0x56e97d);}),this[_0x1342eb(0xf2)](this[_0x1342eb(0xe1)],_0x1342eb(0xd5),(_0x427c1a,_0x219b37)=>{const _0x793695=_0x1342eb;this[_0x793695(0xd1)](_0x219b37);});}[_0xbcfffe(0xbe)](){const _0x27e9f3=_0xbcfffe,_0xd811c3=this[_0x27e9f3(0xba)],_0x427f0f=new _0x5adff4(this[_0x27e9f3(0xba)][_0x27e9f3(0x10f)],this[_0x27e9f3(0xba)][_0x27e9f3(0xb4)][_0x27e9f3(0x10c)](_0x27e9f3(0x101))),_0x4e2aa5=this[_0x27e9f3(0xed)];if(!_0x25824e(_0xd811c3[_0x27e9f3(0xb4)][_0x27e9f3(0x10c)](_0x27e9f3(0xd2))))throw new _0x15f713(_0x27e9f3(0xfb),this);return _0x427f0f[_0x27e9f3(0xfc)][_0x27e9f3(0xf8)](_0x27e9f3(0x100))['to'](this),_0x427f0f[_0x27e9f3(0xf8)](_0x27e9f3(0xcf))['to'](this,_0x27e9f3(0x100),_0x1c0994=>{const _0x1ec7f8=_0x27e9f3,{collapseAt:_0x265550}=_0xd811c3[_0x1ec7f8(0xb4)][_0x1ec7f8(0x10c)](_0x1ec7f8(0xd7)),_0x18314a=_0x1c0994>=_0x265550;if(_0x18314a&&!_0x427f0f[_0x1ec7f8(0xdf)][_0x1ec7f8(0xa8)][_0x1ec7f8(0xd4)](_0x36b17d=>_0x36b17d instanceof _0xbaf1cb)){const _0xf7c13a=this[_0x1ec7f8(0xba)][_0x1ec7f8(0xb4)][_0x1ec7f8(0x10c)](_0x1ec7f8(0x101))-0x1;this[_0x1ec7f8(0xfe)][_0x1ec7f8(0xe8)]==_0xf7c13a&&this[_0x1ec7f8(0xfe)][_0x1ec7f8(0xe8)]>0x1&&this[_0x1ec7f8(0xfe)][_0x1ec7f8(0xd5)](this[_0x1ec7f8(0xfe)][_0x1ec7f8(0xe8)]-0x1),_0x427f0f[_0x1ec7f8(0xdf)][_0x1ec7f8(0xa8)][_0x1ec7f8(0xfd)](_0x427f0f[_0x1ec7f8(0xfc)]);}return _0x18314a||this[_0x1ec7f8(0xe2)](),_0x18314a;}),_0x427f0f[_0x27e9f3(0xdf)][_0x27e9f3(0xa8)][_0x27e9f3(0x102)](this[_0x27e9f3(0xfe)])[_0x27e9f3(0xdd)](_0x502d06=>{const _0x38a9f6=_0x27e9f3,_0x3e014c=_0xd811c3[_0x38a9f6(0xb4)][_0x38a9f6(0x10c)](_0x38a9f6(0xd7)),_0x206111=new _0xbe0bb(_0xd811c3[_0x38a9f6(0x10f)],_0x502d06,!!_0x3e014c[_0x38a9f6(0x10d)]);return _0x206111[_0x38a9f6(0xf8)](_0x38a9f6(0xac))['to'](_0x427f0f,_0x38a9f6(0xcf),_0x191e83=>!_0x191e83),_0x206111[_0x38a9f6(0xf8)](_0x38a9f6(0xfa))['to'](_0x427f0f,_0x38a9f6(0xcf),_0x3fed9c=>!_0x3fed9c),_0x3e014c[_0x38a9f6(0x10d)]&&this[_0x38a9f6(0xf2)](_0x206111,_0x38a9f6(0xb5),()=>{const _0x57f94d=_0x38a9f6;this[_0x57f94d(0xd6)][_0x57f94d(0xcf)]||_0x3e014c[_0x57f94d(0x10d)](_0x502d06,_0x206111[_0x57f94d(0xf6)]);}),_0x206111;}),this[_0x27e9f3(0xf2)](_0x427f0f[_0x27e9f3(0xdf)],_0x27e9f3(0xad),()=>{const _0x78b160=_0x27e9f3;this[_0x78b160(0xd6)][_0x78b160(0xcf)]&&this[_0x78b160(0xf5)]();}),this[_0x27e9f3(0xf2)](_0x427f0f[_0x27e9f3(0xdf)],_0x27e9f3(0xa7),()=>{const _0x508b47=_0x27e9f3;this[_0x508b47(0xe9)]&&this[_0x508b47(0xe2)]();}),_0x427f0f[_0x27e9f3(0xdf)][_0x27e9f3(0xce)][_0x27e9f3(0x104)](_0x27e9f3(0xc9),(_0x5a0d81,_0x40add3)=>{const _0x28d0e9=_0x27e9f3;this[_0x28d0e9(0xd6)][_0x28d0e9(0xcf)]&&(this[_0x28d0e9(0xf5)](),_0x40add3());}),_0x427f0f[_0x27e9f3(0xf9)](),_0x4e2aa5[_0x27e9f3(0xf9)](),_0x4ad5fb({'emitter':_0x427f0f,'activator':()=>_0x4e2aa5[_0x27e9f3(0xe5)],'contextElements':[_0x4e2aa5[_0x27e9f3(0xf6)],_0x427f0f[_0x27e9f3(0xdf)][_0x27e9f3(0xf6)]],'callback':()=>this[_0x27e9f3(0xe2)]()}),_0xd811c3[_0x27e9f3(0xb4)][_0x27e9f3(0x10c)](_0x27e9f3(0xd2))[_0x27e9f3(0xb3)](_0x427f0f[_0x27e9f3(0xf6)]),this[_0x27e9f3(0x10a)]=new _0x13ce53(this[_0x27e9f3(0xba)][_0x27e9f3(0x10f)]),this[_0x27e9f3(0x10a)][_0x27e9f3(0xeb)](),this[_0x27e9f3(0x10a)][_0x27e9f3(0xfd)](this[_0x27e9f3(0xed)]),_0x427f0f;}[_0xbcfffe(0xb6)](_0x5ab34c){const _0x5972a8=_0xbcfffe;if(!this[_0x5972a8(0xba)][_0x5972a8(0xb4)][_0x5972a8(0x10c)](_0x5972a8(0x108))&&_0x5ab34c[_0x5972a8(0xec)])return;const _0x4d7b10=this[_0x5972a8(0xba)][_0x5972a8(0xb4)][_0x5972a8(0x10c)](_0x5972a8(0x101))-0x1;for(this[_0x5972a8(0x100)]++;this[_0x5972a8(0xfe)][_0x5972a8(0xe8)]>=_0x4d7b10-(this[_0x5972a8(0xd6)][_0x5972a8(0xcf)]?0x1:0x0)&&this[_0x5972a8(0xfe)][_0x5972a8(0xe8)]>0x1;)this[_0x5972a8(0xfe)][_0x5972a8(0xd5)](0x1);const _0x4e6ae8=_0x5ab34c[_0x5972a8(0xec)]?0x0:this[_0x5972a8(0xfe)][_0x5972a8(0xe8)];this[_0x5972a8(0xfe)][_0x5972a8(0xfd)](_0x5ab34c,_0x4e6ae8);}[_0xbcfffe(0xd1)](_0x15c0b6){const _0x52c92d=_0xbcfffe;this[_0x52c92d(0x100)]--;const {collapseAt:_0xb03099}=this[_0x52c92d(0xba)][_0x52c92d(0xb4)][_0x52c92d(0x10c)](_0x52c92d(0xd7)),_0x342cd2=this[_0x52c92d(0x100)]>=_0xb03099;if(this[_0x52c92d(0xfe)][_0x52c92d(0x10c)](_0x15c0b6['id']))this[_0x52c92d(0xfe)][_0x52c92d(0xd5)](_0x15c0b6['id']);else{if(_0x342cd2&&this[_0x52c92d(0xfe)][_0x52c92d(0xe8)]+0x1===_0xb03099-0x1)return;}if(this[_0x52c92d(0xfe)][_0x52c92d(0xe8)]+(_0x342cd2?0x1:0x0)<this[_0x52c92d(0x100)]){for(const _0x1bc5f3 of Array[_0x52c92d(0xcd)](this[_0x52c92d(0xe1)])[_0x52c92d(0xf1)]())if(!this[_0x52c92d(0xfe)][_0x52c92d(0x10c)](_0x1bc5f3['id'])&&(this[_0x52c92d(0xfe)][_0x52c92d(0xfd)](_0x1bc5f3,Math[_0x52c92d(0x107)](this[_0x52c92d(0xfe)][_0x52c92d(0xe8)]-(_0x342cd2?0x1:0x0),0x1)),this[_0x52c92d(0xfe)][_0x52c92d(0xe8)]+(_0x342cd2?0x1:0x0)===_0xb03099-0x1))return;}}[_0xbcfffe(0xf5)](){const _0x533169=_0xbcfffe;if(this[_0x533169(0xe9)])return;const _0x47f0b1=this[_0x533169(0xba)][_0x533169(0xb4)][_0x533169(0x10c)](_0x533169(0xd7));this[_0x533169(0xe9)]=new _0x141f2e(this[_0x533169(0xba)][_0x533169(0x10f)],!!_0x47f0b1[_0x533169(0x10d)]),this[_0x533169(0xd6)][_0x533169(0xdf)][_0x533169(0xaf)]=!0x0,this[_0x533169(0xf2)](this[_0x533169(0xe9)],_0x533169(0xa7),()=>{const _0x46c87d=_0x533169;this[_0x46c87d(0xe9)]&&this[_0x46c87d(0xe2)]();});const {listWrapperView:_0xa2291e}=this[_0x533169(0xe9)];_0xa2291e[_0x533169(0xa8)][_0x533169(0x102)](this[_0x533169(0xe1)])[_0x533169(0xdd)](_0x451d74=>{const _0x3de0a9=_0x533169;if(!_0x47f0b1[_0x3de0a9(0xc8)]&&_0x451d74[_0x3de0a9(0xec)])return null;const _0x3b66a9=new _0xcf6c56(this[_0x3de0a9(0xba)][_0x3de0a9(0x10f)],_0x451d74,!!_0x47f0b1[_0x3de0a9(0x10d)]);return _0x47f0b1[_0x3de0a9(0x10d)]&&this[_0x3de0a9(0xf2)](_0x3b66a9,_0x3de0a9(0xb5),()=>{const _0x512944=_0x3de0a9;_0x47f0b1[_0x512944(0x10d)](_0x451d74,_0x3b66a9[_0x512944(0xf6)]);}),_0x3b66a9;}),this[_0x533169(0xed)][_0x533169(0xbb)][_0x533169(0xfd)](this[_0x533169(0xe9)]),this[_0x533169(0xed)][_0x533169(0x105)]({'target':this[_0x533169(0xd6)][_0x533169(0xdf)][_0x533169(0xf6)]}),_0xa2291e[_0x533169(0xa6)](),_0xa2291e[_0x533169(0xd9)]();const _0x2e2c75=(_0x45e5f1,_0x1d1af7)=>{const _0xfeb87=_0x533169;this[_0xfeb87(0xe2)](),this[_0xfeb87(0xd6)][_0xfeb87(0xdf)][_0xfeb87(0xa6)](),_0x1d1af7();};_0xa2291e[_0x533169(0xce)][_0x533169(0x104)](_0x533169(0xe6),_0x2e2c75),_0xa2291e[_0x533169(0xce)][_0x533169(0x104)](_0x533169(0xaa),_0x2e2c75),_0xa2291e[_0x533169(0xce)][_0x533169(0x104)](_0x533169(0xc7),(_0x1e2a6e,_0x5d957a)=>{const _0x2bc1c4=_0x533169;!function(_0x4efbfc){const _0x578309=_0x2200,_0x93dad1=['a',_0x578309(0xc1),_0x578309(0xc2),_0x578309(0xff),_0x578309(0xf0),_0x578309(0xc3),_0x578309(0xb0)][_0x578309(0xb8)](_0x41d8fe=>_0x41d8fe+_0x578309(0xd0))[_0x578309(0x10b)](','),_0xff6227=[...document[_0x578309(0xe7)][_0x578309(0x103)](_0x93dad1)][_0x578309(0xf3)](_0x5f13b4=>_0x5f13b4===document[_0x578309(0xd8)]||_0x5f13b4[_0x578309(0xc4)]+_0x5f13b4[_0x578309(0xd3)]>0x0)[_0x578309(0xef)]((_0x35aff5,_0x4e950b)=>(_0x35aff5[_0x578309(0xe3)]||0x0)-(_0x4e950b[_0x578309(0xe3)]||0x0)),_0x305ac8=_0xff6227[_0x578309(0x106)](_0x4efbfc),_0x1988cd=_0xff6227[(_0x305ac8+0x1)%_0xff6227[_0x578309(0xe8)]];_0x1988cd&&_0x1988cd[_0x578309(0xa6)]();}(this[_0x2bc1c4(0xd6)][_0x2bc1c4(0xf6)]),this[_0x2bc1c4(0xe2)](),_0x5d957a();}),_0xa2291e[_0x533169(0xb1)][_0x533169(0xfd)](this[_0x533169(0xd6)][_0x533169(0xf6)]),_0xa2291e[_0x533169(0xb1)]['on'](_0x533169(0xbc),(_0x39385f,_0x192571,_0x3a5e5a)=>{const _0x25ab0b=_0x533169;_0x3a5e5a||this[_0x25ab0b(0xe2)]();});}[_0xbcfffe(0xe2)](){const _0x359850=_0xbcfffe;this[_0x359850(0xe9)]&&(this[_0x359850(0xd6)][_0x359850(0xdf)][_0x359850(0xaf)]=!0x1,this[_0x359850(0xed)][_0x359850(0xde)](),this[_0x359850(0xed)][_0x359850(0xbb)][_0x359850(0xd5)](this[_0x359850(0xe9)]),this[_0x359850(0xe9)][_0x359850(0xc6)](),this[_0x359850(0xe9)]=void 0x0);}[_0xbcfffe(0xc6)](){const _0x4ce60b=_0xbcfffe;super[_0x4ce60b(0xc6)](),this[_0x4ce60b(0xd6)]&&this[_0x4ce60b(0xd6)][_0x4ce60b(0xe0)]&&this[_0x4ce60b(0xd6)][_0x4ce60b(0xc6)](),this[_0x4ce60b(0x10a)]&&(this[_0x4ce60b(0x10a)][_0x4ce60b(0xb9)](),this[_0x4ce60b(0x10a)][_0x4ce60b(0xc6)](),this[_0x4ce60b(0x10a)]=null);}}