/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x4f6f(_0x42c756,_0x55ab5c){const _0x48e0d5=_0x48e0();return _0x4f6f=function(_0x4f6f41,_0x1eabf8){_0x4f6f41=_0x4f6f41-0x1e7;let _0x4b6aaf=_0x48e0d5[_0x4f6f41];return _0x4b6aaf;},_0x4f6f(_0x42c756,_0x55ab5c);}const _0xd9205=_0x4f6f;(function(_0x3eea40,_0x3d1a34){const _0x567a4b=_0x4f6f,_0x28d3d1=_0x3eea40();while(!![]){try{const _0x2d8e46=-parseInt(_0x567a4b(0x207))/0x1+parseInt(_0x567a4b(0x255))/0x2*(parseInt(_0x567a4b(0x241))/0x3)+parseInt(_0x567a4b(0x23e))/0x4+-parseInt(_0x567a4b(0x223))/0x5*(-parseInt(_0x567a4b(0x1e8))/0x6)+-parseInt(_0x567a4b(0x225))/0x7*(parseInt(_0x567a4b(0x213))/0x8)+parseInt(_0x567a4b(0x233))/0x9*(parseInt(_0x567a4b(0x239))/0xa)+-parseInt(_0x567a4b(0x231))/0xb;if(_0x2d8e46===_0x3d1a34)break;else _0x28d3d1['push'](_0x28d3d1['shift']());}catch(_0x4aeb6d){_0x28d3d1['push'](_0x28d3d1['shift']());}}}(_0x48e0,0xda326));import{Plugin as _0x4978b5}from'ckeditor5/src/core.js';import{version as _0x155707}from'ckeditor5/src/utils.js';import{Users as _0x4d36cd}from'ckeditor5-collaboration/src/collaboration-core.js';function _0x48e0(){const _0x4aeec8=['updateRevisions','serverHistory','_revisionDataBuilder','_getLatestVersion','affectsData','init','marker','adapter','size','reconnect','listenTo','_isConnected','_createCurrentRevision','has','connection','destroy','RevisionHistory','214746MBUEte','createdAt','requires','type','_offset','reInit','collaboration.channelId','_revisions','then','catch','revisionsUpdated','isPremiumPlugin','563376oVkXiH','get','length','_getLatestVersionFromServerOperations','authorsIds','connect','code','_startingVersion','max','isOfficialPlugin','remove','sendBufferedUpdates','isConnected','_revisionTracker','fromVersion','getOperations','20dpEQef','editor','91pBSiUZ','isBundleUploaded','cloudServices.bundleVersion','_isPendingUpdate','isEmptyCurrent','buildRevisionData','setSource','addToReconnectionStack','change:_isConnected','cloud-services-internal-error:\x20Revision\x20History\x20Service\x20is\x20not\x20connected.','getRevision','wrongRequestId','18384267NoKQVZ','addRevisionData','19881UdmuhC','getUser','_bufferUpdate','getRevisions','addUser','state','5900woIvQZ','startsWith','sessionId','_update','repository','3101900ZOqrQN','_waitForServiceReady','_handleRevisionsUpdate','4019190fCfwLj','pluginName','CONNECTED','creatorId','setRevisionData','_handleReconnectionError','authors','map','reverse','_fixRevision','change:_isPendingUpdate','diffData','_oldOffset','toVersion','once','bind','off','cloud-services-internal-error:\x20Request\x20timeout.','getMany','message','2dmDYmb','_bufferedUpdates','_revisionHistoryService','keys','400','cloud-services-internal-error:\x20Not\x20connected.','_fetchMissingUsers','RevisionHistoryService','415122BIgTLo','currentRevision','_preventResendingRevisionData','RevisionTracker','plugins','from','data','_lastRequestId','add','connected','config','baseVersion','isEnabled','CloudServicesRevisionHistoryAdapter'];_0x48e0=function(){return _0x4aeec8;};return _0x48e0();}import _0x25856b from'../realtimecollaborativeediting/realtimecollaborationclient.js';import _0x7c2d9a from'../realtimecollaborativeediting/websocketgateway.js';import _0x4c43da from'../realtimecollaborativeediting/sessions.js';import{EditorService as _0x56650f,RevisionHistoryService as _0x46c7f8,User as _0x45da1d,WEB_SOCKET_GATEWAY_STATES as _0xacc11b}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';class u extends _0x4978b5{static [_0xd9205(0x1e7)]=/* #__PURE__ -- @preserve */
((()=>_0x46c7f8)());[_0xd9205(0x1ef)];[_0xd9205(0x220)];[_0xd9205(0x257)];[_0xd9205(0x24d)];static get[_0xd9205(0x209)](){const _0x216bea=_0xd9205;return[_0x7c2d9a,_0x25856b,_0x216bea(0x206),_0x4c43da,_0x4d36cd];}static get[_0xd9205(0x242)](){const _0x57f954=_0xd9205;return _0x57f954(0x1f5);}static get[_0xd9205(0x21c)](){return!0x0;}static get[_0xd9205(0x212)](){return!0x0;}constructor(_0x2d0b1a){const _0x34b1d6=_0xd9205;super(_0x2d0b1a);const _0x537455=this[_0x34b1d6(0x224)][_0x34b1d6(0x1f2)][_0x34b1d6(0x214)](_0x34b1d6(0x20d));this[_0x34b1d6(0x1ef)]=null,this[_0x34b1d6(0x220)]=this[_0x34b1d6(0x224)][_0x34b1d6(0x1ec)][_0x34b1d6(0x214)](_0x34b1d6(0x1eb)),this[_0x34b1d6(0x257)]=new u[(_0x34b1d6(0x1e7))](_0x537455);}async[_0xd9205(0x1fb)](){const _0x5e6062=_0xd9205,_0x3eaf7c=this[_0x5e6062(0x224)][_0x5e6062(0x1ec)][_0x5e6062(0x214)](_0x25856b),_0x177f1c=_0x3eaf7c[_0x5e6062(0x1f7)],_0x1fd9c5=this[_0x5e6062(0x224)][_0x5e6062(0x1ec)][_0x5e6062(0x214)](_0x7c2d9a);this[_0x5e6062(0x220)][_0x5e6062(0x22b)]({'history':_0x177f1c,'getLatestVersion':()=>this[_0x5e6062(0x1f9)](),'getCurrentRevisionId':()=>_0x3eaf7c[_0x5e6062(0x23b)]});const _0x431954=this[_0x5e6062(0x224)][_0x5e6062(0x1f2)][_0x5e6062(0x214)](_0x5e6062(0x227))||_0x155707,_0x2b8766=await _0x56650f[_0x5e6062(0x226)](_0x1fd9c5[_0x5e6062(0x204)],_0x431954);this[_0x5e6062(0x224)][_0x5e6062(0x1ec)][_0x5e6062(0x214)](_0x5e6062(0x206))[_0x5e6062(0x1fd)]={'getRevision':async({revisionId:_0x4867d6})=>(await this[_0x5e6062(0x23f)](),await this[_0x5e6062(0x257)][_0x5e6062(0x22f)](_0x4867d6)),'updateRevisions':async _0x216587=>{const _0x5d7e29=_0x5e6062;await this[_0x5d7e29(0x23f)]();const _0x47bd9e=this[_0x5d7e29(0x220)][_0x5d7e29(0x1e9)];if(_0x2b8766&&0x1===_0x216587[_0x5d7e29(0x215)]&&_0x216587[0x0]['id']===_0x47bd9e['id'])return _0x216587;for(const _0x420749 of _0x216587)_0x420749['id']===_0x47bd9e['id']&&(_0x420749[_0x5d7e29(0x229)]=_0x420749[_0x5d7e29(0x221)]===_0x420749[_0x5d7e29(0x24e)]);return this[_0x5d7e29(0x257)][_0x5d7e29(0x1f6)](_0x216587,this[_0x5d7e29(0x1ef)])[_0x5d7e29(0x20f)](_0x5548c=>(this[_0x5d7e29(0x1ef)]=_0x5548c,_0x216587))[_0x5d7e29(0x210)](_0xcf7171=>{const _0x472922=_0x5d7e29;if(st(_0xcf7171)||_0x472922(0x259)===_0xcf7171[_0x472922(0x219)]&&void 0x0!==_0xcf7171[_0x472922(0x1ee)][_0x472922(0x230)]){for(const _0x18fe7a of _0x216587){!this[_0x472922(0x220)][_0x472922(0x23d)][_0x472922(0x22f)](_0x18fe7a['id'])||this[_0x472922(0x220)][_0x472922(0x235)](_0x18fe7a['id'],_0x18fe7a,!0x1);}if(st(_0xcf7171))throw _0xcf7171;return _0x216587;}throw _0xcf7171;});}},this[_0x5e6062(0x200)](this[_0x5e6062(0x257)],_0x5e6062(0x211),(_0x521afa,{revisionsData:_0x16f30b,requestId:_0x19902a})=>{const _0x150e0f=_0x5e6062;Math[_0x150e0f(0x21b)](..._0x16f30b[_0x150e0f(0x248)](_0x25c947=>_0x25c947[_0x150e0f(0x24e)]))>this[_0x150e0f(0x216)]()-0x1?this[_0x150e0f(0x1f9)]()[_0x150e0f(0x20f)](()=>{const _0x4acb1f=_0x150e0f;this[_0x4acb1f(0x240)](_0x16f30b,_0x19902a);}):this[_0x150e0f(0x240)](_0x16f30b,_0x19902a);});const {revisions:_0x31c9ae,requestId:_0x2401aa}=await this[_0x5e6062(0x257)][_0x5e6062(0x218)](_0x1fd9c5[_0x5e6062(0x204)]);_0x1fd9c5[_0x5e6062(0x22c)](this),this[_0x5e6062(0x1ef)]=_0x2401aa,await this[_0x5e6062(0x25b)](_0x31c9ae);for(const _0x22088f of _0x31c9ae)this[_0x5e6062(0x220)][_0x5e6062(0x232)](_0x22088f);this[_0x5e6062(0x200)](_0x3eaf7c,_0x5e6062(0x22d),(_0x5bda6d,_0x5a1fa0,_0x3bbf10)=>{const _0x12f31d=_0x5e6062;_0x3bbf10&&(this[_0x12f31d(0x24d)]=_0x3eaf7c[_0x12f31d(0x20b)],_0x5bda6d[_0x12f31d(0x251)]());}),this[_0x5e6062(0x220)][_0x5e6062(0x250)](_0x5e6062(0x1f4))['to'](_0x1fd9c5,_0x5e6062(0x238),_0x2cd338=>_0x2cd338===_0xacc11b[_0x5e6062(0x243)]);}async[_0xd9205(0x1ff)](){const _0x1fcb8a=_0xd9205,_0xf29880=this[_0x1fcb8a(0x224)][_0x1fcb8a(0x1ec)][_0x1fcb8a(0x214)](_0x7c2d9a),_0x3d3189=this[_0x1fcb8a(0x224)][_0x1fcb8a(0x1ec)][_0x1fcb8a(0x214)](_0x25856b),_0xe054c6=async()=>{const _0x1a2325=_0x1fcb8a,_0x330475=this[_0x1a2325(0x220)][_0x1a2325(0x1e9)],_0x3de45c=_0x330475['id'],_0x3cfb79=_0x3de45c!==_0x3d3189[_0x1a2325(0x23b)];if(_0x3cfb79){const _0x2bbe2b=_0x3d3189[_0x1a2325(0x20b)]-this[_0x1a2325(0x24d)],_0x1b891d=this[_0x1a2325(0x216)]();this[_0x1a2325(0x220)][_0x1a2325(0x1f8)][_0x1a2325(0x20c)]();if(_0x330475[_0x1a2325(0x24e)]+_0x2bbe2b!==_0x1b891d){const _0x205b48=_0x330475[_0x1a2325(0x221)]+_0x2bbe2b,_0x3b1571=this[_0x1a2325(0x224)][_0x1a2325(0x1ec)][_0x1a2325(0x214)](_0x4d36cd),_0x1421cd=this[_0x1a2325(0x220)][_0x1a2325(0x22a)]({'revision':_0x330475,'from':_0x205b48,'to':_0x1b891d});_0x1421cd['id']=_0x330475['id'];const _0x1f3b03=_0x1421cd[_0x1a2325(0x217)][_0x1a2325(0x248)](_0x4b8e1e=>_0x3b1571[_0x1a2325(0x234)](_0x4b8e1e));_0x330475[_0x1a2325(0x23c)]({..._0x1421cd,'authors':_0x1f3b03},!0x0),this[_0x1a2325(0x220)][_0x1a2325(0x235)](_0x330475['id'],_0x1421cd,!0x0);}this[_0x1a2325(0x220)][_0x1a2325(0x21a)]=_0x1b891d,(_0x330475[_0x1a2325(0x24e)]===_0x330475[_0x1a2325(0x221)]&&!this[_0x1a2325(0x220)][_0x1a2325(0x256)][_0x1a2325(0x203)](_0x3de45c)&&this[_0x1a2325(0x220)][_0x1a2325(0x23d)][_0x1a2325(0x20e)][_0x1a2325(0x21d)](_0x3de45c),this[_0x1a2325(0x220)][_0x1a2325(0x202)](_0x1b891d));}const {revisions:_0x244537,requestId:_0x31b3b9}=await this[_0x1a2325(0x257)][_0x1a2325(0x1ff)](_0xf29880[_0x1a2325(0x204)],this[_0x1a2325(0x1ef)]);_0x3cfb79&&_0x244537[_0x1a2325(0x215)]>0x0?_0x3d3189[_0x1a2325(0x246)]():(await this[_0x1a2325(0x25b)](_0x244537),this[_0x1a2325(0x240)](_0x244537,_0x31b3b9),this[_0x1a2325(0x220)][_0x1a2325(0x21e)]());};return _0x3d3189[_0x1fcb8a(0x201)]?_0xe054c6():new Promise((_0x59d2ae,_0x536498)=>{const _0x4b52e1=_0x1fcb8a;_0x3d3189[_0x4b52e1(0x24f)](_0x4b52e1(0x22d),()=>{const _0x30eb1e=_0x4b52e1;_0xe054c6()[_0x30eb1e(0x20f)](_0x59d2ae)[_0x30eb1e(0x210)](_0x536498);});});}[_0xd9205(0x205)](){const _0x41c044=_0xd9205;super[_0x41c044(0x205)]();}async[_0xd9205(0x23f)](){const _0x303559=_0xd9205;this[_0x303559(0x257)][_0x303559(0x21f)]||await new Promise(_0x33349f=>{const _0x333eac=_0x303559;this[_0x333eac(0x200)](this[_0x333eac(0x257)],_0x333eac(0x1f1),_0x31453c=>{const _0x1480eb=_0x333eac;_0x31453c[_0x1480eb(0x251)](),_0x33349f();});});}[_0xd9205(0x216)](){const _0x24e6f8=_0xd9205,_0x3a5544=this[_0x24e6f8(0x224)][_0x24e6f8(0x1ec)][_0x24e6f8(0x214)](_0x25856b)[_0x24e6f8(0x1f7)][_0x24e6f8(0x222)]()[_0x24e6f8(0x249)]();for(const _0x2c00ba of _0x3a5544)if(_0x24e6f8(0x1fc)!==_0x2c00ba[_0x24e6f8(0x20a)]||_0x2c00ba[_0x24e6f8(0x1fa)])return _0x2c00ba[_0x24e6f8(0x1f3)]+0x1;}[_0xd9205(0x1f9)](){const _0x40d3b4=_0xd9205,_0x4b7ac3=this[_0x40d3b4(0x224)][_0x40d3b4(0x1ec)][_0x40d3b4(0x214)](_0x25856b);return new Promise(_0x16f70e=>{const _0x3d0099=_0x40d3b4;_0x4b7ac3[_0x3d0099(0x228)]?_0x4b7ac3[_0x3d0099(0x24f)](_0x3d0099(0x24b),()=>{const _0x3422a0=_0x3d0099;_0x16f70e(this[_0x3422a0(0x216)]());}):_0x16f70e(this[_0x3d0099(0x216)]());});}[_0xd9205(0x240)](_0x583401,_0x226b9c){const _0x17cbc1=_0xd9205,_0x5b13d6=this[_0x17cbc1(0x220)][_0x17cbc1(0x23d)];this[_0x17cbc1(0x1ef)]=_0x226b9c;for(const _0x1bdf22 of _0x583401){const _0x42cd1b=_0x5b13d6[_0x17cbc1(0x22f)](_0x1bdf22['id']);if(_0x42cd1b){if((_0x1bdf22[_0x17cbc1(0x221)]||_0x1bdf22[_0x17cbc1(0x24e)])&&(_0x1bdf22[_0x17cbc1(0x24c)]=null),_0x42cd1b===this[_0x17cbc1(0x220)][_0x17cbc1(0x1e9)]){const _0x6f3a5a=Math[_0x17cbc1(0x21b)](_0x42cd1b[_0x17cbc1(0x24e)],_0x1bdf22[_0x17cbc1(0x24e)]),_0x2e5ff0=Math[_0x17cbc1(0x21b)](_0x42cd1b[_0x17cbc1(0x221)],_0x1bdf22[_0x17cbc1(0x221)]);let _0x525026;_0x42cd1b[_0x17cbc1(0x24e)]===_0x1bdf22[_0x17cbc1(0x24e)]&&_0x42cd1b[_0x17cbc1(0x221)]===_0x1bdf22[_0x17cbc1(0x221)]?(_0x525026=!0x0,this[_0x17cbc1(0x1ea)](_0x1bdf22)):_0x1bdf22[_0x17cbc1(0x24e)]===_0x6f3a5a&&_0x1bdf22[_0x17cbc1(0x221)]===_0x2e5ff0?_0x525026=!0x1:(_0x42cd1b[_0x17cbc1(0x24e)]===_0x6f3a5a&&_0x42cd1b[_0x17cbc1(0x221)]===_0x2e5ff0||this[_0x17cbc1(0x24a)]({'revision':_0x42cd1b,'from':_0x2e5ff0,'to':_0x6f3a5a}),_0x525026=!0x0),_0x525026&&(delete _0x1bdf22[_0x17cbc1(0x221)],delete _0x1bdf22[_0x17cbc1(0x24e)],delete _0x1bdf22[_0x17cbc1(0x24c)],delete _0x1bdf22[_0x17cbc1(0x208)],delete _0x1bdf22[_0x17cbc1(0x217)]);}this[_0x17cbc1(0x220)][_0x17cbc1(0x245)](_0x1bdf22),this[_0x17cbc1(0x1ea)](_0x1bdf22);}else this[_0x17cbc1(0x220)][_0x17cbc1(0x232)](_0x1bdf22);}const _0xf3512a=_0x5b13d6[_0x17cbc1(0x236)]();_0xf3512a[_0x17cbc1(0x249)]();for(let _0x311cef=0x0;_0x311cef<_0xf3512a[_0x17cbc1(0x215)]-0x1;_0x311cef++){const _0x299053=_0xf3512a[_0x311cef],_0x404679=_0xf3512a[_0x311cef+0x1];if(_0x299053[_0x17cbc1(0x221)]<_0x404679[_0x17cbc1(0x24e)]){const _0x183a82=_0x404679[_0x17cbc1(0x24e)],_0xfe6bb=Math[_0x17cbc1(0x21b)](_0x183a82,_0x299053[_0x17cbc1(0x24e)]);this[_0x17cbc1(0x24a)]({'revision':_0x299053,'from':_0x183a82,'to':_0xfe6bb});}}}[_0xd9205(0x24a)]({revision:_0x1a68b0,from:_0x4c2a49,to:_0x236b7d}={}){const _0x19cf0b=_0xd9205,_0x1b8ec9=this[_0x19cf0b(0x224)][_0x19cf0b(0x1ec)][_0x19cf0b(0x214)](_0x4d36cd),_0x29f4ad=this[_0x19cf0b(0x220)][_0x19cf0b(0x22a)]({'revision':_0x1a68b0,'from':_0x4c2a49,'to':_0x236b7d});_0x29f4ad[_0x19cf0b(0x247)]=_0x29f4ad[_0x19cf0b(0x217)][_0x19cf0b(0x248)](_0x1fad4c=>_0x1b8ec9[_0x19cf0b(0x234)](_0x1fad4c)),_0x1a68b0[_0x19cf0b(0x23c)](_0x29f4ad);}[_0xd9205(0x1ea)](_0x5ace3e){const _0x5b544a=_0xd9205,_0x251516={};_0x251516['id']=_0x5ace3e['id'];for(const _0x32c891 of Object[_0x5b544a(0x258)](_0x5ace3e))'id'!==_0x32c891&&(_0x251516[_0x32c891]=void 0x0);this[_0x5b544a(0x220)][_0x5b544a(0x235)](_0x251516['id'],_0x251516,!0x0);}async[_0xd9205(0x25b)](_0x4ce068){const _0x2d0179=_0xd9205,_0x26eb78=this[_0x2d0179(0x224)][_0x2d0179(0x1ec)][_0x2d0179(0x214)](_0x4d36cd),{connection:_0x4195cb}=this[_0x2d0179(0x224)][_0x2d0179(0x1ec)][_0x2d0179(0x214)](_0x7c2d9a),_0x378f7e=new Set();for(const _0x1751f3 of _0x4ce068){for(const _0x51216f of _0x1751f3[_0x2d0179(0x217)])_0x5aa977(_0x51216f);_0x1751f3[_0x2d0179(0x244)]&&_0x5aa977(_0x1751f3[_0x2d0179(0x244)]);}if(0x0===_0x378f7e[_0x2d0179(0x1fe)])return;const _0x3db5cf=await _0x45da1d[_0x2d0179(0x253)](_0x4195cb,Array[_0x2d0179(0x1ed)](_0x378f7e));for(const _0x4de51a of _0x3db5cf)_0x26eb78[_0x2d0179(0x234)](_0x4de51a['id'])||_0x26eb78[_0x2d0179(0x237)](_0x4de51a);function _0x5aa977(_0x454ee){const _0x4b9368=_0x2d0179;_0x26eb78[_0x4b9368(0x234)](_0x454ee)||_0x378f7e[_0x4b9368(0x1f0)](_0x454ee);}}}export default u;function st(_0x3979a3){const _0x27dec5=_0xd9205;return _0x3979a3[_0x27dec5(0x254)][_0x27dec5(0x23a)](_0x27dec5(0x22e))||_0x3979a3[_0x27dec5(0x254)][_0x27dec5(0x23a)](_0x27dec5(0x25a))||_0x3979a3[_0x27dec5(0x254)][_0x27dec5(0x23a)](_0x27dec5(0x252));}