/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Editor as _0x15aed6,ContextPlugin as _0x23967a,PendingActions as ht,Command as _0x1ef619,Plugin as _0xe86117,Context as _0x274fcf}from'@ckeditor/ckeditor5-core/dist/index.js';import{ObservableMixin as _0x403689,uid as _0x3c82ec,KeystrokeHandler as jt,FocusTracker as _0x511525,diff as _0x3250be,Collection as _0xa8856a,Rect as _0x2c2db3,CKEditorError as _0x130424,first as _0x3928b3,priorities as Wt,scrollViewportToShowTarget as rt,getEnvKeystrokeText as nt,toUnit as xt,DomEmitterMixin as _0x3904ae,keyCodes as _0xe08c8b}from'@ckeditor/ckeditor5-utils/dist/index.js';import{UserView as _0x446abc,AriaDescriptionView as Yt,setupThreadKeyboardNavigation as Zt,ConfirmMixin as ti,LateFocusButtonView as _0x2b2e84,trimHtml as _0x544f82,LateFocusDropdownButtonView as _0x132e78,Users as it,getDateTimeFormatter as lt,hashObject as pt,getAllMarkersDomElementsSorted as et,surroundingMarkersDetector as ot,FOCUS_ANNOTATION_KEYSTROKE as _0x13134b}from'ckeditor5-collaboration/dist/index.js';import{throttle as Dt,isEqual as wt,cloneDeep as It,set as At,unset as yt,debounce as _0x474bb5}from'es-toolkit/compat';import{IconUndo as _0x55ffa4,IconCheck as _0x1ba2f0,IconPencil as _0x2f53ff,IconRemoveComment as _0x60aad3,IconThreeVerticalDots as _0x53a6f9,IconAddComment as _0x33eeee,IconCommentsArchive as _0xf01b52}from'@ckeditor/ckeditor5-icons/dist/index.js';import{EditorUIView as Vt,InlineEditableUIView as $t,EditorUI as Rt,View as kt,FocusCycler as _0x9016e0,ButtonView as _0x1771fd,ViewCollection as _0x35b79b,createDropdown as _0x460aa3,ListView as _0x5e966d,focusChildOnDropdownOpen as _0x4f4598,ListItemView as _0x14ff42,MenuBarMenuListItemButtonView as _0x5d2b5d,BodyCollection as _0x501841,BalloonPanelView as _0x550c57,ContextualBalloon as _0x15dc1d,Dialog as _0x2b5762,DialogViewPosition as _0x99f7d}from'@ckeditor/ckeditor5-ui/dist/index.js';import{disablePlaceholder as St,enablePlaceholder as Ft,MouseObserver as _0x29cdbf}from'@ckeditor/ckeditor5-engine/dist/index.js';import{Clipboard as qt,ClipboardMarkersUtils as Mt,ClipboardPipeline as Pt}from'@ckeditor/ckeditor5-clipboard/dist/index.js';import{Enter as zt,ShiftEnter as Bt}from'@ckeditor/ckeditor5-enter/dist/index.js';import{SelectAll as Et}from'@ckeditor/ckeditor5-select-all/dist/index.js';import{Typing as Gt}from'@ckeditor/ckeditor5-typing/dist/index.js';import{Undo as Jt}from'@ckeditor/ckeditor5-undo/dist/index.js';import{Paragraph as Kt}from'@ckeditor/ckeditor5-paragraph/dist/index.js';import{FOCUS_ANNOTATION_KEYSTROKE as _0x3f9849}from'@ckeditor/ckeditor5-collaboration-core/dist/index.js';import{toWidget as _0x14b6b4}from'@ckeditor/ckeditor5-widget/dist/index.js';class Ct extends/* #__PURE__ -- @preserve */
_0x403689(){['model'];['view'];constructor(_0x111a5c,_0x50452e){super(),this['model']=_0x111a5c,this['model']['_isAttached']=!0x0,this['view']=_0x50452e,this['listenTo'](_0x50452e,'submitCommentThread',()=>this['submit']()),this['listenTo'](_0x50452e,'removeCommentThread',()=>this['remove']()),this['listenTo'](_0x50452e,'resolveCommentThread',()=>this['resolve']()),this['listenTo'](_0x50452e,'reopenCommentThread',()=>this['reopen']()),this['listenTo'](_0x50452e,'addComment',(_0x3a07ad,_0x59fc0f)=>this['addComment'](_0x59fc0f)),this['listenTo'](_0x50452e,'updateComment',(_0xdef31d,_0x515d7f,_0x14fe34)=>this['updateComment'](_0x515d7f,_0x14fe34)),this['listenTo'](_0x50452e,'removeComment',(_0x3ac872,_0x2bed77)=>this['removeComment'](_0x2bed77));}['submit'](){this['model']['submit']();}['remove'](){this['model']['remove']();}['resolve'](){this['model']['isResolved']||this['model']['resolve']();}['reopen'](){this['model']['isResolved']&&this['model']['reopen']();}['addComment'](_0x4bb693){this['model']['addComment']({'content':_0x4bb693,'authorId':this['view']['_localUser']['id']});}['updateComment'](_0x49ef84,_0xcb6ab2){this['model']['getComment'](_0x49ef84)['update']({'content':_0xcb6ab2});}['removeComment'](_0x1ed786){this['model']['getComment'](_0x1ed786)['remove']();}['destroy'](){this['stopListening'](),this['model']['_isAttached']=!0x1;}}function E(_0xc98548,_0x3e2dcd,_0x3a3403){const t=_0xc98548['t'];switch(_0x3e2dcd){case'PENDING_ACTION_COMMENT_THREAD':return t({'string':'Unsaved\x20change\x20in\x20comment\x20thread.','id':'PENDING_ACTION_COMMENT_THREAD'});case'Comment':return t('Comment');case'Reply...':return t('Reply...');case'Reply\x20to\x20reopen\x20discussion...':return t('Reply\x20to\x20reopen\x20discussion...');case'Write\x20a\x20comment...':return t('Write\x20a\x20comment...');case'Comment\x20was\x20made\x20on\x20an\x20element':return t('Comment\x20was\x20made\x20on\x20an\x20element');case'Comment\x20editor':return t('Comment\x20editor');case'Delete\x20comment\x20thread?':return t('Delete\x20comment\x20thread?');case'Delete\x20comment?':return t('Delete\x20comment?');case'Marked\x20as\x20resolved':return t('Marked\x20as\x20resolved');case'Show\x20more\x20items':return t('Show\x20more\x20items');case'Cancel':return t('Cancel');case'Edit':return t('Edit');case'Resolve':return t('Resolve');case'Reopen':return t('Reopen');case'Remove':return t('Remove');case'Reply':return t('Reply');case'Save':return t('Save');case'Annotations\x20sidebar':return t('Annotations\x20sidebar');case'Annotations\x20list':return t('Annotations\x20list');case'Thread\x20comments':return t('Thread\x20comments');case'THREAD_CONTEXT_LABEL':return t({'string':'Thread\x20context:\x20%0','id':'THREAD_CONTEXT_LABEL'},_0x3a3403);case'COMMENT_THREAD_LABEL':return t({'string':'Comment\x20thread\x20by\x20%1.\x20%1\x20reply.','plural':'Comment\x20thread\x20by\x20%1.\x20%0\x20replies.','id':'COMMENT_THREAD_LABEL'},_0x3a3403);case'COMMENT_THREAD_DESCRIPTION':return t({'string':'Press\x20Enter\x20for\x20more\x20options.\x20Press\x20Escape\x20to\x20exit.','id':'COMMENT_THREAD_DESCRIPTION'});case'COMMENT_ARIA_LABEL':return t({'string':'Comment\x20by\x20%0.\x20Created\x20on\x20%1.\x20%2.\x20%3','id':'COMMENT_ARIA_LABEL'},_0x3a3403);case'LEAVE_COMMENT_ANNOUNCEMENT':return t({'string':'Leaving\x20a\x20content\x20with\x20comments.','id':'LEAVE_COMMENT_ANNOUNCEMENT'});case'ENTER_COMMENT_ANNOUNCEMENT':return t({'string':'Entering\x20a\x20content\x20with\x20comments.\x20Press\x20%0\x20to\x20go\x20to\x20the\x20discussion.','id':'ENTER_COMMENT_ANNOUNCEMENT'},_0x3a3403);case'NUMBER_OF_COMMENTS':return t({'string':'%0\x20Comment','plural':'%0\x20Comments','id':'NUMBER_OF_COMMENTS'},_0x3a3403);case'TOO_LONG_COMMENT_ALERT':return t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},_0x3a3403);case'EXTERNAL_COMMENT':return t({'string':'This\x20comment\x20comes\x20from\x20an\x20external\x20source.','id':'EXTERNAL_COMMENT'});case'EXTERNAL_IMPORT_WORD_COMMENT':return t({'string':'This\x20comment\x20comes\x20from\x20an\x20imported\x20Word\x20file.','id':'EXTERNAL_IMPORT_WORD_COMMENT'});case'EXTERNAL_AVATAR':return t({'string':'Displayed\x20author\x20name\x20comes\x20from\x20external\x20source\x20(added\x20by\x20%0)','id':'EXTERNAL_AVATAR'},_0x3a3403);case'EXTERNAL_IMPORT_WORD_AVATAR':return t({'string':'Displayed\x20author\x20name\x20comes\x20from\x20a\x20Word\x20document\x20imported\x20by\x20%0','id':'EXTERNAL_IMPORT_WORD_AVATAR'},_0x3a3403);case'COMMENTS_ARCHIVE':return t({'string':'Comments\x20archive','id':'COMMENTS_ARCHIVE'});case'EMPTY_COMMENTS_ARCHIVE':return t({'string':'There\x20are\x20no\x20archived\x20comment\x20threads.','id':'EMPTY_COMMENTS_ARCHIVE'});case'COMMENTS_ARCHIVE_LIST_LABEL':return t({'string':'List\x20of\x20comments','id':'COMMENTS_ARCHIVE_LIST_LABEL'});case'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP':return t({'string':'Keystrokes\x20for\x20interacting\x20with\x20annotation\x20threads\x20(e.g.\x20comments,\x20track\x20changes\x20suggestions)','id':'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP'});case'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO':return t({'string':'Move\x20focus\x20to\x20the\x20thread\x20when\x20the\x20selection\x20is\x20anchored\x20in\x20its\x20marker','id':'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO'});case'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT':return t({'string':'Exit\x20the\x20annotation\x20and\x20move\x20focus\x20back\x20to\x20the\x20edited\x20content','id':'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT'});case'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER':return t({'string':'Browse\x20the\x20focused\x20annotation\x20thread\x20or\x20thread\x20comment','id':'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER'});case'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS':return t({'string':'Move\x20across\x20internals\x20of\x20the\x20annotation\x20thread','id':'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS'});case'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT':return t({'string':'Submit\x20the\x20reply\x20while\x20writing\x20a\x20comment','id':'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT'});case'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS':return t({'string':'Move\x20to\x20the\x20previous\x20or\x20next\x20thread\x20in\x20the\x20annotations\x20sidebar\x20or\x20comments\x20archive','id':'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS'});default:return'';}}class Ut extends Vt{['main'];['editable'];constructor(_0xb69708,_0x5b24ea){super(_0xb69708);const _0x3678d6=_0x3c82ec();this['main']=this['createCollection'](),this['editable']=new $t(_0xb69708,_0x5b24ea,void 0x0,{'label':()=>E(_0xb69708,'Comment\x20editor')}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-reset','ck-editor','ck-rounded-corners','ck-comment__input'],'dir':_0xb69708['uiLanguageDirection'],'lang':_0xb69708['uiLanguage'],'aria-labelledby':'cke-editor__aria-label_'+_0x3678d6},'children':[{'tag':'div','attributes':{'class':'ck-editor__main','role':'presentation'},'children':this['main']}]});}['render'](){super['render'](),this['main']['add'](this['editable']);}['focus'](){this['editable']['element']['focus']();}}class Ot extends Rt{['view'];constructor(_0x57beb9){super(_0x57beb9),this['view']=new Ut(_0x57beb9['locale'],_0x57beb9['editing']['view']);}get['element'](){return this['view']['element'];}['init'](){const _0x4f58b8=this['editor']['editing']['view'],_0x53f03d=this['view']['editable'],_0xb09461=_0x4f58b8['document']['getRoot']();_0x53f03d['name']=_0xb09461['rootName'],this['view']['render']();const _0x103e7a=_0x53f03d['element'];this['setEditableElement'](_0x53f03d['name'],_0x103e7a),this['view']['editable']['bind']('isFocused')['to'](this['focusTracker']),_0x4f58b8['attachDomRoot'](_0x103e7a),this['fire']('ready');}['destroy'](){super['destroy'](),this['view']['destroy']();}}const Nt=[qt,zt,Bt,Et,Gt,Jt,Kt];class Qt extends/* #__PURE__ -- @preserve */
_0x403689(_0x15aed6){static ['defaultPlugins']=/* #__PURE__ -- @preserve */
((()=>Nt)());constructor(_0x416947={}){function _0x1deeb1(_0x5ef7d8){return _0x5ef7d8['map'](_0x2dad01=>String['fromCharCode'](_0x2dad01))['join']('');}(_0x416947=Object['assign']({},_0x416947))['plugins']||(_0x416947['plugins']=Qt['defaultPlugins']),super(_0x416947),this['ui']=new Ot(this),this['set']('placeholder',''),this['model']['document']['on']('change',()=>this['_updatePlaceholder'](),{'priority':'low'}),this['on']('change:placeholder',()=>this['_updatePlaceholder']()),this['model']['document']['createRoot'](),this[_0x1deeb1([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x1deeb1([0x76,0x69,0x65,0x77])][_0x1deeb1([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x1deeb1([0x61,0x75,0x74,0x6f]),this[_0x1deeb1([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74])]=()=>window[_0x1deeb1([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x1deeb1([0x72,0x65,0x73,0x6f,0x6c,0x76,0x65])]({[_0x1deeb1([0x73,0x74,0x61,0x74,0x75,0x73])]:_0x1deeb1([0x6f,0x6b])});}['create'](){const _0x5dd98f=this['config']['get']('initialData')||'';return this['initPlugins']()['then'](()=>this['ui']['init']())['then'](()=>this['data']['init'](_0x5dd98f))['then'](()=>this['fire']('ready'));}['destroy'](){return super['destroy']()['then'](()=>this['ui']['destroy']());}['focus'](){this['model']['change'](_0x23069f=>{const _0x12b93b=this['model']['document']['getRoot'](),_0x19a183=_0x12b93b&&_0x12b93b['getChild'](_0x12b93b['childCount']-0x1);_0x23069f['setSelection'](_0x19a183,'end'),this['editing']['view']['focus']();});}['_updatePlaceholder'](){const _0x4c3284=this['editing']['view'],_0x4e1c0d=_0x4c3284['document']['getRoot'](),_0x4260bb=_0x4e1c0d['getChild'](0x0);_0x4e1c0d['childCount']>0x1||!_0x4260bb||'p'!=_0x4260bb['name']?this['placeholderElement']&&this['placeholderElement']['placeholder']&&(St(_0x4c3284,this['placeholderElement']),this['placeholderElement']=void 0x0):(this['placeholder']&&(_0x4260bb['placeholder']=this['placeholder']),Ft({'view':_0x4c3284,'element':_0x4260bb,'keepOnFocus':!0x0}),this['placeholderElement']=_0x4260bb);}}class os extends kt{['keystrokes'];['focusTracker'];['focusables'];['focusCycler'];['submitButtonView'];['cancelButtonView'];['_editorConfig'];constructor(_0x32a0ea,_0x5b6713={}){super(_0x32a0ea),this['editor']=null,this['_editorConfig']=_0x5b6713,this['set']('value',_0x5b6713['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',E(_0x32a0ea,'Reply...')),this['set']('submitLabel',E(_0x32a0ea,'Reply')),this['submitButtonView']=this['_createSubmitButton'](),this['cancelButtonView']=this['_createCancelButton'](),this['focusables']=this['createCollection']([this['submitButtonView'],this['cancelButtonView']]),this['keystrokes']=new jt(),this['focusTracker']=new _0x511525(),this['focusCycler']=new _0x9016e0({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x51d8b2,_0xfe93a5)=>{this['cancelButtonView']['fire']('execute'),_0xfe93a5();}),this['keystrokes']['set']('Ctrl+Enter',(_0x155fc7,_0x4f56d8)=>{this['submitButtonView']['isEnabled']&&(this['submitButtonView']['fire']('execute'),_0x4f56d8());}),this['on']('submit',(_0x14c64d,_0x21656c)=>{_0x21656c['length']>0xfde8?(alert(E(_0x32a0ea,'TOO_LONG_COMMENT_ALERT',[_0x21656c['length'],0xfde8])),_0x14c64d['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['createEditor'](){return this['editor']||(this['editor']=new Qt(this['_editorConfig']),this['_editorCreationPromise']=this['editor']['create']()['then'](()=>{if(this['_isDestroyed'])return;const _0x18e185=this['editor'];this['element']['insertBefore'](_0x18e185['ui']['element'],this['element']['firstChild']),_0x18e185['model']['document']['on']('change',()=>this['value']=_0x18e185['getData']()),_0x18e185['bind']('placeholder')['to'](this),this['focusables']['add'](_0x18e185['ui']['view'],0x0),this['fire']('editorReady',this['editor']);})),this['_editorCreationPromise'];}['focus'](_0x3265df){-0x1===_0x3265df?(this['focusCycler']['focusFirst'](),this['focusCycler']['focusLast']()):this['focusCycler']['focusFirst']();}async['destroy'](){this['_isDestroyed']||(this['_isDestroyed']=!0x0,this['editor']&&(await this['_editorCreationPromise'],await this['editor']['destroy'](),this['fire']('editorDestroyed',this['editor'])),await super['destroy']());}['_createSubmitButton'](){const {locale:_0x4c8b3d}=this,_0x3037fb=new _0x1771fd(_0x4c8b3d);return _0x3037fb['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x3037fb['withText']=!0x0,_0x3037fb['bind']('label')['to'](this,'submitLabel'),_0x3037fb['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x3037fb['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x311d9a,_0x415cb3)=>!_0x415cb3&&!!_0x311d9a['trim']()),_0x3037fb;}['_createCancelButton'](){const {locale:_0x5b7a74}=this,_0x356159=new _0x1771fd(_0x5b7a74);return _0x356159['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0x356159['label']=E(_0x5b7a74,'Cancel'),_0x356159['withText']=!0x0,_0x356159['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0x356159;}['_setupKeyboardNavigation'](){this['keystrokes']['listenTo'](this['element']),this['focusables']['forEach'](_0x1e7f56=>{this['focusTracker']['add'](_0x1e7f56['element']);}),this['focusables']['on']('change',(_0x3ed889,_0x569a6f)=>{for(const _0x68f256 of Array['from'](_0x569a6f['added'])['reverse']())this['focusTracker']['add'](_0x68f256['element']);});}}class ie extends kt{constructor(_0xb5ef81,_0x131ccf,_0x34aaa8){super(_0xb5ef81),this['commentInputView']=new os(_0xb5ef81,_0x34aaa8),this['focusCycler']=this['commentInputView']['focusCycler'],this['commentInputView']['bind']('showButtons')['to'](this['commentInputView']['focusTracker'],'isFocused',this['commentInputView'],'value',(_0x55908e,_0x43e635)=>_0x55908e||!!_0x43e635),this['set']('showInput',!0x1),this['on']('change:showInput',()=>{this['showInput']&&!this['commentInputView']['editor']&&this['commentInputView']['createEditor']();}),this['commentInputView']['delegate']('editorReady')['to'](this),this['commentInputView']['delegate']('editorDestroyed')['to'](this),this['userView']=new _0x446abc(_0xb5ef81,_0x131ccf),this['userView']['extendTemplate']({'attributes':{'class':'ck-thread__user','aria-hidden':!0x0}}),this['commentInputView']['extendTemplate']({'attributes':{'class':'ck-thread__input'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-container',this['bindTemplate']['if']('showInput','ck-comment__input-container--active')]},'children':[this['userView'],this['commentInputView']]});}['render'](){super['render'](),this['_focusOnNonInteractiveMouseDown']();}['destroy'](){return this['commentInputView']['destroy']()['then'](()=>super['destroy']());}['focus'](_0xda6d8a){this['commentInputView']['focus'](_0xda6d8a);}['_focusOnNonInteractiveMouseDown'](){this['listenTo'](this['element'],'mousedown',(_0x27f497,_0x1bdcb1)=>{const {submitButtonView:_0x2b9fa7,cancelButtonView:_0x14bb3f,editor:_0x515c90}=this['commentInputView'];[_0x2b9fa7['element'],_0x14bb3f['element'],_0x515c90?_0x515c90['editing']['view']['getDomRoot']():null]['filter'](_0x329529=>_0x329529)['some'](_0x1b07f8=>_0x1b07f8['contains'](_0x1bdcb1['target']))||(this['focus'](),_0x1bdcb1['preventDefault']());});}}class cs extends kt{constructor(_0x5d4a5e){super(_0x5d4a5e);const _0x34dfa1=this['bindTemplate'];this['set']('count',void 0x0),this['setTemplate']({'tag':'li','attributes':{'class':'ck-thread__comment-count'},'children':[{'text':_0x34dfa1['to']('count',_0x284055=>E(_0x5d4a5e,'NUMBER_OF_COMMENTS',_0x284055))}]});}}class te extends kt{['commentViews'];['resolvedCommentView'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_config'];['_collapsedCommentsView'];constructor(_0x1da764,_0x51279e,_0x49391c){super(_0x1da764);const _0x1df20c=this['bindTemplate'];this['set']('hasDirtyComment',!0x1),this['set']('length',_0x51279e['comments']['length']),this['set']('isActive',!0x1),this['_model']=_0x51279e,this['_config']=_0x49391c,this['commentViews']=this['createCollection'](),this['visibleViews']=this['createCollection'](),this['resolvedCommentView']=null,this['focusTracker']=new _0x511525(),this['keystrokes']=new jt(),this['focusCycler']=new _0x9016e0({'focusables':this['commentViews'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x3e8760=>this['commentViews']['map'](_0x483394=>_0x483394['element'])['includes'](_0x3e8760['target'])},'actions':{'focusPrevious':'arrowup','focusNext':'arrowdown'}}),this['_collapsedCommentsView']=new cs(_0x1da764),this['_collapsedCommentsView']['bind']('count')['to'](this,'length',_0x40fc54=>_0x40fc54-this['_config']['maxCommentsWhenCollapsed']);for(const _0x2633c8 of _0x51279e['comments'])this['_handleNewCommentModel'](_0x2633c8);this['_handleInfoComment'](),this['listenTo'](_0x51279e['comments'],'add',(_0x42e07e,_0x3af23f)=>{const _0x1ac520=this['_calculatePosition'](_0x3af23f);this['length']++,this['_handleNewCommentModel'](_0x3af23f,_0x1ac520),this['refreshVisibleViews']();}),this['listenTo'](_0x51279e['comments'],'remove',(_0x3588a4,_0x1d14ea)=>{this['length']--,this['_handleRemoveCommentModel'](_0x1d14ea),this['refreshVisibleViews']();}),this['listenTo'](_0x51279e,'commentUpdated',()=>this['refreshVisibleViews']()),this['listenTo'](_0x51279e,'change:isResolved',()=>this['_handleInfoComment']()),this['on']('change:isActive',()=>this['refreshVisibleViews']()),this['on']('change:hasDirtyComment',()=>this['refreshVisibleViews']()),this['setTemplate']({'tag':'ul','attributes':{'class':['ck-thread__comments',_0x1df20c['if']('length','ck-hidden',_0x3db6a3=>!_0x3db6a3)],'aria-label':E(_0x1da764,'Thread\x20comments')},'children':this['visibleViews']});}get['_shouldCollapse'](){return this['_model']['weight']>this['_config']['maxThreadTotalWeight']&&!this['isActive']&&!this['hasDirtyComment'];}['render'](){super['render'](),this['refreshVisibleViews'](),this['_setupKeyboardNavigation']();}['focus'](_0x9836c6){-0x1===_0x9836c6?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}['destroy'](){this['_collapsedCommentsView']['destroy']();for(const _0x1f1d93 of this['commentViews'])_0x1f1d93['destroy']();super['destroy']();}['refreshVisibleViews'](){this['_shouldCollapse']?this['_rearrangeCollapse']():this['_rearrangeExpand']();}['_handleNewCommentModel'](_0x7583f0,_0x389f04){const _0x598ca8=new this['_config']['CommentView'](this['locale'],_0x7583f0,{'maxCommentCharsWhenCollapsed':this['_config']['maxCommentCharsWhenCollapsed'],'formatDateTime':this['_config']['formatDateTime'],'editorConfig':this['_config']['editorConfig']});_0x598ca8['viewUid']=_0x7583f0['id'],_0x598ca8['delegate']('removeComment')['to'](this),_0x598ca8['delegate']('updateComment')['to'](this),_0x598ca8['delegate']('resolveCommentThread')['to'](this),_0x598ca8['delegate']('editorReady')['to'](this),_0x598ca8['delegate']('editorDestroyed')['to'](this),this['listenTo'](_0x598ca8,'change:isEditMode',()=>this['_updateHasDirtyComment']()),this['commentViews']['add'](_0x598ca8,_0x389f04);}['_calculatePosition'](_0x2a1e76){const _0x5c59a2=this['_model']['_findOptimalIndex'](_0x2a1e76);return this['resolvedCommentView']?this['resolvedCommentView']['authoredAt']>_0x2a1e76['authoredAt']?_0x5c59a2-0x1:_0x5c59a2:_0x5c59a2-0x1;}['_handleInfoComment'](){if(this['_model']['resolvedBy']&&this['_model']['resolvedAt']){const _0x39ab9d={'id':'resolved','author':this['_model']['resolvedBy'],'authoredAt':this['_model']['resolvedAt'],'content':E(this['locale'],'Marked\x20as\x20resolved'),'attributes':{}};this['resolvedCommentView']=new this['_config']['CommentView'](this['locale'],_0x39ab9d,{'maxCommentCharsWhenCollapsed':this['_config']['maxCommentCharsWhenCollapsed'],'formatDateTime':this['_config']['formatDateTime'],'editorConfig':this['_config']['editorConfig'],'isSystemComment':!0x0}),this['commentViews']['add'](this['resolvedCommentView'],this['_model']['_findOptimalIndex'](_0x39ab9d));}else this['resolvedCommentView']&&(this['commentViews']['remove'](this['resolvedCommentView']),this['resolvedCommentView']['destroy'](),this['resolvedCommentView']=null);this['refreshVisibleViews']();}['_handleRemoveCommentModel'](_0x4998b5){const _0x1c7495=this['commentViews']['remove'](_0x4998b5['id']);this['stopListening'](_0x1c7495),_0x1c7495['isEditMode']&&this['_updateHasDirtyComment'](),_0x1c7495['destroy']();}['_updateHasDirtyComment'](){this['hasDirtyComment']=Array['from'](this['commentViews'])['some'](_0x41dec9=>_0x41dec9['isEditMode']);}['_rearrangeCollapse'](){const _0xb6a506=function(_0x3cb325){const _0x13a5a0=new _0xa8856a();for(const _0x336d3c of _0x3cb325)_0x13a5a0['add'](_0x336d3c);return _0x13a5a0;}(this['commentViews']),_0x55b76b=this['_collapsedCommentsView']['count'];for(let _0x377259=0x1;_0x377259<=_0x55b76b;_0x377259++)_0xb6a506['remove'](0x1);for(const _0x23adc9 of _0xb6a506)_0x23adc9['collapse']();_0x55b76b>0x0&&_0xb6a506['add'](this['_collapsedCommentsView'],0x1),ns(_0x3250be(Array['from'](this['visibleViews']),Array['from'](_0xb6a506)),this['visibleViews'],_0xb6a506);}['_rearrangeExpand'](){ns(_0x3250be(Array['from'](this['visibleViews']),Array['from'](this['commentViews'])),this['visibleViews'],this['commentViews']);for(const _0x110219 of this['visibleViews'])_0x110219['expand']();}['_setupKeyboardNavigation'](){this['commentViews']['forEach'](_0x2d0475=>{this['focusTracker']['add'](_0x2d0475['element']),this['keystrokes']['listenTo'](_0x2d0475['element']);}),this['commentViews']['on']('change',(_0x2da288,_0x306fa9)=>{for(const _0x5e3ee2 of _0x306fa9['removed'])this['focusTracker']['remove'](_0x5e3ee2['element']),this['keystrokes']['stopListening'](_0x5e3ee2['element']);for(const _0x67d823 of Array['from'](_0x306fa9['added'])['reverse']())this['focusTracker']['add'](_0x67d823['element']),this['keystrokes']['listenTo'](_0x67d823['element']);});}}function ns(_0x822c06,_0x3bd3e5,_0x1c6039){let _0x117386=0x0;for(const _0x5bca27 of _0x822c06)switch(_0x5bca27){case'insert':_0x3bd3e5['add'](_0x1c6039['get'](_0x117386),_0x117386),_0x117386++;break;case'delete':_0x3bd3e5['remove'](_0x117386);break;case'equal':_0x117386++;}}class as extends kt{constructor(_0x405700){super(_0x405700);const _0x1aab2e=this['bindTemplate'];this['set']('contextValue',''),this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-context__value'],'aria-label':_0x1aab2e['to']('contextValue',_0x39e2ef=>E(_0x405700,'THREAD_CONTEXT_LABEL',_0x39e2ef)),'tabindex':-0x1},'children':[{'text':_0x1aab2e['to']('contextValue')}]});}['focus'](){this['element']['focus']();}}class Xt extends kt{['_model'];['reopenButtonView'];['contextView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];constructor(_0x2ef58e,_0x19c4ab){super(_0x2ef58e);const _0x5589f2=this['bindTemplate'];this['_model']=_0x19c4ab,this['reopenButtonView']=this['_createReopenButton'](),this['contextView']=this['_createContextView'](),this['focusables']=this['createCollection']([this['contextView'],this['reopenButtonView']]),this['focusTracker']=new _0x511525(),this['keystrokes']=new jt(),this['focusCycler']=new _0x9016e0({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['bind']('hasContext')['to'](this['_model'],'context',_0x32f45d=>!!_0x32f45d),this['bind']('contextValue')['to'](this['_model'],'context',_0x299d69=>_0x299d69&&_0x299d69['value']?this['_trimContextValue'](_0x299d69['value']):E(this['locale'],'Comment\x20was\x20made\x20on\x20an\x20element')),this['setTemplate']({'tag':'div','attributes':{'class':['ck-thread__header']},'children':[{'tag':'div','attributes':{'class':['ck-context-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-context',_0x5589f2['if']('hasContext','ck-context--quotes')]},'children':[this['contextView']]}]},{'tag':'div','attributes':{'class':['ck-annotation__actions']},'children':[this['reopenButtonView']]}]});}['render'](){super['render'](),this['_attachContextActions'](),this['_setupKeyboardNavigation']();}['focus'](){this['focusCycler']['focusFirst']();}['_createReopenButton'](){const _0x508a46=new _0x1771fd(this['locale']);return _0x508a46['label']=E(this['locale'],'Reopen'),_0x508a46['tooltip']=E(this['locale'],'Reopen'),_0x508a46['icon']=_0x55ffa4,_0x508a46['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x80ecd9=>!_0x80ecd9),_0x508a46['bind']('isVisible')['to'](this['_model'],'isResolvable',this['_model'],'isResolved',(_0x2a17b6,_0x5d75b3)=>_0x2a17b6&&_0x5d75b3),_0x508a46['on']('execute',()=>{this['fire']('reopenCommentThread',this['_model']['id']);}),_0x508a46;}['_trimContextValue'](_0x539daf){if(_0x539daf['length']<0x96)return _0x539daf;const _0x4f16cf=_0x539daf['lastIndexOf']('\x20',0x93);return _0x539daf['substring'](0x0,_0x4f16cf>-0x1?_0x4f16cf:0x93)+'...';}['_attachContextActions'](){const _0x594ffd=this['element']['querySelector']('.ck-context'),_0x54d489=_0x594ffd['querySelector']('.ck-context__value');this['listenTo'](_0x594ffd,'mouseenter',()=>{_0x54d489['offsetWidth']<_0x54d489['scrollWidth']&&_0x594ffd['classList']['add']('overlay');}),this['listenTo'](_0x594ffd,'mouseleave',()=>{_0x594ffd['classList']['remove']('overlay');});}['_setupKeyboardNavigation'](){this['keystrokes']['listenTo'](this['element']);for(const _0x5691e2 of this['focusables'])this['focusTracker']['add'](_0x5691e2['element']),this['keystrokes']['listenTo'](_0x5691e2['element']);}['_createContextView'](){const _0x46e61e=new as(this['locale']);return _0x46e61e['bind']('contextValue')['to'](this),_0x46e61e;}}class ts extends kt{['_model'];['_config'];['commentThreadHeaderView'];['commentThreadInputView'];['ariaDescriptionView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];constructor(_0x1fed21,_0x16ac4c,_0x5a49ee,_0x54d67a){super(_0x1fed21),this['set']('isActive',!0x1),this['set']('isDirty',!0x1),this['_model']=_0x16ac4c,this['_localUser']=_0x5a49ee,this['_config']=_0x54d67a,this['commentThreadHeaderView']=new Xt(_0x1fed21,_0x16ac4c),this['commentThreadHeaderView']['delegate']('reopenCommentThread')['to'](this),this['ariaDescriptionView']=new Yt(_0x1fed21,E(_0x1fed21,'COMMENT_THREAD_DESCRIPTION')),this['listenTo'](this,'reopenCommentThread',()=>{this['focus']();}),this['commentsListView']=new te(_0x1fed21,_0x16ac4c,Object['assign']({'CommentView':this['_config']['CommentView']},_0x54d67a)),this['commentsListView']['delegate']('removeComment')['to'](this),this['commentsListView']['delegate']('updateComment')['to'](this),this['commentsListView']['delegate']('resolveCommentThread')['to'](this),this['commentsListView']['delegate']('editorReady')['to'](this),this['commentsListView']['delegate']('editorDestroyed')['to'](this),this['commentsListView']['bind']('isActive')['to'](this),this['listenTo'](this,'resolveCommentThread',()=>{this['focus']();}),this['set']('length',this['commentsListView']['length']),this['bind']('length')['to'](this['commentsListView'],'length'),this['commentThreadInputView']=this['_createCommentThreadInputView'](),this['commentThreadInputView']['delegate']('editorReady')['to'](this),this['commentThreadInputView']['delegate']('editorDestroyed')['to'](this),this['on']('removeComment',()=>this['focus']()),this['bind']('isDirty')['to'](this['commentsListView'],'hasDirtyComment',this['commentThreadInputView']['commentInputView'],'value',(_0x2744af,_0x24c9c8)=>_0x2744af||!!_0x24c9c8),this['bind']('isUnlinked')['to'](_0x16ac4c,'unlinkedAt',_0x48708d=>!!_0x48708d),this['bind']('ariaLabel')['to'](this,'length',_0x57efe2=>{const _0x23e250=this['_model']['comments']['first']?this['_model']['comments']['first']['author']['name']:this['_localUser']['name'];return E(this['locale'],'COMMENT_THREAD_LABEL',[_0x57efe2,_0x23e250]);}),this['focusables']=this['createCollection']([this['commentsListView'],this['commentThreadInputView']]),this['focusTracker']=new _0x511525(),this['keystrokes']=new jt(),this['focusCycler']=new _0x9016e0({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x17a326=>_0x17a326['target']!==this['element']},'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}});}['focus'](){this['element']['focus']();}['render'](){super['render'](),Zt(this,this['focusables']);}async['destroy'](){this['isDirty']=!0x1,this['commentsListView']['destroy'](),await this['commentThreadInputView']['destroy'](),super['destroy']();}['_createCommentThreadInputView'](){const _0x296b82=new ie(this['locale'],this['_localUser'],this['_config']['editorConfig']),_0x18bd8d=_0x296b82['commentInputView'];return _0x296b82['bind']('showInput')['to'](this,'isActive',this['_model'],'isReadOnly',this['_model'],'canComment',this['_model'],'archivedAt',_0x18bd8d,'value',(_0x531da1,_0x17dbf3,_0x1ee0fa,_0x17dbd1,_0x28ddcb)=>!!_0x28ddcb||!!_0x17dbd1&&_0x1ee0fa&&!_0x17dbf3||_0x531da1&&_0x1ee0fa&&!_0x17dbf3),_0x18bd8d['bind']('placeholder')['to'](this,'length',this['_model'],'isResolvable',this['_model'],'isResolved',(_0x5462c0,_0x3c98fe,_0x5d0041)=>{let _0x3800a5;return _0x3800a5=_0x5d0041&&_0x3c98fe?'Reply\x20to\x20reopen\x20discussion...':_0x5462c0?'Reply...':'Write\x20a\x20comment...',E(this['locale'],_0x3800a5);}),_0x18bd8d['bind']('submitLabel')['to'](this,'length',_0x2118fa=>E(this['locale'],_0x2118fa?'Reply':'Comment')),_0x18bd8d['on']('submit',(_0x5317e1,_0x304775)=>{this['fire']('addComment',_0x304775),this['_model']['isResolved']&&this['_model']['isResolvable']&&this['fire']('reopenCommentThread',this['_model']['id']),this['_model']['isSubmitted']||this['fire']('submitCommentThread');}),_0x18bd8d['on']('cancel',()=>{this['focus']();}),_0x18bd8d['bind']('disabledSubmit')['to'](this['_model'],'isReadOnly'),_0x18bd8d['on']('cancel',_0x3bde60=>{0x0==this['length']&&(this['fire']('removeCommentThread'),_0x3bde60['stop']());}),this['on']('change:isActive',(_0xa6fbee,_0x564e9a,_0xf0db3a)=>{_0xf0db3a||this['length']||_0x18bd8d['value']||this['fire']('removeCommentThread');}),_0x296b82;}}class vt extends/* #__PURE__ -- @preserve */
ti(ts){['commentThreadChildren'];['containerElement'];['resolveButton'];['_boundFirstCommentView'];constructor(_0x12c778,_0x4b07b5,_0x26b905,_0x58f0e5){super(_0x12c778,_0x4b07b5,_0x26b905,_0x58f0e5),this['commentThreadChildren']=this['createCollection']([this['commentsListView'],this['commentThreadInputView'],this['ariaDescriptionView']]),this['set']('actionIndicator',null),this['containerElement']=null,this['_boundFirstCommentView']=null,this['locale']=_0x12c778,this['resolveButton']=this['_createResolveButton'](),this['setTemplate'](this['getTemplate']()),this['on']('change:isActive',(_0x1c8bd9,_0x2a2c53,_0x4521a1)=>{_0x4521a1||this['_cancelAllConfirms']();}),this['listenTo'](this['_model'],'change:isReadOnly',(_0x4e1827,_0x3d95be,_0xbde2e5)=>{_0xbde2e5&&this['_cancelAllConfirms']();}),this['length']>0x0&&this['_bindFirstCommentView'](),this['listenTo'](this['commentsListView']['commentViews'],'add',()=>{this['_bindFirstCommentView']();});}['getTemplate'](){const _0x50286e=this['bindTemplate'];return{'tag':'div','attributes':{'class':['ck','ck-thread','ck-reset_all-excluded','ck-rounded-corners',_0x50286e['if']('isActive','ck-thread--active'),_0x50286e['if']('isUnlinked','ck-thread--unlinked'),_0x50286e['if']('isConfirm','ck-thread--remove-confirmation'),_0x50286e['to']('actionIndicator',_0x37d63f=>_0x37d63f?'ck-thread--'+_0x37d63f:'')],'data-thread-id':this['_model']['id'],'tabindex':0x0,'role':'listitem','aria-label':_0x50286e['to']('ariaLabel'),'aria-describedby':this['ariaDescriptionView']['id']},'children':[{'tag':'div','attributes':{'class':'ck-thread__container'},'children':this['commentThreadChildren']}]};}['render'](){super['render'](),this['containerElement']=this['element']['querySelector']('.ck-thread__container'),this['_model']['on']('change:archivedAt',()=>{this['_updateArchivedThreadHeader']();}),this['_updateArchivedThreadHeader']();}['_cancelAllConfirms'](){this['cancelConfirm']();for(const _0x1f482b of this['commentsListView']['commentViews'])_0x1f482b['cancelConfirm']();}['_bindFirstCommentView'](){const {locale:_0x24021e}=this,_0x46fb09=this['commentsListView']['commentViews']['get'](0x0);_0x46fb09===this['_boundFirstCommentView']||_0x46fb09['isSystemComment']||(this['_boundFirstCommentView']=_0x46fb09,this['unbind']('actionIndicator'),this['bind']('actionIndicator')['to'](_0x46fb09,'actionIndicator',_0x31a440=>'remove'===_0x31a440?'remove':null),_0x46fb09['placeholder']=E(_0x24021e,'Write\x20a\x20comment...'),_0x46fb09['removeButton']['on']('execute',_0x598fb5=>{_0x598fb5['stop'](),this['showConfirm'](E(_0x24021e,'Delete\x20comment\x20thread?'),this['containerElement'])['then'](()=>{this['fire']('removeCommentThread');});},{'priority':'high'}),this['on']('removeConfirm',()=>{_0x46fb09['focus']();}),_0x46fb09['actionBar']['add'](this['resolveButton'],0x0),_0x46fb09['focusables']['add'](this['resolveButton'],0x0));}['_createResolveButton'](){const _0x150788=new _0x2b2e84(this['locale']);return _0x150788['label']=E(this['locale'],'Resolve'),_0x150788['tooltip']=E(this['locale'],'Resolve'),_0x150788['icon']=_0x1ba2f0,_0x150788['extendTemplate']({'attributes':{'class':'ck-comment--resolve'}}),_0x150788['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x3e55f2=>!_0x3e55f2),_0x150788['bind']('isVisible')['to'](this['_model'],'isResolvable',this['_model'],'isResolved',(_0x1a69a9,_0x5c1dee)=>_0x1a69a9&&!_0x5c1dee),_0x150788['on']('execute',()=>{this['fire']('resolveCommentThread',this['_model']['id']);}),_0x150788;}['_updateArchivedThreadHeader'](){this['_model']['archivedAt']?this['commentThreadChildren']['has'](this['commentThreadHeaderView'])||(this['commentThreadChildren']['add'](this['commentThreadHeaderView'],0x0),this['focusables']['add'](this['commentThreadHeaderView'],0x0)):this['commentThreadChildren']['has'](this['commentThreadHeaderView'])&&(this['commentThreadChildren']['remove'](this['commentThreadHeaderView']),this['focusables']['remove'](this['commentThreadHeaderView']));}}class es extends kt{constructor(_0x3f4e4e){super(_0x3f4e4e),this['set']('content',''),this['setTemplate']({'tag':'div','attributes':{'class':['ck-content','ck-comment__content','ck-annotation__content']}});}['render'](){super['render'](),this['on']('change:content',(_0xdfae43,_0x57d8d7,_0x47db7d)=>{this['element']['innerHTML']=_0x47db7d;}),this['element']['innerHTML']=this['content'];}}class hs extends kt{['visibleView'];['ariaDescriptionView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_config'];constructor(_0x2f3120,_0x451974,_0x39f990){super(_0x2f3120),this['_model']=_0x451974,this['_config']=_0x39f990,this['isSystemComment']=!!this['_config']['isSystemComment'],this['set']('isEditMode',!0x1),this['set']('isCollapsed',!0x0),this['bind']('ariaLabel')['to'](_0x451974,'content',_0x451974,'authoredAt',(_0x2fa5e1,_0x1a5da1)=>E(_0x2f3120,'COMMENT_ARIA_LABEL',[_0x451974['author']['name'],_0x39f990['formatDateTime'](_0x1a5da1),new DOMParser()['parseFromString'](_0x2fa5e1,'text/html')['body']['textContent'],_0x451974['isExternal']?this['getExternalCommentNote']():''])),this['ariaDescriptionView']=new Yt(_0x2f3120,E(_0x2f3120,'COMMENT_THREAD_DESCRIPTION')),this['visibleView']=this['createCollection'](),this['visibleView']['add'](this['_createCommentContentView']()),this['focusables']=new _0x35b79b(),this['focusTracker']=new _0x511525(),this['keystrokes']=new jt(),this['focusCycler']=new _0x9016e0({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x257c49=>_0x257c49['target']!==this['element']},'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}});}['expand'](){this['isCollapsed']=!0x1;}['collapse'](){this['isEditMode']||(this['isCollapsed']=!0x0);}['focus'](){this['element']['focus']();}['render'](){super['render'](),this['_setupKeyboardNavigation']();}async['destroy'](){await this['visibleView']['get'](0x0)['destroy'](),super['destroy']();}['switchToEditMode'](){this['isEditMode']||(this['isEditMode']=!0x0,this['visibleView']['remove'](0x0)['destroy'](),this['visibleView']['add'](this['_createCommentInputView']()));}['switchToDisplayMode'](){this['isEditMode']&&(this['isEditMode']=!0x1,this['visibleView']['remove'](0x0)['destroy'](),this['visibleView']['add'](this['_createCommentContentView']()));}['getExternalCommentNote'](){return'importWord'===this['_model']['attributes']['@external']['source']?E(this['locale'],'EXTERNAL_IMPORT_WORD_COMMENT'):E(this['locale'],'EXTERNAL_COMMENT');}['getUserViewNotificationText'](){return this['_model']['isExternal']?'importWord'===this['_model']['attributes']['@external']['source']?E(this['locale'],'EXTERNAL_IMPORT_WORD_AVATAR',this['_model']['creator']['name']):E(this['locale'],'EXTERNAL_AVATAR',this['_model']['creator']['name']):null;}['_createCommentContentView'](){const _0x123fc5=new es(this['locale']);return _0x123fc5['bind']('content')['to'](this['_model'],'content',this,'isCollapsed',(_0x16984b,_0x3f68ab)=>_0x3f68ab?_0x544f82(_0x16984b,{'limit':this['_config']['maxCommentCharsWhenCollapsed']}):_0x16984b),_0x123fc5;}['_createCommentInputView'](){this['_config']['editorConfig']||(this['_config']['editorConfig']={}),this['_config']['editorConfig']['initialData']=this['_model']['content'];const _0x833d43=new os(this['locale'],this['_config']['editorConfig']);return _0x833d43['value']=this['_model']['content'],_0x833d43['bind']('disabledSubmit')['to'](this['_model'],'isReadOnly'),_0x833d43['submitLabel']=E(this['locale'],'Save'),_0x833d43['on']('submit',(_0x2b912b,_0xbd66a5)=>{this['fire']('updateComment',this['_model']['id'],_0xbd66a5),this['switchToDisplayMode'](),this['focus']();}),_0x833d43['on']('cancel',()=>{this['switchToDisplayMode'](),this['focus']();}),_0x833d43['once']('editorReady',()=>{_0x833d43['focus']();}),_0x833d43['createEditor'](),_0x833d43['delegate']('editorReady')['to'](this),_0x833d43['delegate']('editorDestroyed')['to'](this),_0x833d43;}['_setupKeyboardNavigation'](){const _0x47d8c6=this['element'];this['keystrokes']['listenTo'](_0x47d8c6);for(const _0x4cabc9 of this['focusables'])this['focusTracker']['add'](_0x4cabc9['element']),this['keystrokes']['listenTo'](_0x4cabc9['element']);this['focusables']['on']('change',(_0x55371d,_0x507900)=>{for(const _0x519990 of _0x507900['removed'])this['focusTracker']['remove'](_0x519990['element']),this['keystrokes']['stopListening'](_0x519990['element']);for(const _0x2dca2c of _0x507900['added'])this['focusTracker']['add'](_0x2dca2c['element']),this['keystrokes']['listenTo'](_0x2dca2c['element']);}),this['keystrokes']['set']('enter',(_0xaf3dc0,_0x124837)=>{_0x47d8c6===_0xaf3dc0['target']&&(this['focusCycler']['focusFirst'](),_0x124837());}),this['keystrokes']['set']('esc',(_0x3f4c3e,_0x2a53c6)=>{_0x47d8c6!==_0x3f4c3e['target']&&(this['focus'](),_0x2a53c6());});}}class gt extends/* #__PURE__ -- @preserve */
ti(hs){['actionBar'];['userView'];constructor(_0x255761,_0xd50d10,_0x6a26ab){super(_0x255761,_0xd50d10,_0x6a26ab),this['set']('actionIndicator',null),this['set']('placeholder',E(_0x255761,'Reply...')),this['bind']('authoredAt')['to'](_0xd50d10),this['bind']('resolvedAt')['to'](_0xd50d10),this['actionBar']=this['createCollection'](),this['isSystemComment']||(this['editButton']=this['_createEditButton'](),this['removeButton']=this['_createRemoveButton'](),this['items']=this['createCollection'](),this['items']['addMany']([this['editButton'],this['removeButton']]),this['dropdown']=this['_createDropdown'](),this['actionBar']['add'](this['dropdown']),this['focusables']['add'](this['dropdown'])),this['userView']=new _0x446abc(_0x255761,_0xd50d10['author'],this['getUserViewNotificationText']()),this['userView']['extendTemplate']({'attributes':{'class':['ck-comment__user','ck-annotation__user'],'aria-hidden':!0x0}}),this['listenTo'](_0xd50d10,'change:isRemovable',()=>this['cancelConfirm']()),this['setTemplate'](this['getTemplate']());}['getTemplate'](){const _0x377234=this['bindTemplate'],_0x40d391=[{'tag':'div','attributes':{'class':['ck-comment__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-comment__info-name','ck-annotation__info-name'],'data-cke-tooltip-text':this['userView']['name']}},{'tag':'time','attributes':{'datetime':_0x377234['to']('authoredAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x377234['to']('authoredAt',_0x238b57=>this['_config']['formatDateTime'](_0x238b57))}]}]},{'tag':'div','attributes':{'class':['ck-comment__actions','ck-annotation__actions',_0x377234['if']('isEditMode','ck-comment__actions--hidden'),_0x377234['if']('isEditMode','ck-annotation__actions--hidden')]},'children':this['actionBar']},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']},'children':this['visibleView']},this['ariaDescriptionView']];return this['_model']['isExternal']&&_0x40d391['push']({'tag':'div','attributes':{'class':['ck-comment__external']},'children':[{'text':this['getExternalCommentNote']()}]}),{'tag':'li','attributes':{'class':['ck-comment__wrapper',_0x377234['if']('isConfirm','ck-comment--remove-confirmation')],'tabindex':-0x1,'aria-label':_0x377234['to']('ariaLabel'),'aria-describedby':this['ariaDescriptionView']['id'],'role':'listitem'},'children':[{'tag':'div','attributes':{'class':['ck-comment','ck-annotation',_0x377234['if']('isEditMode','ck-comment--edit'),_0x377234['if']('isSystemComment','ck-comment--info'),_0x377234['to']('actionIndicator',_0x578d78=>_0x578d78?'ck-comment--'+_0x578d78:'')],'data-author-id':this['_model']['author']['id'],'data-comment-id':this['_model']['id'],'role':'group'},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-comment__main','ck-annotation__main']},'children':_0x40d391}]}]};}['_createEditButton'](){const _0x446f47=new _0x1771fd(this['locale']);return _0x446f47['label']=E(this['locale'],'Edit'),_0x446f47['icon']=_0x2f53ff,_0x446f47['withText']=!0x0,_0x446f47['extendTemplate']({'attributes':{'class':'ck-comment--edit'}}),_0x446f47['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x5aa867=>!_0x5aa867),_0x446f47['bind']('isVisible')['to'](this['_model'],'isEditable'),_0x446f47['on']('execute',()=>this['switchToEditMode']()),_0x446f47;}['_createRemoveButton'](){const _0x28122c=new _0x1771fd(this['locale']);return _0x28122c['label']=E(this['locale'],'Remove'),_0x28122c['icon']=_0x60aad3,_0x28122c['withText']=!0x0,_0x28122c['extendTemplate']({'attributes':{'class':'ck-comment--remove'}}),_0x28122c['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x553603=>!_0x553603),_0x28122c['bind']('isVisible')['to'](this['_model'],'isRemovable'),_0x28122c['on']('execute',()=>{this['showConfirm'](E(this['locale'],'Delete\x20comment?'),this['element'])['then'](()=>{this['fire']('removeComment',this['_model']['id']);});}),_0x28122c;}['_createDropdown'](){const _0x45ce5d=_0x460aa3(this['locale'],_0x132e78),_0x3e052c=_0x45ce5d['panelView']['children'],_0x4939d6=new _0x5e966d(this['locale']),_0x1b449=_0x45ce5d['bindTemplate'];_0x4f4598(_0x45ce5d,()=>this['items']['find'](_0x184e13=>_0x184e13['isVisible'])),_0x45ce5d['extendTemplate']({'attributes':{'class':[_0x1b449['if']('isVisible','ck-hidden',_0x31b5de=>!_0x31b5de)]}});const _0x4c3a17=(_0x5ae380,_0x145a50=-0x1)=>{const _0x1dbc0d=new _0x14ff42(this['locale']);_0x1dbc0d['children']['add'](_0x5ae380);const _0xaff808=_0x145a50>-0x1?_0x145a50:_0x4939d6['items']['length'];_0x4939d6['items']['add'](_0x1dbc0d,_0xaff808);const _0x31ba6b=Array['from'](this['items']);_0x45ce5d['unbind']('isEnabled','isVisible'),_0x45ce5d['bind']('isEnabled')['toMany'](_0x31ba6b,'isEnabled',(..._0x51dd12)=>_0x51dd12['some'](_0x1da1bc=>_0x1da1bc)),_0x45ce5d['bind']('isVisible')['toMany'](_0x31ba6b,'isVisible',(..._0x5fcfa9)=>_0x5fcfa9['some'](_0x3b206b=>_0x3b206b));};_0x45ce5d['panelPosition']='sw',_0x45ce5d['buttonView']['set']({'label':E(this['locale'],'Show\x20more\x20items'),'icon':_0x53a6f9});for(const _0x1ef482 of this['items'])_0x4c3a17(_0x1ef482);return _0x3e052c['add'](_0x4939d6),_0x45ce5d['listenTo'](this['items'],'add',(_0xc51f79,_0x2d0678,_0x51c7fa)=>{_0x4c3a17(_0x2d0678,_0x51c7fa);}),_0x45ce5d['listenTo'](this['items'],'remove',(_0x42c9d2,_0x47eb28,_0x4a75cd)=>{_0x4939d6['items']['remove'](_0x4a75cd);}),_0x45ce5d;}['_attachActions'](_0x118f4c,_0x2d16b6){const _0x31461b=_0x118f4c&&_0x118f4c['element'];_0x31461b&&(this['listenTo'](_0x31461b,'mouseenter',()=>this['actionIndicator']=_0x2d16b6),this['listenTo'](_0x31461b,'focus',()=>this['actionIndicator']=_0x2d16b6),this['listenTo'](_0x31461b,'mouseleave',()=>this['actionIndicator']=null),this['listenTo'](_0x31461b,'blur',()=>this['actionIndicator']=null));}['_createCommentInputView'](){const _0x57b340=super['_createCommentInputView']();return _0x57b340['bind']('placeholder')['to'](this),_0x57b340;}['render'](){super['render'](),this['_attachActions'](this['editButton'],'edit'),this['_attachActions'](this['removeButton'],'remove');}}function Lt(_0x2ccc1a){const _0x22fdcd=Dt(_0x2ccc1a,0x1e),_0x5e74ce=new MutationObserver(_0x19cae4=>{for(const _0x1061b1 of _0x19cae4)('attributes'==_0x1061b1['type']&&'class'==_0x1061b1['attributeName']||'childList'==_0x1061b1['type']||'characterData'==_0x1061b1['type'])&&_0x22fdcd();});return{'attach'(_0x3e9821){_0x5e74ce['observe'](_0x3e9821,{'attributes':!0x0,'childList':!0x0,'subtree':!0x0,'characterData':!0x0});},'detach'(){_0x5e74ce['disconnect'](),_0x22fdcd['cancel']();}};}class S extends kt{['focusTracker'];['id'];['keystrokes'];['content'];['mainView'];['_mutationObserver'];constructor(_0x3e3577,_0x2792f8){super(_0x3e3577),this['id']=_0x3c82ec(),this['focusTracker']=new _0x511525(),this['keystrokes']=new jt(),this['keystrokes']['set']('Esc',(_0x4f7fa1,_0x24017f)=>this['fire']('Esc',_0x24017f)),this['set']('targetRect',{'top':0x0,'right':0x0,'bottom':0x0,'left':0x0}),this['set']('height',0x0),this['set']('isActive',!0x1),this['set']('isDirty',!0x1),this['set']('length',0x0),this['set']('type',''),this['_mutationObserver']=Lt(()=>this['_updateHeight']()),this['content']=this['createCollection'](),this['content']['delegate']('arrowup','arrowdown')['to'](this),this['content']['add'](_0x2792f8),this['mainView']=_0x2792f8;const _0x53b7b9=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-annotation-wrapper','ck-rounded-corners',_0x53b7b9['if']('isActive','ck-annotation-wrapper--active')],'role':'presentation'},'children':this['content']});}['render'](){super['render'](),this['focusTracker']['add'](this['element']),this['keystrokes']['listenTo'](this['element']),this['_mutationObserver']['attach'](this['element']);}['destroy'](){this['content']['clear'](),this['keystrokes']['destroy'](),this['focusTracker']['destroy'](),this['_mutationObserver']['detach'](),super['destroy']();}['focus'](){this['content']['first']&&this['content']['first']['focus']();}['_updateHeight'](){const _0x46d725=this['element']['clientHeight'];_0x46d725&&(this['height']=_0x46d725);}}class d extends/* #__PURE__ -- @preserve */
_0x403689(){['view'];['focusableElements'];['_type'];['_target'];constructor({view:_0x1696cb,target:_0x286ee2,type:_0x3d4208,isVisible:_0x178915=!0x0}){super(),this['view']=_0x1696cb,this['view']['element']||this['view']['render'](),this['_type']=_0x3d4208,this['_target']=_0x286ee2,d['_assertCorrectTarget'](this['_getNormalizedTarget']()),this['focusableElements']=new _0xa8856a([this['view']['element']],{'idProperty':'_id'}),this['focusableElements']['on']('add',(_0x3386c3,_0xdec42e)=>{this['view']['focusTracker']['add'](_0xdec42e);}),this['focusableElements']['on']('remove',(_0x2488a2,_0x4198f4)=>{this['view']['focusTracker']['remove'](_0x4198f4);}),this['set']('isVisible',_0x178915);}get['type'](){return'function'==typeof this['_type']?this['_type']():this['_type'];}get['innerView'](){return this['view']['mainView'];}get['target'](){const _0x2209a1=this['_getNormalizedTarget']();return d['_assertCorrectTarget'](_0x2209a1),_0x2209a1;}get['targetRect'](){const _0x327840=this['target'];if(null===_0x327840)return null;if(_0x327840 instanceof _0x2c2db3)return _0x327840;const _0x4a6667=_0x327840['filter'](_0x1662e7=>function(_0x5cd71b){const _0x4b95ec=_0x5cd71b['offsetParent'];if(_0x4b95ec)return!0x0;const _0x3517d1=_0x5cd71b['getClientRects']()['item'](0x0);return!!_0x3517d1;}(_0x1662e7));return 0x0===_0x4a6667['length']?null:new _0x2c2db3(_0x4a6667[0x0]['getClientRects']()['item'](0x0));}get['isActive'](){return this['view']['isActive'];}set['isActive'](_0x541a40){this['view']['isActive']=_0x541a40,this['view']['mainView']['isActive']=_0x541a40;}['updateTargetRect'](){this['view']['targetRect']=this['targetRect'];}['destroy'](){this['focusableElements']['stopListening'](),this['focusableElements']['clear'](),this['stopListening']();}['refreshVisibility'](){this['isVisible']=!!this['targetRect'];}static['_assertCorrectTarget'](_0x39201f){if(!(null===_0x39201f||_0x39201f instanceof _0x2c2db3||Array['isArray'](_0x39201f)&&_0x39201f['every'](_0x361359=>li(_0x361359))))throw new _0x130424('annotation-invalid-target',null,{'target':_0x39201f});}['_getNormalizedTarget'](){const _0x546368='function'==typeof this['_target']?this['_target']():this['_target'];return li(_0x546368)?[_0x546368]:_0x546368;}}function li(_0x24a568){return null!==_0x24a568&&'object'==typeof _0x24a568&&'nodeType'in _0x24a568&&0x1===_0x24a568['nodeType'];}class _ extends _0xa8856a{['_innerViewToAnnotation'];['_viewToAnnotation'];['_focusTracker'];constructor(_0x2a3a2a=[]){super(),this['_innerViewToAnnotation']=new Map(),this['_viewToAnnotation']=new Map(),this['_focusTracker']=new _0x511525(),this['_focusTracker']['on']('change:isFocused',(_0x1198f4,_0x572160,_0x45bbe0)=>{_0x45bbe0||this['fire']('blur');});for(const _0x366904 of _0x2a3a2a)this['add'](_0x366904);}get['isFocused'](){return this['_focusTracker']['isFocused'];}['add'](_0xccebf3){if(this['has'](_0xccebf3))throw new _0x130424('annotationcollection-duplicated-item',null);this['_innerViewToAnnotation']['set'](_0xccebf3['innerView'],_0xccebf3),this['_viewToAnnotation']['set'](_0xccebf3['view'],_0xccebf3);for(const _0x2cc535 of _0xccebf3['focusableElements'])this['_focusTracker']['add'](_0x2cc535);this['listenTo'](_0xccebf3['focusableElements'],'add',(_0x2ed570,_0x551ff4)=>{this['_focusTracker']['add'](_0x551ff4);}),this['listenTo'](_0xccebf3['focusableElements'],'remove',(_0x2291e7,_0x33e28b)=>{this['_focusTracker']['remove'](_0x33e28b);}),this['listenTo'](_0xccebf3['view']['focusTracker'],'change:isFocused',(_0x493cb2,_0x51a771,_0x539e79)=>{_0x539e79&&this['fire']('focus',_0xccebf3);}),_0xccebf3['updateTargetRect']();const _0x5e03b5=this['_getOrderInContent'](_0xccebf3['view']['targetRect']);return super['add'](_0xccebf3,_0x5e03b5);}['remove'](_0x7ad181){if(!this['has'](_0x7ad181))throw new _0x130424('annotationcollection-not-existing-item',null);this['stopListening'](_0x7ad181['view']['focusTracker']),this['stopListening'](_0x7ad181['focusableElements']);for(const _0x50ac90 of _0x7ad181['focusableElements'])this['_focusTracker']['remove'](_0x50ac90);return this['_viewToAnnotation']['delete'](_0x7ad181['view']),this['_innerViewToAnnotation']['delete'](_0x7ad181['innerView']),super['remove'](_0x7ad181);}['getByInnerView'](_0x190928){return this['_innerViewToAnnotation']['get'](_0x190928);}['getByView'](_0x1aa6a9){return this['_viewToAnnotation']['get'](_0x1aa6a9);}['destroy'](){super['clear'](),this['stopListening'](),this['_innerViewToAnnotation']['clear'](),this['_viewToAnnotation']['clear'](),this['_focusTracker']['destroy']();}['refreshPositioning'](){for(const _0x56d683 of this)_0x56d683['updateTargetRect']();this['_sort']();}['_sort'](){const _0x48e31b=Array['from'](this)['sort']((_0x3ee542,_0x8ff9d1)=>v(_0x3ee542['view']['targetRect'],_0x8ff9d1['view']['targetRect']));for(let _0x306b9e=_0x48e31b['length']-0x1;_0x306b9e>0x0;_0x306b9e--){const _0x8e4577=_0x48e31b[_0x306b9e];_0x306b9e!==this['getIndex'](_0x8e4577)&&(this['remove'](_0x8e4577),this['add'](_0x8e4577));}}['_getOrderInContent'](_0x275634){let _0x43bff8=0x0;if(!_0x275634)return this['length'];for(const _0x1a23a6 of this){const _0x22ad95=_0x1a23a6['view']['targetRect'];if(_0x22ad95){if(v(_0x275634,_0x22ad95)<0x0)return _0x43bff8;_0x43bff8++;}}return _0x43bff8;}}function v(_0x42a663,_0x6439ba){if(null===_0x42a663&&null===_0x6439ba)return 0x0;if(null===_0x42a663)return-0x1;if(null===_0x6439ba)return 0x1;const _0x45b0a3=_0x42a663['top']-_0x6439ba['top'];return 0x0==_0x45b0a3?_0x42a663['left']-_0x6439ba['left']:_0x45b0a3;}class O extends _0x23967a{['collection'];['_visibleAnnotations'];static get['pluginName'](){return'Annotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x2c2ca9){if(super(_0x2c2ca9),this['collection']=new _(),this['_visibleAnnotations']=new _(),this['set']('activeAnnotations',new Set()),this['_bindAnnotationsToVisibleAnnotations'](),_0x2c2ca9 instanceof _0x15aed6){const _0x3db2e1=_0x2c2ca9['locale'];_0x2c2ca9['accessibility']['addKeystrokeInfoGroup']({'id':'annotations','label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP'),'keystrokes':[{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO'),'keystroke':'Ctrl+Shift+E'},{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT'),'keystroke':'Esc'},{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER'),'keystroke':'Enter'},{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS'),'keystroke':[['Tab'],['Shift+Tab']]},{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT'),'keystroke':['Ctrl+Enter']},{'label':E(_0x3db2e1,'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS'),'keystroke':[['Arrowup'],['Arrowdown']]}]});}this['_setupEnterAnnotationKeystroke'](),this['_setupEscapeAnnotationHandling']();}['add'](_0x1c5a71){this['collection']['add'](_0x1c5a71);}['remove'](_0x52e1d5){this['collection']['remove'](_0x52e1d5),_0x52e1d5['destroy']();}['refreshVisibility'](){for(const _0x1a127f of this['collection'])_0x1a127f['refreshVisibility']();}['refreshPositioning'](){this['_visibleAnnotations']['refreshPositioning']();}['getByInnerView'](_0x98c990){return this['collection']['getByInnerView'](_0x98c990);}['deactivateAll'](){this['fire']('_deactivateAllAnnotations');}['destroy'](){for(const _0x5257ff of this['collection'])_0x5257ff['destroy']();this['_visibleAnnotations']['destroy'](),this['collection']['destroy'](),super['destroy']();}['activate'](_0x2bfa3b){this['fire']('_activateAnnotation',_0x2bfa3b);}['createAnnotation'](_0x548c68){return new d(_0x548c68);}['createAnnotationView'](_0x5170be,_0x5201dc){return new S(_0x5170be,_0x5201dc);}['_addActiveAnnotation'](_0x3fe903){const _0x117085=new Set(this['activeAnnotations']);_0x117085['add'](_0x3fe903),this['activeAnnotations']=_0x117085;}['_removeActiveAnnotation'](_0x5255ee){const _0x7b5ecb=new Set(this['activeAnnotations']);_0x7b5ecb['delete'](_0x5255ee),this['activeAnnotations']=_0x7b5ecb;}['_bindAnnotationsToVisibleAnnotations'](){const _0x1a303a=this['collection'],_0x855ddd=this['_visibleAnnotations'];function _0x48b8f3(_0x59666a){const _0x33f765=_0x59666a['source'];_0x33f765['isVisible']&&!_0x855ddd['has'](_0x33f765)?_0x855ddd['add'](_0x33f765):!_0x33f765['isVisible']&&_0x855ddd['has'](_0x33f765)&&_0x855ddd['remove'](_0x33f765),_0x33f765['view']['focusTracker']['remove'](_0x33f765['view']['element']),_0x33f765['view']['focusTracker']['add'](_0x33f765['view']['element']);}this['listenTo'](_0x1a303a,'add',(_0x48f284,_0x4197d1)=>{_0x4197d1['isVisible']&&_0x855ddd['add'](_0x4197d1),this['listenTo'](_0x4197d1,'change:isVisible',_0x48b8f3);}),this['listenTo'](_0x1a303a,'remove',(_0x58c9fc,_0x17fb2d)=>{_0x855ddd['has'](_0x17fb2d)&&_0x855ddd['remove'](_0x17fb2d),this['stopListening'](_0x17fb2d,'change:isVisible',_0x48b8f3);});}['_setupEnterAnnotationKeystroke'](){const _0x4124b4=_0x406863=>{_0x406863['on']('ready',()=>{_0x406863['keystrokes']['set'](_0x3f9849,(_0x4fdf97,_0x275ce3)=>{const _0x4cf6b7=_0x3928b3(this['activeAnnotations']['values']());_0x4cf6b7&&(_0x4cf6b7['view']['focus'](),_0x275ce3());});});};this['context']instanceof _0x15aed6?_0x4124b4(this['context']):this['context']['editors']&&this['context']['editors']['on']('add',(_0x39cacd,_0x14568a)=>{_0x4124b4(_0x14568a);});}['_setupEscapeAnnotationHandling'](){const _0x2d2123=_0x223d52=>{const _0x187575=_0x223d52['source'],_0x4b130a=[];let _0x45c66a;if(Array['isArray'](_0x187575['target'])){_0x45c66a=_0x187575['target'][0x0],this['context']instanceof _0x15aed6?_0x4b130a['push'](this['context']):this['context']['editors']&&_0x4b130a['push'](...this['context']['editors']);for(const _0x296700 of _0x4b130a)for(const _0x7b1007 of _0x296700['editing']['view']['domRoots']['values']())if(_0x7b1007['contains'](_0x45c66a))return void _0x296700['editing']['view']['focus']();_0x45c66a['focus']();}};this['listenTo'](this['collection'],'add',(_0x200c7f,_0x43d839)=>{this['listenTo'](_0x43d839,'escape',_0x2d2123,{'priority':'low'});}),this['listenTo'](this['collection'],'remove',(_0x513f14,_0x3bfa61)=>{this['stopListening'](_0x3bfa61,'escape',_0x2d2123);});}}const Tt=Symbol('noChannel'),_t={'admin':!0x0,'modifyAll':!0x1,'write':!0x0,'resolve':!0x0};class o extends _0x23967a{['_threads'];['_threadToController'];['_viewToController'];static get['requires'](){return[O,ht,it];}static get['pluginName'](){return'CommentsRepository';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x10e598){super(_0x10e598),this['_threads']=new Map(),this['_threadToController']=new Map(),this['_viewToController']=new Map(),this['set']('_readOnlyChannels',new Set()),this['set']('_permissions',new Map());const _0x4a5a35=this['context']['config'];_0x4a5a35['define']('comments.maxCommentsWhenCollapsed',0x2),_0x4a5a35['define']('comments.maxThreadTotalWeight',0x1f4),_0x4a5a35['define']('comments.maxCommentCharsWhenCollapsed',0x8c),_0x4a5a35['define']('comments.CommentThreadView',vt),_0x4a5a35['define']('comments.CommentView',gt),_0x4a5a35['get']('comments.editorConfig')||console['warn']('Missing\x20comments\x20editor\x20configuration\x20(`comments.editorConfig`).\x20Default\x20configuration\x20will\x20be\x20used\x20instead.');}['init'](){const _0x2de15c=this['context']['plugins']['get'](O);this['set']('activeCommentThread',null),this['on']('addCommentThread',(_0x43fb5d,_0x7695f4)=>this['_addCommentThread'](_0x7695f4)),this['on']('submitCommentThread',(_0x7a9d11,_0x3f9f71)=>this['_submitCommentThread'](_0x3f9f71)),this['on']('resolveCommentThread',(_0x16d46b,_0x254ba1)=>this['_resolveCommentThread'](_0x254ba1)),this['on']('resolveCommentThread',(_0x279a6d,_0x369fa2)=>this['_updateActiveAnnotation'](_0x369fa2),{'priority':'lowest'}),this['on']('reopenCommentThread',(_0x1aff24,_0x4382f8)=>this['_reopenCommentThread'](_0x4382f8)),this['on']('reopenCommentThread',(_0x176ea6,_0x565d76)=>this['_updateActiveAnnotation'](_0x565d76),{'priority':'lowest'}),this['on']('removeCommentThread',(_0x290d0c,_0x914785)=>this['_removeCommentThread'](_0x914785)),this['on']('updateCommentThread',(_0x453ad5,_0x2fef96)=>this['_updateCommentThread'](_0x2fef96)),this['on']('updateCommentThread',(_0x3a117e,_0x118d61)=>this['_updateActiveAnnotation'](_0x118d61),{'priority':'lowest'}),this['on']('addComment',(_0x351429,_0x20ed33)=>this['_addComment'](_0x20ed33)),this['on']('updateComment',(_0xfd357e,_0x58f6ec)=>this['_updateComment'](_0x58f6ec)),this['on']('removeComment',(_0x74d2c0,_0x51af30)=>this['_removeComment'](_0x51af30)),this['on']('addComment',(_0x8ac5f8,{threadId:_0x2df791,isFromAdapter:_0x38600a})=>{if(_0x38600a)return;const _0x30fbe8=this['getCommentThread'](_0x2df791),_0x14920c=_0x30fbe8&&this['_threadToController']['get'](_0x30fbe8);_0x14920c&&_0x14920c['view']['commentsListView']['focus'](-0x1);},{'priority':'lowest'}),this['listenTo'](_0x2de15c,'change:activeAnnotations',(_0x30babe,_0x522dcb,_0x205c95)=>{const _0x51951d=Array['from'](_0x205c95)['map'](_0x51434e=>this['_viewToController']['get'](_0x51434e['innerView']))['filter'](Boolean)[0x0];this['activeCommentThread']=_0x51951d?_0x51951d['model']:null;});}set['adapter'](_0x2eb88a){if(this['_adapter'])throw new _0x130424('commentsrepository-adapter-already-set');this['_adapter']=_0x2eb88a;}get['adapter'](){return this['_adapter'];}['addCommentThread']({channelId:_0x16cafc=Tt,threadId:_0x342ca0=_0x3c82ec(),comments:_0x5c778b=[],unlinkedAt:_0x3b31fc=null,resolvedAt:_0x5909e5=null,resolvedBy:_0x13db1f=null,target:_0x20b8f7=null,context:_0x2b8838=null,attributes:_0x412cd1={},isResolvable:_0x52d6f0=!0x0,isSubmitted:_0x540a61=!0x1,isFromAdapter:_0x1b3bc5=!0x1}={}){return this['fire'](bt('addCommentThread',_0x16cafc),{'channelId':_0x16cafc,'threadId':_0x342ca0,'comments':_0x5c778b,'unlinkedAt':_0x3b31fc,'resolvedAt':_0x5909e5,'resolvedBy':_0x13db1f,'target':_0x20b8f7,'context':_0x2b8838,'attributes':_0x412cd1,'isFromAdapter':_0x1b3bc5,'isResolvable':_0x52d6f0,'isSubmitted':_0x540a61}),this['getCommentThread'](_0x342ca0);}['openNewCommentThread']({channelId:_0x285712=Tt,threadId:_0x529f3a=_0x3c82ec(),target:_0x2c30b6,context:_0x19f494=null,isResolvable:_0x2ebe40=!0x0}){if(this['_readOnlyChannels']['has'](_0x285712)||this['_readOnlyChannels']['has'](void 0x0))return null;if(!_0x2c30b6)throw new _0x130424('commentsrepository-missing-target');const _0x4ab1b0=this['addCommentThread']({'channelId':_0x285712,'threadId':_0x529f3a,'target':_0x2c30b6,'context':_0x19f494,'isResolvable':_0x2ebe40});if(!_0x4ab1b0)return null;const _0x55f9d6=this['_threadToController']['get'](_0x4ab1b0),_0x1377a2=_0x55f9d6['view']['commentThreadInputView']['commentInputView'],_0x1de603=this['context']['plugins']['get'](O),_0x5b3f8e=_0x1de603['getByInnerView'](_0x55f9d6['view']);return _0x1de603['activate'](_0x5b3f8e),_0x1377a2['once']('editorReady',()=>_0x1377a2['focus']()),_0x4ab1b0;}['hasCommentThread'](_0x476158){if('string'!=typeof _0x476158)throw new _0x130424('commentsrepository-invalid-comment-thread-id');return this['_threads']['has'](_0x476158);}['updateCommentThread']({channelId:_0x37028a=Tt,threadId:_0x21daf0,context:_0x3954a3,unlinkedAt:_0x23aab5,attributes:_0x460518,isFromAdapter:_0x3f103c=!0x1}){return this['fire'](bt('updateCommentThread',_0x37028a),{'channelId':_0x37028a,'threadId':_0x21daf0,'context':_0x3954a3,'unlinkedAt':_0x23aab5,'attributes':_0x460518,'isFromAdapter':_0x3f103c}),this['getCommentThread'](_0x21daf0);}['getCommentThread'](_0x582797){if('string'!=typeof _0x582797)throw new _0x130424('commentsrepository-invalid-comment-thread-id');return this['_threads']['get'](_0x582797);}['fetchCommentThread']({channelId:_0x280b9f,threadId:_0x1983e7}={}){const _0x4171ab=this['getCommentThread'](_0x1983e7);if(_0x4171ab)return Promise['resolve'](_0x4171ab);if(!this['adapter'])return Promise['resolve'](void 0x0);if('function'!=typeof this['adapter']['getCommentThread'])throw new _0x130424('commentsrepository-missing-thread-and-adapter-method',this['context']);return this['adapter']['getCommentThread']({'channelId':_0x280b9f,'threadId':_0x1983e7})['then'](_0x4ed1dd=>this['hasCommentThread'](_0x1983e7)?this['getCommentThread'](_0x1983e7):_0x4ed1dd?this['addCommentThread'](Object['assign']({'isFromAdapter':!0x0,'channelId':_0x280b9f},_0x4ed1dd)):void 0x0)['catch'](_0x577c37=>{throw console['error'](_0x577c37),new _0x130424('commentsrepository-fetch-comment-thread',this['context']);});}['getCommentThreads']({channelId:_0x3b8499,skipNotAttached:_0x23ac1f=!0x1,skipEmpty:_0x1b3dc2=!0x1,toJSON:_0x1b0285=!0x1}={}){const _0x16556e=[];for(const _0x30aacc of this['_threads']['values']())_0x3b8499&&_0x30aacc['channelId']!==_0x3b8499||_0x23ac1f&&!_0x30aacc['isAttached']||_0x1b3dc2&&0x0===_0x30aacc['length']||_0x16556e['push'](_0x30aacc);return _0x1b0285?_0x16556e['map'](_0x4b0ab1=>_0x4b0ab1['toJSON']()):_0x16556e;}['setActiveCommentThread'](_0x5f1108){const _0x5b7cd6=this['context']['plugins']['get'](O);if(!_0x5f1108)return void(this['activeCommentThread']&&_0x5b7cd6['deactivateAll']());const _0x18f953=this['getCommentThread'](_0x5f1108);if(!_0x18f953)throw new _0x130424('commentsrepository-active-missing-comment-thread',null,{'threadId':_0x5f1108});if(!this['_threadToController']['has'](_0x18f953))throw new _0x130424('commentsrepository-active-not-attached',null,{'threadId':_0x5f1108});const _0x4c0bb8=_0x5b7cd6['getByInnerView'](this['_threadToController']['get'](_0x18f953)['view']);_0x5b7cd6['activate'](_0x4c0bb8);}['switchReadOnly'](_0x984eaa,_0x36bfbc){_0x984eaa?this['_readOnlyChannels']['add'](_0x36bfbc):this['_readOnlyChannels']['delete'](_0x36bfbc),this['fire']('change:_readOnlyChannels','_readOnlyChannels',this['_readOnlyChannels'],this['_readOnlyChannels']);}['isReadOnly'](_0x172b0a){return this['_readOnlyChannels']['has'](_0x172b0a)||this['_readOnlyChannels']['has'](void 0x0);}['createCommentThreadController'](_0x907d69,_0x237726){return new Ct(_0x907d69,_0x237726);}['setPermissions'](_0x336630,_0x5a98c0=Tt){this['_permissions']['set'](_0x5a98c0,_0x336630),this['fire']('change:_permissions','_permissions',this['_permissions'],this['_permissions']);}['getPermissions'](_0x458b51=Tt){return this['_permissions']['has'](_0x458b51)?this['_permissions']['get'](_0x458b51):_t;}['_addCommentThread']({channelId:_0x22c7cb,threadId:_0x277e54,comments:_0x547c0c,unlinkedAt:_0x215542,resolvedAt:_0x5cda9c,resolvedBy:_0x53e07e,target:_0x310771,context:_0x4bdd0a,attributes:_0x304aec,isFromAdapter:_0xc6e493,isResolvable:_0x132947,isSubmitted:_0x5daab1}){if('string'!=typeof _0x277e54)throw new _0x130424('commentsrepository-invalid-comment-thread-id',null,{'threadId':_0x277e54});if(this['hasCommentThread'](_0x277e54))throw new _0x130424('commentsrepository-duplicated-comment-thread-id',null,{'threadId':_0x277e54});const _0x216fbd=new ui(this,{'channelId':_0x22c7cb,'id':_0x277e54,'context':_0x4bdd0a,'attributes':_0x304aec,'unlinkedAt':_0x215542,'resolvedAt':_0x5cda9c,'resolvedBy':_0x53e07e?this['context']['plugins']['get'](it)['getUser'](_0x53e07e):null,'isResolvable':_0x132947,'isSubmitted':_0x5daab1||_0xc6e493});this['_threads']['set'](_0x277e54,_0x216fbd);for(const _0x2b5a5a of _0x547c0c)_0x216fbd['_add'](this['_createNewComment']({'threadId':_0x277e54,..._0x2b5a5a}));return _0x310771&&_0x216fbd['attachTo'](_0x310771),_0xc6e493||!_0x216fbd['length']?Promise['resolve']():this['_submitCommentThread']({'channelId':_0x22c7cb,'threadId':_0x277e54});}['_submitCommentThread']({channelId:_0x132b6a,threadId:_0xd3c6ac}){if(!this['hasCommentThread'](_0xd3c6ac))throw new _0x130424('commentsrepository-missing-comment-thread',this);const _0x182388=this['getCommentThread'](_0xd3c6ac);if(_0x182388['_isSubmitted']=!0x0,!this['adapter']||'function'!=typeof this['adapter']['addCommentThread'])return Promise['resolve']();const {id:_0x522dce,comments:_0x46f52b,resolvedAt:_0xb0af8b,resolvedBy:_0x2efd7b,context:_0x4e44e9,attributes:_0x36a1ae}=_0x182388,_0x39d2d0=this['context']['plugins']['get']('PendingActions'),_0x367026=_0x39d2d0['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['addCommentThread']({'channelId':_0x132b6a,'threadId':_0x522dce,'comments':_0x46f52b['map'](_0x1bd730=>_0x1bd730['toJSON']()),'resolvedAt':_0xb0af8b,'resolvedBy':_0x2efd7b?_0x2efd7b['id']:_0x2efd7b,'context':_0x4e44e9,'attributes':_0x36a1ae})['then'](({comments:_0x78348e})=>{_0x39d2d0['remove'](_0x367026);for(const _0x4c2521 of _0x78348e)this['_updateComment']({'channelId':_0x132b6a,'threadId':_0xd3c6ac,'commentId':_0x4c2521['commentId'],'createdAt':_0x4c2521['createdAt'],'isFromAdapter':!0x0});})['catch'](_0x447f5e=>{throw console['error'](_0x447f5e),new _0x130424('commentsrepository-add-comment-thread-internal-error',this);});}['_attachCommentThread']({threadId:_0x1a64a1,target:_0xa997fa}){const _0x42de80=this['getCommentThread'](_0x1a64a1);if(!_0x42de80)throw new _0x130424('commentsrepository-attach-missing-comment-thread',this);const _0x2242f7=this['context']['plugins']['get']('PendingActions'),_0xdbf69a=this['context']['plugins']['get'](O),_0x422254=this['_createCommentThreadView'](_0x42de80),_0x3381c0=new Ct(_0x42de80,_0x422254);let _0x102d2c=null;_0x422254['on']('change:isDirty',(_0x2fcb29,_0x406eec,_0x4e6d03)=>{_0x4e6d03?_0x102d2c=_0x2242f7['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD')):_0x102d2c&&(_0x2242f7['remove'](_0x102d2c),_0x102d2c=null);}),this['_threadToController']['set'](_0x42de80,_0x3381c0),this['_viewToController']['set'](_0x422254,_0x3381c0);const _0x4090e5=new S(this['context']['locale'],_0x422254);_0x4090e5['bind']('length')['to'](_0x422254),_0x4090e5['bind']('isDirty')['to'](_0x422254,'isDirty',_0x422254,'length',(_0x1012ca,_0xa03ac1)=>_0x1012ca||!_0xa03ac1),_0x4090e5['bind']('isActive')['to'](_0x422254),_0x4090e5['type']='comment';const _0x380dcc=new d({'view':_0x4090e5,'target':_0xa997fa,'type':'comment','isVisible':!_0x42de80['archivedAt']});return _0x422254['on']('escape',()=>{_0x380dcc['fire']('escape');}),this['_bindAnnotationToEditors'](_0x422254,_0x380dcc),_0xdbf69a['add'](_0x380dcc),_0x380dcc;}['_bindAnnotationToEditors'](_0x37fa64,_0x573004){this['listenTo'](_0x37fa64,'editorReady',(_0x269be9,_0x160a27)=>{const _0x597393=_0x160a27['ui']['view']['body']['bodyCollectionContainer'];_0x573004['focusableElements']['add'](_0x597393),this['context']instanceof _0x15aed6&&this['context']['ui']['focusTracker']['add'](_0x597393);},{'priority':'highest'}),this['listenTo'](_0x37fa64,'editorDestroyed',(_0x41e9bb,_0x4fdafd)=>{const _0x15d1be=_0x4fdafd['ui']['view']['body']['bodyCollectionContainer'];_0x573004['focusableElements']['has'](_0x15d1be)&&_0x573004['focusableElements']['remove'](_0x15d1be),this['context']instanceof _0x15aed6&&this['context']['ui']['focusTracker']['remove'](_0x15d1be);});}['_unbindEditors'](_0x10e394){this['stopListening'](_0x10e394,'editorReady'),this['stopListening'](_0x10e394,'editorDestroyed');}['_createCommentThreadView'](_0xc48545){const _0x198fa0=this['context']['plugins']['get'](it),{config:_0x24ac3a,locale:_0x54bda7}=this['context'],_0x123057=lt(_0x24ac3a['get']('locale'),_0x54bda7);return new(0x0,(_0x24ac3a['get']('comments'))['CommentThreadView'])(_0x54bda7,_0xc48545,_0x198fa0['me'],{'editorConfig':{..._0x24ac3a['get']('comments.editorConfig'),'licenseKey':this['context']['config']['get']('licenseKey')},'copyMarkers':_0x24ac3a['get']('comments.copyMarkers'),'maxCommentsWhenCollapsed':_0x24ac3a['get']('comments.maxCommentsWhenCollapsed'),'maxThreadTotalWeight':_0x24ac3a['get']('comments.maxThreadTotalWeight'),'maxCommentCharsWhenCollapsed':_0x24ac3a['get']('comments.maxCommentCharsWhenCollapsed'),'formatDateTime':_0x123057,'CommentView':_0x24ac3a['get']('comments')['CommentView']});}['_resolveCommentThread']({threadId:_0x5c0633,channelId:_0x4683d6,resolvedAt:_0x397283,resolvedBy:_0x6e15c3,isFromAdapter:_0xdd2629}){if(!this['hasCommentThread'](_0x5c0633))throw new _0x130424('commentsrepository-missing-comment-thread',null,{'threadId':_0x5c0633});const _0x28a2cd=this['getCommentThread'](_0x5c0633);if(_0x28a2cd['isResolved'])throw new _0x130424('commentsrepository-resolved-comment-thread',null,{'threadId':_0x5c0633});const _0x30b7df=this['context']['plugins']['get'](it);if(_0x28a2cd['resolvedBy']=_0x30b7df['getUser'](_0x6e15c3),_0x28a2cd['resolvedAt']=_0x397283,_0xdd2629||!this['adapter']||'function'!=typeof this['adapter']['resolveCommentThread'])return Promise['resolve']();const _0x4b7b8b=this['context']['plugins']['get']('PendingActions'),_0x520a5a=_0x4b7b8b['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['resolveCommentThread']({'channelId':_0x4683d6,'threadId':_0x5c0633})['then'](({resolvedAt:_0x16e59f,resolvedBy:_0x32984c})=>{_0x4b7b8b['remove'](_0x520a5a),_0x28a2cd['resolvedBy']['id']!==_0x32984c&&(_0x28a2cd['resolvedBy']=_0x30b7df['getUser'](_0x32984c)),_0x28a2cd['resolvedAt']=_0x16e59f;})['catch'](_0x5202a3=>{throw console['error'](_0x5202a3),new _0x130424('commentsrepository-resolve-comment-thread-internal-error',this);});}['_reopenCommentThread']({threadId:_0x2ce2bf,channelId:_0x4c2563,isFromAdapter:_0x41c52e}){if(!this['hasCommentThread'](_0x2ce2bf))throw new _0x130424('commentsrepository-missing-comment-thread',null,{'threadId':_0x2ce2bf});const _0x132685=this['getCommentThread'](_0x2ce2bf);if(!_0x132685['isResolved'])throw new _0x130424('commentsrepository-reopen-comment-thread',null,{'threadId':_0x2ce2bf});if(_0x132685['resolvedBy']=null,_0x132685['resolvedAt']=null,_0x41c52e||!this['adapter']||'function'!=typeof this['adapter']['reopenCommentThread'])return Promise['resolve']();const _0x1fd8dd=this['context']['plugins']['get']('PendingActions'),_0x1143f5=_0x1fd8dd['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['reopenCommentThread']({'channelId':_0x4c2563,'threadId':_0x2ce2bf})['then'](()=>_0x1fd8dd['remove'](_0x1143f5))['catch'](_0x11e73a=>{throw console['error'](_0x11e73a),new _0x130424('commentsrepository-reopen-comment-thread-internal-error',this);});}['_removeCommentThread']({threadId:_0x4b039e,isFromAdapter:_0x34db23}){const _0x258403=this['getCommentThread'](_0x4b039e);if(!_0x258403)throw new _0x130424('commentsrepository-remove-missing-comment-thread',this);if(this['_detachCommentThread'](_0x4b039e),this['_threads']['delete'](_0x4b039e),!_0x258403['isSubmitted']||_0x34db23||!this['adapter']||'function'!=typeof this['adapter']['removeCommentThread'])return Promise['resolve']();const _0x30dad7=this['context']['plugins']['get']('PendingActions'),{channelId:_0x47c347}=_0x258403,_0x25129f=_0x30dad7['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['removeCommentThread']({'channelId':_0x47c347,'threadId':_0x4b039e})['then'](()=>_0x30dad7['remove'](_0x25129f))['catch'](_0x41f334=>{throw console['error'](_0x41f334),new _0x130424('commentsrepository-remove-comment-thread-internal-error',this);});}['_updateCommentThread']({threadId:_0x119e01,unlinkedAt:_0x4ffddf,context:_0x3d536f,attributes:_0x6b59a3,isFromAdapter:_0x24202e}){if('string'!=typeof _0x119e01)throw new _0x130424('commentsrepository-invalid-comment-thread-id',null,{'threadId':_0x119e01});if(!this['hasCommentThread'](_0x119e01))throw new _0x130424('commentsrepository-missing-comment-thread',null,{'threadId':_0x119e01});const _0x3893cc=this['getCommentThread'](_0x119e01);let _0x48386e=!0x1;if(void 0x0!==_0x3d536f&&_0x3893cc['context']!==_0x3d536f&&(_0x3893cc['context']=_0x3d536f,_0x48386e=!0x0),void 0x0!==_0x4ffddf&&_0x3893cc['unlinkedAt']!==_0x4ffddf&&(_0x3893cc['unlinkedAt']=_0x4ffddf,_0x48386e=!0x0),_0x6b59a3&&!wt(_0x6b59a3,_0x3893cc['attributes'])&&(_0x3893cc['attributes']=_0x6b59a3,_0x48386e=!0x0),!_0x48386e)return Promise['resolve']();if(!_0x3893cc['isSubmitted']||_0x24202e||!this['adapter']||'function'!=typeof this['adapter']['updateCommentThread'])return Promise['resolve']();const _0xc36725=this['context']['plugins']['get']('PendingActions'),{channelId:_0x5c1696}=_0x3893cc,_0x249b70=_0xc36725['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['updateCommentThread']({'channelId':_0x5c1696,'threadId':_0x119e01,'context':_0x3d536f,'unlinkedAt':_0x4ffddf,'attributes':_0x6b59a3})['then'](()=>_0xc36725['remove'](_0x249b70))['catch'](_0xd41459=>{throw console['error'](_0xd41459),new _0x130424('commentsrepository-update-comment-thread-internal-error',this);});}['_detachCommentThread'](_0x20f6e7){const _0x51cad3=this['context']['plugins']['get'](O),_0xe7f74e=this['getCommentThread'](_0x20f6e7);if(_0xe7f74e['_isAttached']=!0x1,this['_threadToController']['has'](_0xe7f74e)){const _0x145483=this['_threadToController']['get'](_0xe7f74e),_0x2b4cb3=_0x145483['view'],_0x5dfe31=_0x51cad3['getByInnerView'](_0x2b4cb3);this['_threadToController']['delete'](_0xe7f74e),this['_viewToController']['delete'](_0x2b4cb3),_0x5dfe31&&_0x51cad3['remove'](_0x5dfe31),_0x145483['destroy'](),_0x2b4cb3['destroy']()['then'](()=>{this['_unbindEditors'](_0x2b4cb3);});}}['_updateActiveAnnotation']({threadId:_0x4dd1b0,resolvedAt:_0x518ec1,unlinkedAt:_0x2a1675}){const _0x15c6e1=!!_0x518ec1,_0x54f6f2=this['context']['plugins']['get'](O),_0x298c8a=this['getCommentThread'](_0x4dd1b0);if(this['_threadToController']['has'](_0x298c8a)){const _0x27f824=this['_threadToController']['get'](_0x298c8a)['view'],_0x5c6a40=_0x54f6f2['getByInnerView'](_0x27f824);_0x5c6a40&&(_0x15c6e1&&_0x54f6f2['_removeActiveAnnotation'](_0x5c6a40),_0x2a1675?_0x5c6a40['isVisible']=!0x1:_0x5c6a40['refreshVisibility']());}}['_getExternalAuthor'](_0x3c6218){const _0x489558=this['context']['plugins']['get'](it),_0xdde18e=pt('external:'+_0x3c6218),_0x3fa8d3=_0x489558['getUser'](_0xdde18e);return _0x3fa8d3||_0x489558['addUser']({'id':_0xdde18e,'name':_0x3c6218});}['_createNewComment']({threadId:_0x19f2c5,commentId:_0x4e8db3=_0x3c82ec(),content:_0x15d830,authorId:_0x2c011e,createdAt:_0x1a882b,attributes:_0x451f44}){if('string'!=typeof _0x4e8db3)throw new _0x130424('commentsrepository-invalid-commentid');if('string'!=typeof _0x2c011e)throw new _0x130424('commentsrepository-invalid-comment-authorid');if('string'!=typeof _0x15d830||!_0x15d830['trim']())throw new _0x130424('commentsrepository-invalid-comment-content');const _0x7891b4=this['context']['plugins']['get'](it)['getUser'](_0x2c011e);if(!_0x7891b4)throw new _0x130424('commentsrepository-add-comment-user-not-exists',null,{'authorId':_0x2c011e});let _0x5e1f04=null,_0x324e81=_0x1a882b;return _0x451f44?.['@external']&&(_0x5e1f04=this['_getExternalAuthor'](_0x451f44['@external']['authorName']),_0x324e81=new Date(_0x451f44['@external']['createdAt'])),new fi(this,{'threadId':_0x19f2c5,'id':_0x4e8db3,'author':_0x5e1f04||_0x7891b4,'creator':_0x7891b4,'content':_0x15d830,'createdAt':_0x1a882b,'authoredAt':_0x324e81,'attributes':_0x451f44});}['_addComment'](_0x363249){let {threadId:_0x518eef,content:_0x528782,attributes:_0x12050e,isFromAdapter:_0x3430fa}=_0x363249;const _0x3e5c5b=this['getCommentThread'](_0x363249['threadId']);if(!_0x3e5c5b)throw new _0x130424('commentsrepository-add-comment-to-missing-comment-thread',this);const _0x3d6deb=this['_createNewComment'](_0x363249),{id:_0x342d3b}=_0x3d6deb;if(_0x3e5c5b['_add'](_0x3d6deb),_0x3430fa||!this['adapter']||'function'!=typeof this['adapter']['addComment']||!_0x3e5c5b['isSubmitted'])return Promise['resolve']();const _0x26f0dc=this['context']['plugins']['get']('PendingActions'),{channelId:_0x4f4990}=_0x3e5c5b,_0x46f695=_0x26f0dc['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return _0x12050e||(_0x12050e={}),this['adapter']['addComment']({'channelId':_0x4f4990,'threadId':_0x518eef,'commentId':_0x342d3b,'content':_0x528782,'attributes':_0x12050e})['then'](_0x400039=>{_0x26f0dc['remove'](_0x46f695),_0x400039&&this['_updateComment']({'channelId':_0x4f4990,'threadId':_0x518eef,'commentId':_0x342d3b,'createdAt':_0x400039['createdAt'],'isFromAdapter':!0x0});})['catch'](_0x243116=>{throw console['error'](_0x243116),new _0x130424('commentsrepository-add-comment-internal-error',this);});}['_updateComment']({threadId:_0x5ec8c9,commentId:_0x1d0d78,content:_0x49ec2c,createdAt:_0x46cb95,attributes:_0x4b282a,isFromAdapter:_0x3ceff0}){if(void 0x0!==_0x49ec2c&&('string'!=typeof _0x49ec2c||!_0x49ec2c['trim']()['length']))throw new _0x130424('commentsrepository-update-comment-invalid-content');const _0x532cd0=this['getCommentThread'](_0x5ec8c9),_0x51f8c2=_0x532cd0['getComment'](_0x1d0d78);if(!_0x51f8c2)throw new _0x130424('commentsrepository-update-missing-comment',this);let _0x3f8d5d=!0x1;if(_0x49ec2c&&_0x49ec2c!==_0x51f8c2['content']&&(_0x51f8c2['isEditable']||_0x3ceff0)&&(_0x51f8c2['content']=_0x49ec2c,_0x3f8d5d=!0x0),_0x46cb95&&_0x46cb95!==_0x51f8c2['createdAt']&&(_0x51f8c2['createdAt']=_0x46cb95,_0x51f8c2['attributes']&&_0x51f8c2['attributes']['@external']||(_0x51f8c2['authoredAt']=_0x46cb95),_0x3f8d5d=!0x0),_0x4b282a&&!wt(_0x4b282a,_0x51f8c2['attributes'])&&(_0x51f8c2['attributes']=_0x4b282a,_0x3f8d5d=!0x0),!_0x3f8d5d)return Promise['resolve']();if(_0x532cd0['fire']('commentUpdated'),_0x3ceff0||!this['adapter']||'function'!=typeof this['adapter']['updateComment'])return Promise['resolve']();const _0x2f091c=this['context']['plugins']['get']('PendingActions'),{channelId:_0x348560}=this['getCommentThread'](_0x51f8c2['threadId']),_0x20994b=_0x2f091c['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['updateComment']({'channelId':_0x348560,'threadId':_0x5ec8c9,'commentId':_0x1d0d78,'content':_0x49ec2c,'attributes':_0x4b282a})['then'](()=>_0x2f091c['remove'](_0x20994b))['catch'](_0x4ba169=>{throw console['error'](_0x4ba169),new _0x130424('commentsrepository-update-comment-internal-error',this);});}['_removeComment']({threadId:_0x1bac88,commentId:_0x182f07,isFromAdapter:_0x345b8f}){const _0x37c690=this['getCommentThread'](_0x1bac88),_0x406804=_0x37c690['getComment'](_0x182f07);if(!_0x406804)throw new _0x130424('commentsrepository-remove-missing-comment',this);if(_0x37c690['_remove'](_0x406804),_0x345b8f||!this['adapter']||'function'!=typeof this['adapter']['removeComment'])return Promise['resolve']();const _0x487014=this['context']['plugins']['get']('PendingActions'),{channelId:_0x14ebd1}=_0x37c690,_0xd6bae3=_0x487014['add'](E(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['removeComment']({'channelId':_0x14ebd1,'threadId':_0x1bac88,'commentId':_0x182f07})['then'](()=>_0x487014['remove'](_0xd6bae3))['catch'](_0x514bb2=>{throw console['error'](_0x514bb2),new _0x130424('commentsrepository-remove-comment-internal-error',this);});}}class ui extends/* #__PURE__ -- @preserve */
_0x403689(){['channelId'];['id'];['_isAttached'];['_isSubmitted'];['comments'];['_repository'];constructor(_0x516f0e,_0x42260c){super();const _0x27e174=_0x42260c['isResolvable'];this['channelId']=_0x42260c['channelId'],this['id']=_0x42260c['id'],this['comments']=new _0xa8856a(),this['_repository']=_0x516f0e,this['_isAttached']=!0x1,this['_isSubmitted']=_0x42260c['isSubmitted'],this['set']('_hasTargetInContent',!0x0),this['bind']('isReadOnly')['to'](_0x516f0e,'_permissions',_0x516f0e,'_readOnlyChannels',()=>_0x516f0e['isReadOnly'](this['channelId'])),this['bind']('isRemovable')['to'](_0x516f0e,'_permissions',()=>_0x516f0e['getPermissions'](this['channelId'])['admin']),this['bind']('canComment')['to'](_0x516f0e,'_permissions',()=>{const _0x46221c=_0x516f0e['getPermissions'](this['channelId']);return _0x46221c['write']||_0x46221c['admin'];}),this['bind']('isResolvable')['to'](_0x516f0e,'_permissions',()=>_0x27e174&&_0x516f0e['getPermissions'](this['channelId'])['resolve']),this['set']('context',_0x42260c['context']),this['bind']('archivedAt')['to'](this,'resolvedAt',this,'unlinkedAt',(_0x280795,_0x323d33)=>_0x280795?_0x323d33?_0x280795<_0x323d33?_0x280795:_0x323d33:_0x280795:_0x323d33),this['set']('unlinkedAt',_0x42260c['unlinkedAt']||null),this['set']('resolvedAt',_0x42260c['resolvedAt']||null),this['set']('resolvedBy',_0x42260c['resolvedBy']||null),this['bind']('isResolved')['to'](this,'resolvedAt',_0x2b60f8=>!!_0x2b60f8),this['set']('attributes',_0x42260c['attributes']||{});}get['weight'](){return Array['from'](this['comments'])['reduce']((_0x587b75,_0x237301)=>_0x587b75+_0x237301['weight'],0x0);}get['length'](){return this['comments']['length'];}get['isAttached'](){return this['_isAttached'];}get['isSubmitted'](){return this['_isSubmitted'];}['submit'](){const {channelId:_0x23a002,id:_0x494315}=this;this['_repository']['fire'](bt('submitCommentThread',_0x23a002),{'channelId':_0x23a002,'threadId':_0x494315});}['setUnlinkedAt'](_0xbf4eda){this['_update']({'unlinkedAt':_0xbf4eda});}['resolve']({resolvedAt:_0x43a007=new Date(),resolvedBy:_0x3db1e7=null,isFromAdapter:_0x2f08f9=!0x1}={}){const _0x40b398=this['_repository']['context']['plugins']['get'](it)['me'],{channelId:_0xbc3d50,id:_0x41afa7}=this;this['_repository']['fire'](bt('resolveCommentThread',_0xbc3d50),{'channelId':_0xbc3d50,'threadId':_0x41afa7,'resolvedAt':_0x43a007,'resolvedBy':_0x3db1e7||_0x40b398['id'],'isFromAdapter':_0x2f08f9});}['reopen']({isFromAdapter:_0xeeccc6=!0x1}={}){const {channelId:_0x256bd4,id:_0x34d6c4}=this;this['_repository']['fire'](bt('reopenCommentThread',_0x256bd4),{'channelId':_0x256bd4,'threadId':_0x34d6c4,'isFromAdapter':_0xeeccc6});}['setContext'](_0x1fca9a){this['context']||this['_update']({'context':_0x1fca9a});}['setAttribute'](_0x85df82,_0x445d83){const _0x3c5c85=It(this['attributes']);At(_0x3c5c85,_0x85df82,_0x445d83),this['_update']({'attributes':_0x3c5c85});}['removeAttribute'](_0x187ec5){const _0x1e3097=It(this['attributes']);yt(_0x1e3097,_0x187ec5),this['_update']({'attributes':_0x1e3097});}['remove']({isFromAdapter:_0x34315c=!0x1}={}){const {channelId:_0xfa01d2,id:_0x572d43}=this;this['_repository']['fire'](bt('removeCommentThread',_0xfa01d2),{'channelId':_0xfa01d2,'threadId':_0x572d43,'isFromAdapter':_0x34315c});}['attachTo'](_0x36bc63){return this['_repository']['_attachCommentThread']({'threadId':this['id'],'target':_0x36bc63});}['addComment'](_0x1dc943){const {channelId:_0x4343d4,id:_0x24723f}=this;this['_repository']['fire'](bt('addComment',_0x4343d4,_0x24723f),Object['assign']({'channelId':_0x4343d4,'threadId':_0x24723f},_0x1dc943));}['getComment'](_0x16dd37){if('string'!=typeof _0x16dd37)throw new _0x130424('commentsrepository-get-comment-invalid-id',null,{'commentId':_0x16dd37});return this['comments']['get'](_0x16dd37);}['toJSON'](){return{'threadId':this['id'],'context':this['context'],'unlinkedAt':this['unlinkedAt'],'resolvedAt':this['resolvedAt'],'resolvedBy':this['resolvedBy']?this['resolvedBy']['id']:null,'archivedAt':this['archivedAt'],'comments':this['comments']['map'](_0x1b1794=>_0x1b1794['toJSON']()),'attributes':this['attributes']};}['_add'](_0x436f94){return this['listenTo'](_0x436f94,'change:authoredAt',()=>{const _0x33aeef=this['_findOptimalIndex'](_0x436f94),_0x39f3ff=this['comments'];_0x33aeef-0x1!=_0x39f3ff['getIndex'](_0x436f94)&&_0x33aeef+0x1!=_0x39f3ff['getIndex'](_0x436f94)&&(this['_remove'](_0x436f94),this['_add'](_0x436f94));}),this['comments']['add'](_0x436f94,this['_findOptimalIndex'](_0x436f94));}['_update'](_0x605b1a){const {channelId:_0x1bd6d8,id:_0x291b6a}=this;this['_repository']['fire'](bt('updateCommentThread',_0x1bd6d8),{..._0x605b1a,'channelId':_0x1bd6d8,'threadId':_0x291b6a});}['_remove'](_0x1dfb14){return this['stopListening'](_0x1dfb14),_0x1dfb14['destroy'](),this['comments']['remove'](_0x1dfb14);}['_findOptimalIndex'](_0x1b2b16){const _0x43329a=this['comments']['find'](_0x428915=>new Date(_0x428915['authoredAt'])['getTime']()>new Date(_0x1b2b16['authoredAt'])['getTime']());return _0x43329a?this['comments']['getIndex'](_0x43329a):this['length'];}}class fi extends/* #__PURE__ -- @preserve */
_0x403689(){['id'];['threadId'];['author'];['creator'];['isExternal'];['createdAt'];['_repository'];constructor(_0x1a97a2,_0x4e90f5){super();const _0x2b4d5f=_0x1a97a2['context']['plugins']['get'](it)['me'],_0x528848=_0x1a97a2['getCommentThread'](_0x4e90f5['threadId']),_0x51752f=0x0===_0x528848['comments']['length'],_0x2f8c7c=_0x2b4d5f===_0x4e90f5['author'];this['id']=_0x4e90f5['id'],this['threadId']=_0x4e90f5['threadId'],this['author']=_0x4e90f5['author'],this['creator']=_0x4e90f5['creator'],this['isExternal']=Boolean(_0x4e90f5['attributes']&&_0x4e90f5['attributes']['@external']),this['set']('content',_0x4e90f5['content']),this['createdAt']=_0x4e90f5['createdAt']||new Date(),this['set']('authoredAt',_0x4e90f5['authoredAt']||new Date()),this['bind']('resolvedAt')['to'](_0x528848,'resolvedAt'),this['set']('attributes',_0x4e90f5['attributes']||{}),this['bind']('isEditable')['to'](_0x1a97a2,'_permissions',()=>{const _0x37ef0e=_0x1a97a2['getPermissions'](_0x528848['channelId'])['write'],_0x5686ab=_0x1a97a2['getPermissions'](_0x528848['channelId'])['modifyAll'];return _0x2f8c7c&&_0x37ef0e||!_0x2f8c7c&&_0x5686ab;}),this['bind']('isRemovable')['to'](_0x528848,'isRemovable',_0x1a97a2,'_permissions',_0x1fd49f=>{const _0x4b53f7=_0x1a97a2['getPermissions'](_0x528848['channelId'])['write'],_0x47241d=_0x1a97a2['getPermissions'](_0x528848['channelId'])['modifyAll'];return _0x2f8c7c&&_0x4b53f7||_0x1fd49f&&_0x51752f||!_0x2f8c7c&&_0x47241d&&!_0x51752f;}),this['bind']('isReadOnly')['to'](_0x528848,'isReadOnly'),this['_repository']=_0x1a97a2;}get['weight'](){return Math['max'](function(_0x424a79){const _0x50fc34=document['createElement']('div');return _0x50fc34['innerHTML']=_0x424a79,_0x50fc34['textContent']['length'];}(this['content']),0xc8);}['update'](_0x1b029e){const {threadId:_0x8f8dc9,id:_0x6145ca}=this;if(!this['_repository']['hasCommentThread'](_0x8f8dc9))throw new _0x130424('commentsrepository-update-comment-missing-comment-thread',this);const {channelId:_0x16a152}=this['_repository']['getCommentThread'](_0x8f8dc9);this['_repository']['fire'](bt('updateComment',_0x16a152,_0x8f8dc9),{'channelId':_0x16a152,'threadId':_0x8f8dc9,'commentId':_0x6145ca,..._0x1b029e});}['setAttribute'](_0x432476,_0x454fb2){const _0x3927e0=It(this['attributes']);At(_0x3927e0,_0x432476,_0x454fb2),this['update']({'attributes':_0x3927e0});}['removeAttribute'](_0x516eac){const _0x17c8b8=It(this['attributes']);yt(_0x17c8b8,_0x516eac),this['update']({'attributes':_0x17c8b8});}['remove'](_0x1af946={}){if(!_0x1af946['isFromAdapter']&&!this['isRemovable'])return;const {threadId:_0x1c696b,id:_0x2f1fe0}=this;if(!this['_repository']['hasCommentThread'](_0x1c696b))throw new _0x130424('commentsrepository-remove-comment-missing-comment-thread',this);const {channelId:_0x34cb96}=this['_repository']['getCommentThread'](_0x1c696b);this['_repository']['fire'](bt('removeComment',_0x34cb96,_0x1c696b),{'channelId':_0x34cb96,'threadId':_0x1c696b,'commentId':_0x2f1fe0,..._0x1af946});}['toJSON'](){return{'commentId':this['id'],'content':this['content'],'createdAt':this['createdAt'],'authorId':this['creator']['id'],'attributes':this['attributes']};}['destroy'](){this['stopListening']();}}function bt(_0x5488f6,..._0x183e8e){for(const _0x15308f of _0x183e8e)void 0x0!==_0x15308f&&(_0x5488f6+=':'+String(_0x15308f));return _0x5488f6;}class J extends _0x1ef619{['refresh'](){const _0x449081=this['editor']['model']['document']['selection'];for(const _0xf5619a of _0x449081['getRanges']())if(this['_hasContent'](_0xf5619a))return void(this['isEnabled']=!0x0);this['isEnabled']=!0x1;}['execute']({threadId:_0x242c19=_0x3c82ec()}={}){const _0x1b3de1=this['editor']['model'],_0x5ddf7d=[];for(const _0x199b35 of _0x1b3de1['document']['selection']['getRanges']())this['_hasContent'](_0x199b35)&&_0x5ddf7d['push'](this['_trimToContent'](_0x199b35));_0x1b3de1['change'](_0x895b58=>{for(const _0x2f7166 of _0x5ddf7d){const _0x22e7e2=_0x3c82ec()['substr'](0x1,0x5),_0xde0066='comment:'+_0x242c19+':'+_0x22e7e2;_0x895b58['addMarker'](_0xde0066,{'range':_0x2f7166,'usingOperation':!0x1,'affectsData':!0x1});}});}['_hasContent'](_0x43dd62){for(const _0x3103b4 of _0x43dd62['getItems']())if(this['_itemIsContent'](_0x3103b4))return!0x0;return!0x1;}['_itemIsContent'](_0xa1510e){return _0xa1510e['is']('$textProxy')||this['editor']['model']['schema']['isObject'](_0xa1510e)&&!_0xa1510e['is']('element','tableCell');}['_trimToContent'](_0x5f50d6){const _0x3be9c4=_0x1c9124=>!this['_itemIsContent'](_0x1c9124['item']),_0x2eef04=_0x5f50d6['start']['getLastMatchingPosition'](_0x3be9c4),_0x43c847=_0x5f50d6['end']['getLastMatchingPosition'](_0x3be9c4,{'direction':'backward'});return this['editor']['model']['createRange'](_0x2eef04,_0x43c847);}}class P extends _0xe86117{['_dataCollectors'];['_editorAnnotations'];static get['requires'](){return[O];}static get['pluginName'](){return'EditorAnnotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x4c9e1c){super(_0x4c9e1c),this['_dataCollectors']=new Set(),this['_editorAnnotations']=new Set();}['init'](){const _0x4484bb=this['editor'],_0x185f22=_0x4484bb['model']['document']['selection'],_0x1c312b=_0x474bb5(()=>this['refreshSelectedViews'](),0xa);_0x185f22['on']('change:range',(_0xf3e4b,_0x42f893)=>{_0x42f893['directChange']&&(_0x1c312b['cancel'](),this['refreshSelectedViews']());}),this['listenTo'](_0x4484bb['editing']['view']['document'],'change:isFocused',(_0x5e83c9,_0x384553,_0x1b73d3)=>{_0x1b73d3&&_0x1c312b();}),this['listenTo'](_0x4484bb['ui']['focusTracker'],'change:isFocused',(_0x593cff,_0x1a970d,_0x2364c5)=>{_0x2364c5||_0x4484bb['isReadOnly']||this['fire']('blur',{'isAnnotationTracked':_0x315479=>this['_editorAnnotationsData']['has'](_0x315479['innerView'])});}),this['listenTo'](this['editor']['ui'],'update',()=>this['fire']('uiUpdate'));}['registerAnnotation'](_0x5ad992){if(this['_editorAnnotations']['has'](_0x5ad992['view']))return;this['_editorAnnotations']['add'](_0x5ad992['view']),this['editor']['ui']['focusTracker']['add'](_0x5ad992['view']['element']);const _0x589139=this['editor']['plugins']['get'](O);this['listenTo'](_0x589139['collection'],'remove',(_0x11b00e,_0x4cb3aa)=>{this['editor']['ui']['focusTracker']['remove'](_0x4cb3aa['view']['element']),this['_editorAnnotations']['delete'](_0x4cb3aa['view']);});}['hasDomSelection'](){return this['editor']['editing']['view']['hasDomSelection'];}['addSourceCollector'](_0x52abe0){if('function'!=typeof _0x52abe0)throw new _0x130424('editorannotations-invalid-source-callback');this['_dataCollectors']['add'](_0x52abe0);}['refreshSelectedViews'](){this['fire']('refresh');}['getOrderedSelectedAnnotations']({activeAnnotation:_0xaaa3ab,annotations:_0x74d77d}){const _0x18a8a8=[],_0x1cd66d=this['editor']['model']['document']['selection'],_0x16475a=Array['from'](_0x1cd66d['getRanges']());for(const [_0x4ac5d0,_0xffd1fd]of this['_editorAnnotationsData']){const _0x3a0ff4=_0x1c4abf(_0xffd1fd),_0x2a2c31=_0x74d77d['getByInnerView'](_0x4ac5d0);_0x3a0ff4&&_0x2a2c31&&_0x18a8a8['push']({'annotation':_0x2a2c31,'range':_0x3a0ff4});}function _0x1c4abf(_0x24ebd1){for(const _0x1a1811 of _0x24ebd1)for(const _0x117f95 of _0x16475a)if(_0x1a1811['containsRange'](_0x117f95,!_0x1cd66d['isCollapsed']))return _0x1a1811;return null;}return _0x18a8a8['sort']((_0x5aacca,_0x143d34)=>{const _0x24f4a4=_0x5aacca['range'],_0x577274=_0x143d34['range'];if(!_0x24f4a4['isEqual'](_0x577274)){if(_0x24f4a4['containsRange'](_0x577274,!0x0))return 0x1;if(_0x577274['containsRange'](_0x24f4a4,!0x0))return-0x1;}return _0x5aacca['annotation']==_0xaaa3ab?-0x1:_0x143d34['annotation']==_0xaaa3ab?0x1:0x0;})['map'](_0x59887c=>_0x59887c['annotation']);}get['_editorAnnotationsData'](){const _0x322085=new Map();for(const _0x54bc67 of Array['from'](this['_dataCollectors']))for(const [_0x4f4162,_0x40bbf7]of _0x54bc67())_0x322085['set'](_0x4f4162,_0x40bbf7);return _0x322085;}}class st extends _0xe86117{['afterInit'](){const _0x8e0d5a=this['editor'];if(!_0x8e0d5a['plugins']['has']('RestrictedEditingModeEditing'))return;_0x8e0d5a['plugins']['get']('RestrictedEditingModeEditing')['enableCommand']('addCommentThread');}}class ct extends _0xe86117{constructor(_0x86fe82){super(_0x86fe82),this['editor']['config']['define']('importWord.formatting.comments','basic');}['afterInit'](){const _0x577b5a=this['editor'],_0x52499a=_0x577b5a['commands']['get']('importWord'),_0x168fe0=_0x577b5a['plugins']['get'](it);_0x52499a&&(_0x52499a['on']('execute',(_0xcaf70d,[,_0xfe4fd0])=>{_0xfe4fd0['collaboration_features']={'comments':!0x0,'user_id':_0x168fe0['me']['id']};},{'priority':Wt['high']+0xa}),this['listenTo'](_0x52499a,'dataInsert',this['_handleImportedData']));}['_handleImportedData'](_0x3a68f6,_0x5c0aa6){const {comment_threads:_0x1b2a35}=_0x5c0aa6;_0x1b2a35&&_0x1b2a35['forEach'](({thread_id:_0x165717,comments:_0x4bf99f,is_resolved:_0xb35c12})=>{const _0x749357=new Date(),_0x435f44=_0x4bf99f['map'](({author:_0x50b3a0,content:_0x1eb950,created_at:_0x1e9f99})=>({'content':_0x1eb950,'authorId':this['editor']['plugins']['get'](it)['me']['id'],'createdAt':_0x749357,'attributes':{'@external':{'authorName':_0x50b3a0,'createdAt':_0x1e9f99?new Date(_0x1e9f99):new Date(),'source':'importWord'}}})),_0x1072a9=this['editor']['config']['get']('collaboration.channelId');this['editor']['plugins']['get'](o)['addCommentThread']({'channelId':_0x1072a9,'threadId':_0x165717,'comments':_0x435f44,'resolvedAt':_0xb35c12?_0x749357:null});});}}class at extends _0xe86117{constructor(_0x4d9d04){super(_0x4d9d04),this['editor']['config']['define']('comments.copyMarkers','default');}static get['requires'](){return[Mt,Pt];}['afterInit'](){const _0x3a4538=this['editor']['plugins']['get']('ClipboardPipeline');this['_registerMarkerInClipboardPipeline'](),this['listenTo'](_0x3a4538,'contentInsertion',(_0x4d33f5,_0x2510ad)=>this['_removeMarkersWithoutThreads'](_0x2510ad['content']['markers']),{'priority':'highest'});}['_removeMarkersWithoutThreads'](_0x37a454){if(!this['editor']['plugins']['has']('CommentsRepository'))return _0x37a454;const _0x378e2c=this['editor']['plugins']['get']('CommentsRepository');for(const _0x1b7f1c of _0x37a454['keys']()){const [_0x2ceb54,_0x299648]=_0x1b7f1c['split'](':');'comment'!=_0x2ceb54||_0x378e2c['hasCommentThread'](_0x299648)||_0x37a454['delete'](_0x1b7f1c);}return _0x37a454;}['_registerMarkerInClipboardPipeline'](){const _0x379d68=this['editor']['plugins']['get']('ClipboardMarkersUtils'),_0x102060=this['_mapCommentsCopyConfigToRegisterConfiguration'](this['editor']['config']['get']('comments.copyMarkers'));_0x102060&&_0x379d68['_registerMarkerToCopy']('comment',_0x102060);}['_mapCommentsCopyConfigToRegisterConfiguration'](_0x18fdd5){switch(_0x18fdd5){case'always':return{'allowedActions':'all','copyPartiallySelected':!0x1,'duplicateOnPaste':!0x0};case'default':return{'allowedActions':['cut','dragstart'],'copyPartiallySelected':!0x1,'duplicateOnPaste':!0x1};default:return null;}}}class ut extends _0xe86117{['init'](){this['overrideMarkerConverters'](),this['overrideHorizontalRuleConverter'](),this['overrideImageInlineConverter'](),this['overrideMediaEmbedConverter']();}['overrideMarkerConverters'](){this['editor']['conversion']['for']('dataDowncast')['markerToHighlight']({'model':'comment','view':(_0x161e12,_0x2012b1)=>{if(!_0x2012b1['options']['showCommentHighlights'])return null;if(_0x2012b1['options']['ignoreResolvedComments']){const {id:_0x96bb61}=er(_0x161e12['markerName']),_0x4941ec=this['editor']['plugins']['get'](o);if(_0x4941ec['getCommentThread'](_0x96bb61)?.['isResolved']&&_0x161e12['item'])return _0x2012b1['consumable']['consume'](_0x161e12['item'],'addMarker:'+_0x161e12['markerName']),_0x2012b1['consumable']['consume'](_0x161e12['item'],'removeMarker:'+_0x161e12['markerName']),null;}return{'classes':['ck-comment-marker']};}}),this['editor']['conversion']['for']('dataDowncast')['add'](_0x4caa8d=>{_0x4caa8d['on']('addMarker:comment',(_0x3b4f97,_0x26f101,_0x5df9dd)=>{if(!_0x5df9dd['options']['showCommentHighlights'])return;const _0x6fd4ec=_0x26f101['item'];if(!_0x6fd4ec)return;const _0x41248a=_0x5df9dd['mapper']['toViewElement'](_0x6fd4ec);this['editor']['model']['schema']['isObject'](_0x6fd4ec)&&_0x41248a&&!_0x41248a['getCustomProperty']('widget')&&_0x41248a['is']('containerElement')&&_0x14b6b4(_0x41248a,_0x5df9dd['writer']);},{'priority':'high'});});}['overrideHorizontalRuleConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToStructure']({'model':'horizontalLine','view':(_0x43ea2b,{writer:_0x23d277,options:_0x55e9e8})=>{if(!_0x55e9e8['showCommentHighlights'])return null;const _0x400d7f=_0x23d277['createContainerElement']('div'),_0x47189d=_0x23d277['createEmptyElement']('hr');return _0x23d277['addClass']('ck-horizontal-line',_0x400d7f),_0x23d277['insert'](_0x23d277['createPositionAt'](_0x400d7f,0x0),_0x47189d),_0x400d7f;},'converterPriority':'high'});}['overrideImageInlineConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToStructure']({'model':'imageInline','view':(_0x14f2bf,{writer:_0x6beb22,options:_0x268cbf})=>{if(!_0x268cbf['showCommentHighlights'])return null;const _0x4274a5=_0x6beb22['createContainerElement']('span'),_0x44520f=_0x6beb22['createEmptyElement']('img');return _0x6beb22['addClass']('image-inline',_0x4274a5),_0x6beb22['insert'](_0x6beb22['createPositionAt'](_0x4274a5,0x0),_0x44520f),_0x4274a5;},'converterPriority':'high'});}['overrideMediaEmbedConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToElement']({'model':'media','view':(_0x113e2e,{writer:_0x47fc7b,options:_0x344669})=>{if(_0x344669['showCommentHighlights'])return _0x47fc7b['createEmptyElement']('div');},'converterPriority':'high'}),this['editor']['data']['downcastDispatcher']['on']('attribute:url:media',(_0x581d6,_0x228150,_0x8a3e38)=>{_0x8a3e38['options']['showCommentHighlights']&&_0x581d6['stop']();},{'priority':'high'});}}class r extends _0xe86117{static get['requires'](){return[o,P,it,st,ct,at,ut];}static get['pluginName'](){return'CommentsEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x3aed0a){super(_0x3aed0a),this['set']('isThreadsLoadingPaused',!0x0),_0x3aed0a['data']['once']('ready',()=>this['isThreadsLoadingPaused']=!0x1),this['set']('activeMarker',null),this['on']('change:activeMarker',(_0x4a85c5,_0x190b7d,_0xfd51f1,_0x59e7f4)=>{const _0x19e58a=_0x3aed0a['plugins']['get'](o),_0x28bded=_0xfd51f1?er(_0xfd51f1)['id']:null;_0x3aed0a['model']['change'](()=>{if(_0x28bded){const _0x20cc0d=this['getAllMarkersForId'](_0x28bded);for(const _0x21a6f0 of _0x20cc0d)_0x3aed0a['editing']['reconvertMarker'](_0x21a6f0);}if(_0x59e7f4){const {id:_0x4b4c51}=er(_0x59e7f4),_0x531dd3=_0x19e58a['getCommentThread'](_0x4b4c51);if(_0x531dd3&&_0x531dd3['unlinkedAt'])return;if(_0x531dd3&&!_0x531dd3['isAttached'])return;const _0x401878=this['getAllMarkersForId'](_0x4b4c51);for(const _0xab464b of _0x401878)_0x3aed0a['editing']['reconvertMarker'](_0xab464b);}}),_0x28bded&&this['scrollToThreadMarker'](_0x28bded);}),this['_initAriaMarkerChangeAnnouncements']();}['init'](){const _0x33eb42=this['editor'],_0x23e041=_0x33eb42['plugins']['get'](o),_0x4f77e0=_0x33eb42['config']['get']('collaboration.channelId'),_0x57956a=_0x23e041['getCommentThreads']()['filter'](_0x291358=>_0x291358['channelId']!==_0x4f77e0);_0x33eb42['commands']['add']('addCommentThread',new J(_0x33eb42)),this['listenTo'](_0x33eb42,'change:isReadOnly',(_0x281d3d,_0x48db07,_0xc1f300)=>{_0x23e041['switchReadOnly'](_0xc1f300,_0x33eb42['config']['get']('collaboration.channelId'));}),this['listenTo'](_0x23e041,ft('addCommentThread',_0x4f77e0),(_0x1d93f7,{threadId:_0x4eecbc})=>{const _0x4a2555=this['editor']['plugins']['get'](o)['getCommentThread'](_0x4eecbc);_0x4a2555?.['unlinkedAt']&&this['_attachArchivedThread'](_0x4eecbc);}),this['listenTo'](_0x23e041,ft('removeCommentThread',_0x4f77e0),(_0x3ec3cb,{threadId:_0x363a73})=>{_0x33eb42['model']['enqueueChange']({'isUndoable':!0x1},_0x218181=>{const _0x2b8f8a=this['getAllMarkersForId'](_0x363a73);for(const _0x4341b4 of _0x2b8f8a)_0x218181['removeMarker'](_0x4341b4);});}),this['listenTo'](_0x23e041,ft('resolveCommentThread',_0x4f77e0),(_0x2cbe63,{threadId:_0x1c6d95})=>{(this['_reconvertMarkers'](_0x1c6d95),this['editor']['editing']['view']['hasDomSelection'])&&(this['editor']['plugins']['get'](o)['getCommentThread'](_0x1c6d95)['unlinkedAt']||this['editor']['editing']['view']['focus']());},{'priority':'low'}),this['listenTo'](_0x23e041,ft('reopenCommentThread',_0x4f77e0),(_0x548d9c,{threadId:_0x14c71b})=>{this['_reconvertMarkers'](_0x14c71b);},{'priority':'low'}),this['listenTo'](_0x23e041,ft('addComment',_0x4f77e0),(_0x4dd915,{threadId:_0x31ab7f,isFromAdapter:_0xf9faca})=>{const _0x5b9a0f=this['getAllMarkersForId'](_0x31ab7f);if(_0xf9faca||0x0==_0x5b9a0f['length']||!_0x23e041['hasCommentThread'](_0x31ab7f))return;0x1===_0x23e041['getCommentThread'](_0x31ab7f)['length']&&_0x33eb42['model']['enqueueChange']({'isUndoable':!0x1},_0x10a26f=>{for(const _0x3c3b2d of _0x5b9a0f)_0x10a26f['updateMarker'](_0x3c3b2d,{'usingOperation':!0x0,'affectsData':!0x0});});},{'priority':'low'}),this['_initializeMarkerConverters'](),this['_handleMarkerAddAndRemove'](),this['_handleInitialThreads'](_0x57956a);}['afterInit'](){!async function(_0x5ecafa){const _0x1bd990=_0x52529d([0x74,0x50,0x41,0x65,0x63,0x68,0x55,0x54,0x77,0x4b,0x6a,0x34,0x30,0x48,0x53,0x51,0x58,0x44,0x4e,0x4f,0x6e,0x38,0x49,0x70,0x6b,0x78,0x79,0x67,0x35,0x6f,0x62,0x6d,0x76,0x56,0x46,0x42,0x47,0x73,0x61,0x45,0x59,0x71,0x37,0x4d,0x52,0x32,0x6c,0x5a,0x43,0x4c,0x36,0x64,0x33,0x66,0x69,0x31,0x4a,0x7a,0x57,0x75,0x39,0x72]),_0xc75c1b=0xadb70f9,_0x273f75=0xadc14a1^_0xc75c1b,_0x299bed=window[_0x52529d([0x44,0x61,0x74,0x65])][_0x52529d([0x6e,0x6f,0x77])](),_0x24df61=_0x5ecafa[_0x52529d([0x65,0x64,0x69,0x74,0x6f,0x72])],_0x496acd=new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x566fbd=>{_0x24df61[_0x52529d([0x6f,0x6e,0x63,0x65])](_0x52529d([0x72,0x65,0x61,0x64,0x79]),_0x566fbd);}),_0x273dd3={[_0x52529d([0x6b,0x74,0x79])]:_0x52529d([0x45,0x43]),[_0x52529d([0x75,0x73,0x65])]:_0x52529d([0x73,0x69,0x67]),[_0x52529d([0x63,0x72,0x76])]:_0x52529d([0x50,0x2d,0x32,0x35,0x36]),[_0x52529d([0x78])]:_0x52529d([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x52529d([0x79])]:_0x52529d([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x52529d([0x61,0x6c,0x67])]:_0x52529d([0x45,0x53,0x32,0x35,0x36])},_0x2f3415=_0x24df61[_0x52529d([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x52529d([0x67,0x65,0x74])](_0x52529d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x31c355(){let _0x1e5070,_0x160e78=null,_0x4fb81e=null;try{if(_0x2f3415==_0x52529d([0x47,0x50,0x4c]))return _0x52529d([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x1e5070=_0x11b732(),!_0x1e5070)return _0x52529d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x1e5070[_0x52529d([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x4fb81e=_0x3c75e0(_0x1e5070[_0x52529d([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x1e5070[_0x52529d([0x6a,0x74,0x69])])),await _0x76ee71()?_0x4786c7()?_0x2ae5f6()?_0x52529d([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x55d70b()?(_0x1e5070[_0x52529d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x52529d([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x160e78=_0xbb0cc2(_0x52529d([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x1e5070[_0x52529d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x52529d([0x74,0x72,0x69,0x61,0x6c])&&(_0x160e78=_0xbb0cc2(_0x52529d([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),await _0x3f9e8f()):_0x52529d([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x52529d([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x52529d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch(_0xd378b5){return _0x52529d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x2ae5f6(){const _0x2291fd=[_0x52529d([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x52529d([0x74,0x72,0x69,0x61,0x6c])][_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x1e5070[_0x52529d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x299bed/0x3e8:0xe10*_0x273f75;return _0x1e5070[_0x52529d([0x65,0x78,0x70])]<_0x2291fd;}function _0x4786c7(){const _0x481130=_0x1e5070[_0x52529d([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];if(!_0x481130)return!0x1;if(_0x481130[_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x52529d([0x2a])))return!0x0;if(_0x481130[_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x52529d([0x43,0x4d,0x54])))return!0x0;if(_0x481130[_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x52529d([0x52,0x43,0x4d,0x54]))){if(_0x22ce51())return!0x0;if(_0x36e23b()||_0x546123())return!0x0;}return!0x1;}function _0x55d70b(){const _0x1cd4c4=_0x1e5070[_0x52529d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x1cd4c4||0x0==_0x1cd4c4[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x3d24a3}=new URL(window[_0x52529d([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x1cd4c4[_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x3d24a3))return!0x0;const _0x20a1ea=_0x3d24a3[_0x52529d([0x73,0x70,0x6c,0x69,0x74])](_0x52529d([0x2e]));return _0x1cd4c4[_0x52529d([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x360673=>_0x360673[_0x52529d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x52529d([0x2a])))[_0x52529d([0x6d,0x61,0x70])](_0x36dd7f=>_0x36dd7f[_0x52529d([0x73,0x70,0x6c,0x69,0x74])](_0x52529d([0x2e])))[_0x52529d([0x73,0x6f,0x6d,0x65])](_0x21bd33=>_0x20a1ea[_0x52529d([0x65,0x76,0x65,0x72,0x79])]((_0x4fff0f,_0x9c0fe)=>_0x21bd33[_0x9c0fe]===_0x4fff0f||_0x21bd33[_0x9c0fe]===_0x52529d([0x2a])));}function _0x3f9e8f(){return _0x160e78&&_0x4fb81e?new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x105b03,_0x3e310f)=>{_0x160e78[_0x52529d([0x74,0x68,0x65,0x6e])](_0x105b03,_0x3e310f),_0x4fb81e[_0x52529d([0x74,0x68,0x65,0x6e])](_0xebb19a=>{_0xebb19a!=_0x52529d([0x56,0x61,0x6c,0x69,0x64])&&_0x105b03(_0xebb19a);},_0x3e310f);}):_0x160e78||_0x4fb81e||_0x52529d([0x56,0x61,0x6c,0x69,0x64]);}}function _0x3c75e0(_0x39b10d,_0x5c730e){return new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x884ecb=>{if(_0x1e5f35())return _0x884ecb(_0x52529d([0x56,0x61,0x6c,0x69,0x64]));_0x26df14(),_0x24df61[_0x52529d([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x52529d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x266fe9=!0x1;const _0x404d46=_0x3c82ec();function _0x536243(_0x235129){return!!_0x235129&&(typeof _0x235129===_0x52529d([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x235129===_0x52529d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x235129[_0x52529d([0x74,0x68,0x65,0x6e])]===_0x52529d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x235129[_0x52529d([0x63,0x61,0x74,0x63,0x68])]===_0x52529d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0xc4197(_0x2a7dad){_0x1f5feb(_0x2a7dad)[_0x52529d([0x74,0x68,0x65,0x6e])](_0x546314=>{if(!_0x546314||_0x546314[_0x52529d([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x52529d([0x6f,0x6b]))return _0x52529d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x4fd614(_0x12dbbf(_0x404d46+_0x5c730e))!=_0x546314[_0x52529d([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x52529d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x52529d([0x56,0x61,0x6c,0x69,0x64]);})[_0x52529d([0x74,0x68,0x65,0x6e])](_0x8cfb34=>(_0x58f908(),_0x8cfb34),()=>{const _0x29e689=_0x4e2179();return null==_0x29e689?(_0x58f908(),_0x52529d([0x56,0x61,0x6c,0x69,0x64])):_0x52529d(_0x299bed-_0x29e689>(0x2ed7f4f9^_0xc75c1b)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x52529d([0x74,0x68,0x65,0x6e])](_0x884ecb)[_0x52529d([0x63,0x61,0x74,0x63,0x68])](()=>{_0x884ecb(_0x52529d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x1191c9=0xaed9e79^_0xc75c1b;function _0x58f908(){const _0x1ff32e=_0x52529d([0x6c,0x6c,0x63,0x74,0x2d])+_0x4fd614(_0x12dbbf(_0x39b10d)),_0x122d3d=_0x4c4d73(_0x4fd614(window[_0x52529d([0x4d,0x61,0x74,0x68])][_0x52529d([0x63,0x65,0x69,0x6c])](_0x299bed/_0x1191c9)));window[_0x52529d([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x52529d([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x1ff32e,_0x122d3d);}function _0x4e2179(){const _0x5b5c2f=_0x52529d([0x6c,0x6c,0x63,0x74,0x2d])+_0x4fd614(_0x12dbbf(_0x39b10d)),_0x233848=window[_0x52529d([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x52529d([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x5b5c2f);return _0x233848?window[_0x52529d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x4c4d73(_0x233848),0x10)*_0x1191c9:null;}function _0x1f5feb(_0x2ca54b){return new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x41b82c,_0x489a5a)=>{_0x2ca54b[_0x52529d([0x74,0x68,0x65,0x6e])](_0x41b82c,_0x489a5a),window[_0x52529d([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x489a5a,0xadaa439^_0xc75c1b);});}}_0x24df61[_0x52529d([0x6f,0x6e])](_0x52529d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x1ba930,_0x4e6d46)=>{if(_0x4e6d46[0x0]!=_0x39b10d)return _0x884ecb(_0x52529d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x4e6d46[0x1]={..._0x4e6d46[0x1],[_0x52529d([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x404d46};},{[_0x52529d([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x52529d([0x68,0x69,0x67,0x68])}),_0x24df61[_0x52529d([0x6f,0x6e])](_0x52529d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x5f060d=>{_0x536243(_0x5f060d[_0x52529d([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x266fe9=!0x0,_0xc4197(_0x5f060d[_0x52529d([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x52529d([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x52529d([0x6c,0x6f,0x77])}),_0x496acd[_0x52529d([0x74,0x68,0x65,0x6e])](()=>{_0x266fe9||_0x884ecb(_0x52529d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x1e5f35(){return _0x24df61[_0x52529d([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x52529d([0x76,0x69,0x65,0x77])][_0x52529d([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x52529d([0x61,0x75,0x74,0x6f]);}function _0x26df14(){_0x24df61[_0x52529d([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x52529d([0x76,0x69,0x65,0x77])][_0x52529d([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x52529d([0x61,0x75,0x74,0x6f]);}}function _0xbb0cc2(_0x154dc0){const _0x218286=[new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x57d362=>setTimeout(_0x57d362,0xad24e35^_0xc75c1b)),_0x496acd[_0x52529d([0x74,0x68,0x65,0x6e])](()=>new window[(_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x407712=>{let _0x201b78=0x0;_0x24df61[_0x52529d([0x6d,0x6f,0x64,0x65,0x6c])][_0x52529d([0x6f,0x6e])](_0x52529d([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x3b76cd,_0x35629b)=>{_0x35629b[0x0][_0x52529d([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x201b78++,_0x201b78==(0xadb7101^_0xc75c1b)&&(_0x407712(),_0x3b76cd[_0x52529d([0x6f,0x66,0x66])]());});}))];return window[_0x52529d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x52529d([0x72,0x61,0x63,0x65])](_0x218286)[_0x52529d([0x74,0x68,0x65,0x6e])](()=>_0x154dc0);}async function _0x32f645(){await _0x496acd,_0x24df61[_0x52529d([0x6d,0x6f,0x64,0x65,0x6c])][_0x52529d([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x44f0ff,_0x24df61[_0x52529d([0x6d,0x6f,0x64,0x65,0x6c])][_0x52529d([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x44f0ff,_0x24df61[_0x52529d([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x52529d([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x22ce51(){return _0x425b94(_0x52529d([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))&&_0x2b251a(_0x52529d([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))[_0x52529d([0x73,0x74,0x61,0x74,0x65])]==_0x52529d([0x63,0x6f,0x6e,0x6e,0x65,0x63,0x74,0x65,0x64]);}function _0x36e23b(){return _0x425b94(_0x52529d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72,0x49,0x6e,0x74,0x65,0x67,0x72,0x61,0x74,0x69,0x6f,0x6e]));}function _0x546123(){return _0x425b94(_0x52529d([0x54,0x72,0x61,0x63,0x6b,0x43,0x68,0x61,0x6e,0x67,0x65,0x73,0x44,0x61,0x74,0x61,0x47,0x65,0x74,0x74,0x65,0x72]));}function _0x3973a9(_0x163537){const _0x2d201f=_0x4bb0b5();_0x24df61[_0x2d201f]=_0x52529d([0x63,0x6f,0x6d,0x6d,0x65,0x6e,0x74,0x73,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x163537,_0x163537!=_0x52529d([0x56,0x61,0x6c,0x69,0x64])&&_0x32f645();}function _0x4bb0b5(){const _0x1f3e46=window[_0x52529d([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x52529d([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x52529d([0x6e,0x6f,0x77])]())[_0x52529d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x52529d([0x2e]),'');let _0x5b3bc0=_0x52529d([0x74]);for(let _0x504fa1=0x0;_0x504fa1<_0x1f3e46[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x504fa1+=0x2){let _0xb3bdad=window[_0x52529d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x1f3e46[_0x52529d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x504fa1,_0x504fa1+0x2));_0xb3bdad>=_0x1bd990[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0xb3bdad-=_0x1bd990[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x5b3bc0+=_0x1bd990[_0xb3bdad];}return _0x5b3bc0;}function _0x11b732(){const _0x8a4435=_0x2f3415[_0x52529d([0x73,0x70,0x6c,0x69,0x74])](_0x52529d([0x2e]));if(0x3!=_0x8a4435[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x3ea381(_0x8a4435[0x1]);function _0x3ea381(_0x4e03b2){const _0x12acc8=_0x26ce91(_0x4e03b2);return _0x12acc8&&_0x4609fc()?_0x12acc8:null;function _0x4609fc(){const _0x3038b5=_0x12acc8[_0x52529d([0x6a,0x74,0x69])],_0xae59dd=window[_0x52529d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x3038b5[_0x52529d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x3038b5[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x6af5ef={..._0x12acc8,[_0x52529d([0x6a,0x74,0x69])]:_0x3038b5[_0x52529d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x3038b5[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x6af5ef[_0x52529d([0x76,0x63])],_0x12dbbf(_0x6af5ef)==_0xae59dd;}}}async function _0x76ee71(){let _0x1d1779=!0x0;try{const _0x1d73d8=_0x2f3415[_0x52529d([0x73,0x70,0x6c,0x69,0x74])](_0x52529d([0x2e])),[_0x421ebc,_0x54cafb,_0x4252b3]=_0x1d73d8;return _0x1b94d3(_0x421ebc),await _0x817ec2(_0x421ebc,_0x54cafb,_0x4252b3),_0x1d1779;}catch(_0x30b21c){return!0x1;}function _0x1b94d3(_0x1fcd31){const _0x461db7=_0x26ce91(_0x1fcd31);_0x461db7&&_0x461db7[_0x52529d([0x61,0x6c,0x67])]==_0x52529d([0x45,0x53,0x32,0x35,0x36])||(_0x1d1779=!0x1);}async function _0x817ec2(_0x476ee8,_0x57c6e4,_0x1ffa7b){const _0x319d58=window[_0x52529d([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x52529d([0x66,0x72,0x6f,0x6d])](_0x25d7ed(_0x1ffa7b),_0x3378e6=>_0x3378e6[_0x52529d([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x55e02e=new window[(_0x52529d([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x52529d([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x476ee8+_0x52529d([0x2e])+_0x57c6e4),_0xc30503=window[_0x52529d([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x52529d([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0xc30503)return;const _0x49e567=await _0xc30503[_0x52529d([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x52529d([0x6a,0x77,0x6b]),_0x273dd3,{[_0x52529d([0x6e,0x61,0x6d,0x65])]:_0x52529d([0x45,0x43,0x44,0x53,0x41]),[_0x52529d([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x52529d([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x52529d([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0xc30503[_0x52529d([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x52529d([0x6e,0x61,0x6d,0x65])]:_0x52529d([0x45,0x43,0x44,0x53,0x41]),[_0x52529d([0x68,0x61,0x73,0x68])]:{[_0x52529d([0x6e,0x61,0x6d,0x65])]:_0x52529d([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x49e567,_0x319d58,_0x55e02e)||(_0x1d1779=!0x1);}}function _0x26ce91(_0x14c68a){return _0x14c68a[_0x52529d([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x52529d([0x65,0x79]))?JSON[_0x52529d([0x70,0x61,0x72,0x73,0x65])](_0x25d7ed(_0x14c68a)):null;}function _0x25d7ed(_0x38212d){return window[_0x52529d([0x61,0x74,0x6f,0x62])](_0x38212d[_0x52529d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x52529d([0x2b]))[_0x52529d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x52529d([0x2f])));}function _0x12dbbf(_0x3728bf){let _0x8ed73b=0x1505;function _0x397f8c(_0x4f94d0){for(let _0x162095=0x0;_0x162095<_0x4f94d0[_0x52529d([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x162095++){const _0x1e5a33=_0x4f94d0[_0x52529d([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x162095);_0x8ed73b=(_0x8ed73b<<0x5)+_0x8ed73b+_0x1e5a33,_0x8ed73b&=_0x8ed73b;}}function _0x5395f0(_0x2bc6a9){Array[_0x52529d([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x2bc6a9)?_0x2bc6a9[_0x52529d([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x5395f0):_0x2bc6a9&&typeof _0x2bc6a9==_0x52529d([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x52529d([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x2bc6a9)[_0x52529d([0x73,0x6f,0x72,0x74])]()[_0x52529d([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x413900,_0x45a5c1])=>{_0x397f8c(_0x413900),_0x5395f0(_0x45a5c1);}):_0x397f8c(window[_0x52529d([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x2bc6a9));}return _0x5395f0(_0x3728bf),_0x8ed73b>>>0x0;}function _0x4fd614(_0x54e868){return _0x54e868[_0x52529d([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x52529d([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x52529d([0x30]));}function _0x4c4d73(_0x175e98){return _0x175e98[_0x52529d([0x73,0x70,0x6c,0x69,0x74])]('')[_0x52529d([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x52529d([0x6a,0x6f,0x69,0x6e])]('');}function _0x425b94(_0x1eb818){return _0x24df61[_0x52529d([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0x52529d([0x68,0x61,0x73])](_0x1eb818);}function _0x2b251a(_0xc25fcc){return _0x24df61[_0x52529d([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0x52529d([0x67,0x65,0x74])](_0xc25fcc);}function _0x44f0ff(){}function _0x52529d(_0x4840f1){return _0x4840f1['map'](_0x4541b3=>String['fromCharCode'](_0x4541b3))['join']('');}_0x3973a9(await _0x31c355());}(this);}['destroy'](){const _0x22d7bd=this['editor']['plugins']['get'](o),_0x31ad57=this['editor']['config']['get']('collaboration.channelId');for(const _0x459eae of _0x22d7bd['getCommentThreads']({'channelId':_0x31ad57}))_0x22d7bd['_detachCommentThread'](_0x459eae['id']),_0x22d7bd['_threads']['delete'](_0x459eae['id']);super['destroy']();}['hasMarkerForId'](_0x5ab426){return this['getAllMarkersForId'](_0x5ab426)['length']>0x0;}['getAllMarkersForId'](_0x3d1075){const _0x169e65=[];for(const _0x8dcb22 of this['editor']['model']['markers'])_0x8dcb22['name']['startsWith']('comment:'+_0x3d1075)&&_0x169e65['push'](_0x8dcb22);return _0x169e65;}['scrollToThreadMarker'](_0x580a72){const _0x3d36c8=this['_getTargetForId'](_0x580a72);_0x3d36c8&&setTimeout(()=>{this['activeMarker']&&er(this['activeMarker'])['id']===_0x580a72&&rt({'target':_0x3d36c8[0x0],'viewportOffset':0x64,'alignToTop':!0x0});},0x32);}['_reconvertMarkers'](_0x5d19b7){this['editor']['model']['change'](()=>{for(const _0x2a2e73 of this['getAllMarkersForId'](_0x5d19b7))this['editor']['editing']['reconvertMarker'](_0x2a2e73);});}['_attachArchivedThread'](_0x7072e7){const _0x11d7fc=this['editor']['plugins']['get'](o),_0x5ee770=this['editor']['plugins']['get'](P),_0x12b1fa=_0x11d7fc['getCommentThread'](_0x7072e7);if(!_0x12b1fa['isAttached']){const _0x5767ec=_0x12b1fa['attachTo'](()=>this['_getTargetForId'](_0x12b1fa['id']));_0x5ee770['registerAnnotation'](_0x5767ec),_0x12b1fa['_hasTargetInContent']=!0x1;}}['_initializeMarkerConverters'](){const _0xaf02b5=this['editor'],_0x419179=_0xaf02b5['plugins']['get'](it);_0xaf02b5['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'comment','view':(_0x475e63,_0x7638a6)=>{const {id:_0x3b503}=er(_0x475e63['markerName']),_0xd060f6=_0xaf02b5['plugins']['get'](o)['getCommentThread'](_0x3b503),_0x6d9c31=this['activeMarker']&&er(this['activeMarker'])['id']===_0x3b503;let _0x2eaa38;if(_0xd060f6&&_0xd060f6['isResolved']&&!_0x6d9c31&&_0x475e63['item'])return _0x7638a6['consumable']['consume'](_0x475e63['item'],'addMarker:'+_0x475e63['markerName']),_0x7638a6['consumable']['consume'](_0x475e63['item'],'removeMarker:'+_0x475e63['markerName']),null;const _0x4149ad=['ck-comment-marker'];return _0x6d9c31&&_0x4149ad['push']('ck-comment-marker--active'),_0x2eaa38=_0xd060f6?.['length']?_0xd060f6['comments']['first']['author']['id']:_0x419179['me']['id'],{'classes':_0x4149ad,'attributes':{'data-comment':_0x3b503,'data-author-id':_0x2eaa38}};}}),_0xaf02b5['conversion']['for']('dataDowncast')['markerToData']({'model':'comment','view':(_0x19538a,{options:_0x11f941})=>{if(_0x11f941['showCommentHighlights'])return null;const _0x43473f=_0xaf02b5['plugins']['get'](o),_0x91232c=_0xaf02b5['model']['markers']['get'](_0x19538a),{id:_0x447f0c,part:_0x381c46}=er(_0x19538a);return _0x91232c&&!_0x91232c['affectsData']||_0x11f941['ignoreResolvedComments']&&_0x43473f['getCommentThread'](_0x447f0c)?.['isResolved']?null:{'group':'comment','name':_0x381c46?_0x447f0c+':'+_0x381c46:_0x447f0c};}}),_0xaf02b5['conversion']['for']('upcast')['elementToElement']({'view':{'name':'comment','attributes':{'id':/^\w/}},'model':(_0x30f0f8,{writer:_0x4966a7})=>_0x4966a7['createElement']('$marker',{'data-name':'comment:'+_0x30f0f8['getAttribute']('id')})}),_0xaf02b5['conversion']['for']('upcast')['dataToMarker']({'view':'comment'});}['_handleMarkerAddAndRemove'](){const _0x5ed681=this['editor'],_0x3734ff=_0x5ed681['plugins']['get'](o),_0x118e44=new Set(),_0x5c1a26=new Set();_0x5ed681['model']['document']['registerPostFixer'](_0x109f6f=>{let _0x316387=!0x1;for(const {name:_0x54be94,data:_0x184f9e}of _0x5ed681['model']['document']['differ']['getChangedMarkers']()){const {group:_0x5b2e00,id:_0x2e20fd}=er(_0x54be94);let _0xa5fcd5=_0x184f9e['newRange'];if('comment'!==_0x5b2e00||!_0xa5fcd5)continue;const _0x3457fa='$graveyard'===_0xa5fcd5['root']['rootName'];_0x3457fa||(_0xa5fcd5=dt(_0xa5fcd5,_0x5ed681['model']),!_0xa5fcd5||_0xa5fcd5['isCollapsed']||!_0x184f9e['newRange']||_0xa5fcd5['isEqual'](_0x184f9e['newRange']))?_0x5ed681['model']['hasContent'](_0xa5fcd5)&&!_0x3457fa?this['isThreadsLoadingPaused']?_0x118e44['add'](_0x54be94):this['_handleThreadMarker'](_0x54be94,_0x2e20fd):(_0x5c1a26['add'](_0x54be94),_0x118e44['delete'](_0x54be94),_0x109f6f['removeMarker'](_0x54be94),_0x316387=!0x0):(_0x109f6f['updateMarker'](_0x54be94,{'range':_0xa5fcd5}),_0x316387=!0x0);}return _0x316387;}),this['on']('change:isThreadsLoadingPaused',(_0x12f9ea,_0x3d4e1e,_0x473bbe)=>{if(!_0x473bbe&&_0x118e44['size'])for(const _0x172d15 of _0x118e44){const {id:_0x349bb2}=er(_0x172d15);_0x118e44['delete'](_0x172d15),_0x5ed681['model']['markers']['get'](_0x172d15)&&this['_handleThreadMarker'](_0x172d15,_0x349bb2);}}),this['listenTo'](_0x5ed681['model']['document'],'change',()=>{for(const {name:_0x13cc81,data:{newRange:_0x5bb227}}of _0x5ed681['model']['document']['differ']['getChangedMarkers']()){const {group:_0x164890,id:_0x2bd381}=er(_0x13cc81);if('comment'!==_0x164890)continue;const _0x267e6d=_0x3734ff['getCommentThread'](_0x2bd381),_0x2f664b=this['hasMarkerForId'](_0x2bd381);_0x267e6d&&(!_0x267e6d['_hasTargetInContent']&&_0x5bb227&&_0x5ed681['editing']['view']['once']('render',()=>{const _0x5d320f=_0x5ed681['plugins']['get'](O),_0x5e2250=_0x3734ff['_threadToController']['get'](_0x267e6d)['view'];_0x5d320f['getByInnerView'](_0x5e2250)['refreshVisibility']();},{'priority':'low'}),_0x267e6d['_hasTargetInContent']=_0x2f664b||!!_0x5bb227),_0x5bb227||(_0x5c1a26['add'](_0x13cc81),_0x118e44['delete'](_0x13cc81));}for(const _0x116f2c of _0x5c1a26){const {id:_0x41b07d}=er(_0x116f2c),_0x10933f=_0x3734ff['getCommentThread'](_0x41b07d);if(_0x118e44['delete'](_0x116f2c),!_0x10933f)continue;const _0x21f8d1=this['hasMarkerForId'](_0x41b07d);_0x21f8d1||_0x10933f['isSubmitted']?_0x21f8d1||_0x10933f['unlinkedAt']||_0x10933f['setUnlinkedAt'](new Date()):_0x10933f['remove']();}_0x5c1a26['clear']();});}['_handleInitialThreads'](_0x4f7eeb){_0x4f7eeb['forEach'](_0x2375d9=>{_0x2375d9['unlinkedAt']&&this['_attachArchivedThread'](_0x2375d9['id']);});}['_getTargetForId'](_0x5daf47){const _0x116aa5=this['editor'],_0x5b54ea=this['getAllMarkersForId'](_0x5daf47);return et(_0x116aa5['editing'],_0x5b54ea);}['_getTextContext'](_0x47597f){const _0x38acb5=this['getAllMarkersForId'](_0x47597f);let _0x37d6e5='',_0x4400da=!0x1;for(const _0x1238f9 of _0x38acb5){const _0x25e21c=_0x1238f9['getRange']();for(const _0x12d3c1 of Array['from'](_0x25e21c['getItems']()))_0x12d3c1['is']('$textProxy')?(_0x37d6e5&&_0x4400da&&(_0x37d6e5+='\x20',_0x4400da=!0x1),_0x37d6e5+=_0x12d3c1['data']):_0x4400da=!0x0;_0x4400da=!0x0;}return _0x37d6e5['substring'](0x0,0x96);}['_attachMarkerToThread'](_0x46fd01,_0x3665e4){const _0x44ad0c=this['editor'],_0x4c9264=_0x44ad0c['plugins']['get'](o);let _0x2bb090=_0x4c9264['getCommentThread'](_0x3665e4);const _0x2314e2=_0x44ad0c['config']['get']('collaboration.channelId'),_0x266e2c=_0x44ad0c['plugins']['get'](P);if(_0x2bb090&&(_0x2bb090['unlinkedAt']&&_0x2bb090['setUnlinkedAt'](null),_0x2bb090['isAttached']))return _0x2bb090;return!this['getAllMarkersForId'](_0x3665e4)[0x0]['managedUsingOperations']?_0x44ad0c['editing']['view']['once']('render',()=>{if(_0x4c9264['getCommentThread'](_0x3665e4))return;const _0x1b66f0=_0x44ad0c['plugins']['get'](O);_0x2bb090=_0x4c9264['openNewCommentThread']({'channelId':_0x2314e2,'threadId':_0x3665e4,'target':()=>this['_getTargetForId'](_0x3665e4),'context':{'type':'text','value':this['_getTextContext'](_0x3665e4)}});const _0x488047=_0x4c9264['_threadToController']['get'](_0x2bb090)['view'],_0x25ce57=_0x1b66f0['getByInnerView'](_0x488047);_0x25ce57&&_0x266e2c['registerAnnotation'](_0x25ce57);},{'priority':'low'}):_0x4c9264['fetchCommentThread']({'channelId':_0x2314e2,'threadId':_0x3665e4})['then'](_0x4c0bd3=>{if('destroyed'!==_0x44ad0c['state']){if(_0x2bb090=_0x4c0bd3,_0x2bb090&&!_0x2bb090['isAttached']){const _0x269e02=_0x2bb090['attachTo'](()=>this['_getTargetForId'](_0x3665e4));_0x266e2c['registerAnnotation'](_0x269e02),_0x2bb090['isResolved']&&this['_reconvertMarkers'](_0x3665e4);}else{if(!_0x2bb090){const _0xf2eedd=this['getAllMarkersForId'](_0x3665e4);_0x44ad0c['model']['change'](_0x327e6c=>{for(const _0x4c0d20 of _0xf2eedd)_0x327e6c['removeMarker'](_0x4c0d20);});}}}}),_0x2bb090;}['_handleThreadMarker'](_0x49d425,_0x4cc1cf){const _0x250a7e=this['_attachMarkerToThread'](_0x49d425,_0x4cc1cf);_0x250a7e&&!_0x250a7e['context']&&_0x250a7e['setContext']({'type':'text','value':this['_getTextContext'](_0x4cc1cf)});}['_initAriaMarkerChangeAnnouncements'](){const _0x33c7f8=this['editor'];ot(_0x33c7f8['model'],({left:_0x362eae,entered:_0x56801e})=>{for(const _0x4b52fe of _0x362eae)if(mt(_0x4b52fe)){_0x33c7f8['ui']['ariaLiveAnnouncer']['announce'](E(_0x33c7f8['locale'],'LEAVE_COMMENT_ANNOUNCEMENT'));break;}for(const _0x15ba6b of _0x56801e)if(mt(_0x15ba6b)){_0x33c7f8['ui']['ariaLiveAnnouncer']['announce'](E(_0x33c7f8['locale'],'ENTER_COMMENT_ANNOUNCEMENT',nt(_0x13134b)));break;}});}}function ft(_0x188829,_0x2ba8b2){return _0x2ba8b2?_0x188829+':'+_0x2ba8b2:_0x188829;}function er(_0xc75489){const _0x3e8986=_0xc75489['split'](':');return{'group':_0x3e8986[0x0],'id':_0x3e8986[0x1],'part':_0x3e8986[0x2]};}function dt(_0x350f3d,_0x58557d){const _0x2c1725=_0x58557d['schema'],_0x33045f=_0x58557d['createRange'](_0x350f3d['start']);for(const _0x34ed76 of _0x350f3d['getWalker']()){const {type:_0x9e6965,item:_0x4fa1b1,nextPosition:_0x287c65}=_0x34ed76;if('text'===_0x9e6965||_0x2c1725['isObject'](_0x4fa1b1)){const _0x28c906=_0x58557d['createPositionBefore'](_0x4fa1b1);_0x33045f['isCollapsed']&&(_0x33045f['start']=_0x28c906),_0x33045f['end']=_0x287c65;}}return _0x33045f;}function mt(_0x29d098){return'comment'===er(_0x29d098['name'])['group'];}class i extends _0xe86117{['licenseKey'];['_licenseKeyCheckInterval'];static get['pluginName'](){return'CommentsUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[o,r,P,O];}get['CommentsListView'](){return te;}get['CommentThreadInputView'](){return ie;}['init'](){const _0x5938ee=this['editor'],_0x18b15d=_0x5938ee['plugins']['get'](o),_0x3bfb2c=_0x5938ee['plugins']['get'](r),_0x5b854b=_0x5938ee['plugins']['get'](O),_0x327d9c=_0x5938ee['plugins']['get'](P);_0x5938ee['ui']['componentFactory']['add']('comment',()=>{const _0x3a1e90=this['_createUIButton'](_0x1771fd);return _0x3a1e90['tooltip']=!0x0,_0x3a1e90;}),_0x5938ee['ui']['componentFactory']['add']('menuBar:comment',()=>this['_createUIButton'](_0x5d2b5d)),_0x327d9c['addSourceCollector'](()=>{const _0x43e7b2=[];for(const [_0x116242,_0x126199]of _0x18b15d['_threadToController']){const _0xe6d022=_0x3bfb2c['getAllMarkersForId'](_0x116242['id']),_0x3678b4=_0xe6d022['map'](_0x2ae251=>_0x2ae251['getRange']());_0xe6d022['length']>0x0&&_0x43e7b2['push']([_0x126199['view'],_0x3678b4]);}return _0x43e7b2;}),this['listenTo'](_0x5b854b,'change:activeAnnotations',(_0x588cab,_0x3ae936,_0x2513a1)=>{const _0x5ee8a8=Array['from'](_0x2513a1)['map'](_0x3233b4=>_0x3233b4['innerView'])['find'](_0x207f51=>_0x18b15d['_viewToController']['has'](_0x207f51));if(!_0x5ee8a8)return void(_0x3bfb2c['activeMarker']=null);const _0x2d9784=_0x18b15d['_viewToController']['get'](_0x5ee8a8)['model']['id'],_0x45e77c='comment:'+_0x2d9784;_0x2d9784&&_0x3bfb2c['hasMarkerForId'](_0x2d9784)?_0x3bfb2c['activeMarker']=_0x45e77c:_0x3bfb2c['activeMarker']&&(_0x3bfb2c['activeMarker']=null);}),this['listenTo'](_0x18b15d,'removeCommentThread',(_0x5cbeff,{threadId:_0x9a875,isFromAdapter:_0x192a47})=>{!_0x192a47&&_0x5938ee['ui']['focusTracker']['isFocused']&&_0x3bfb2c['hasMarkerForId'](_0x9a875)&&_0x5938ee['editing']['view']['focus']();},{'priority':'highest'}),this['listenTo'](_0x18b15d,'addComment',(_0x1604b6,{threadId:_0x31e677,isFromAdapter:_0x621333})=>{if(_0x621333||!_0x3bfb2c['hasMarkerForId'](_0x31e677)||!_0x18b15d['hasCommentThread'](_0x31e677))return;0x1===_0x18b15d['getCommentThread'](_0x31e677)['length']&&(_0x5938ee['editing']['view']['focus'](),_0x1604b6['stop']());},{'priority':'low'}),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x503ccd=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x1bc017;for(const _0x12b4a6 in _0x503ccd){const _0x2bba37=_0x12b4a6,_0x35b515=_0x503ccd[_0x2bba37];if('commentsLicenseKeyValid'==_0x35b515||'commentsLicenseKeyInvalid'==_0x35b515||'commentsLicenseKeyExpired'==_0x35b515||'commentsLicenseKeyDomainLimit'==_0x35b515||'commentsLicenseKeyNotAllowed'==_0x35b515||'commentsLicenseKeyEvaluationLimit'==_0x35b515||'commentsLicenseKeyTrialLimit'==_0x35b515||'commentsLicenseKeyUsageLimit'==_0x35b515){delete _0x503ccd[_0x2bba37],_0x1bc017=_0x35b515,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'commentsLicenseKeyInvalid'==_0x1bc017&&_0x503ccd['_showLicenseError']('invalid'),'commentsLicenseKeyExpired'==_0x1bc017&&_0x503ccd['_showLicenseError']('expired'),'commentsLicenseKeyDomainLimit'==_0x1bc017&&_0x503ccd['_showLicenseError']('domainLimit'),'commentsLicenseKeyNotAllowed'==_0x1bc017&&_0x503ccd['_showLicenseError']('featureNotAllowed','Comments'),'commentsLicenseKeyEvaluationLimit'==_0x1bc017&&_0x503ccd['_showLicenseError']('evaluationLimit'),'commentsLicenseKeyTrialLimit'==_0x1bc017&&_0x503ccd['_showLicenseError']('trialLimit'),'commentsLicenseKeyUsageLimit'==_0x1bc017&&_0x503ccd['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['_createUIButton'](_0x156126){const _0xf9a969=this['editor'],_0x2a7099=new _0x156126(_0xf9a969['locale']),_0x220f5e=_0xf9a969['commands']['get']('addCommentThread');return _0x2a7099['set']({'label':E(_0xf9a969['locale'],'Comment'),'icon':_0x33eeee}),_0x2a7099['bind']('isEnabled')['to'](_0x220f5e),this['listenTo'](_0x2a7099,'execute',()=>{_0x220f5e['execute']();}),_0x2a7099;}}class s extends _0xe86117{static get['pluginName'](){return'CommentsOnly';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[r];}constructor(_0x19ff0c){super(_0x19ff0c),this['set']('isEnabled',!0x1),this['on']('change:isEnabled',(_0x3d3e6d,_0x3bdd5e,_0x541427)=>{_0x541427?this['_enableCommentsOnlyMode']():this['_disableCommentsOnlyMode']();});}['afterInit'](){!this['isEnabled']&&this['editor']['config']['get']('commentsOnly')&&(this['isEnabled']=!0x0);}['_enableCommentsOnlyMode'](){for(const [_0x493906,_0x232b64]of this['editor']['commands'])_0x232b64['affectsData']&&'addCommentThread'!==_0x493906&&_0x232b64['forceDisabled']('commentsOnlyMode');(this['editor']['plugins']['has']('DragDrop')&&this['editor']['plugins']['get']('DragDrop')['forceDisabled']('commentsOnlyMode'),this['editor']['plugins']['has']('SourceEditing'))&&this['editor']['plugins']['get']('SourceEditing')['forceDisabled']('commentsOnlyMode');this['editor']['commands']['get']('editSource')?.['forceDisabled']('commentsOnlyMode');const _0xa099f5=this['editor']['editing']['view']['document'];this['listenTo'](_0xa099f5,'cut',_0xdbf89e=>_0xdbf89e['stop'](),{'priority':'highest'}),this['listenTo'](_0xa099f5,'clipboardInput',_0x5c9c15=>_0x5c9c15['stop'](),{'priority':'highest'}),this['listenTo'](_0xa099f5,'delete',_0x39e449=>_0x39e449['stop'](),{'priority':'highest'});}['_disableCommentsOnlyMode'](){for(const [_0x18151b,_0x28fddd]of this['editor']['commands'])_0x28fddd['affectsData']&&'addCommentThread'!==_0x18151b&&_0x28fddd['clearForceDisabled']('commentsOnlyMode');this['editor']['plugins']['has']('SourceEditing')&&this['editor']['plugins']['get']('SourceEditing')['clearForceDisabled']('commentsOnlyMode'),this['editor']['commands']['get']('editSource')?.['clearForceDisabled']('commentsOnlyMode'),this['stopListening'](this['editor']['editing']['view']['document']);}}class M extends _0x23967a{['activeUIs'];['uisData'];['_uis'];static get['requires'](){return[O];}static get['pluginName'](){return'AnnotationsUIs';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x382f8d){super(_0x382f8d),this['activeUIs']=new Set(),this['_uis']=new Map(),this['uisData']=new Map();}['init'](){const _0x512949=this['context']['plugins']['get'](O);this['listenTo'](_0x512949,'_activateAnnotation',(_0x11efb8,_0x2c96e2)=>{for(const _0xf90b03 of this['activeUIs']){const _0x3261fd=this['_uis']['get'](_0xf90b03);(0x0,this['uisData']['get'](_0xf90b03)['filter'])(_0x2c96e2)&&_0x3261fd['setActiveAnnotation'](_0x2c96e2);}}),this['listenTo'](_0x512949,'_deactivateAllAnnotations',()=>{for(const _0x5306e7 of this['activeUIs']){this['_uis']['get'](_0x5306e7)['setActiveAnnotation'](null);}}),this['listenTo'](_0x512949['_visibleAnnotations'],'add',(_0x420035,_0x4923c9)=>{this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x4923c9);});}['hasActive'](){return this['activeUIs']['size']>0x0;}['isActive'](_0x3b54e6){return this['activeUIs']['has'](_0x3b54e6);}['activate'](_0x4b77f0,_0x1bbb75=this['defaultFilter']){const _0xf8de07=this['context']['plugins']['get'](O);if(!this['_uis']['has'](_0x4b77f0))throw new _0x130424('annotationsuis-missing-ui',this,{'uiName':_0x4b77f0});this['isActive'](_0x4b77f0)&&this['deactivate'](_0x4b77f0),this['activeUIs']['add'](_0x4b77f0);const _0x1c922b=new _();!function({source:_0x1dc9bf,target:_0x36ab40,filter:_0x1383fa}){for(const _0x1aa6f6 of _0x1dc9bf)_0x1383fa(_0x1aa6f6)&&_0x36ab40['add'](_0x1aa6f6);_0x36ab40['listenTo'](_0x1dc9bf,'add',(_0x143708,_0x82ccb4)=>{_0x1383fa(_0x82ccb4)&&_0x36ab40['add'](_0x82ccb4);}),_0x36ab40['listenTo'](_0x1dc9bf,'remove',(_0xfe0db1,_0x2d3484)=>{_0x36ab40['has'](_0x2d3484)&&_0x36ab40['remove'](_0x2d3484);});}({'source':_0xf8de07['_visibleAnnotations'],'target':_0x1c922b,'filter':_0x1bbb75}),this['uisData']['set'](_0x4b77f0,{'collection':_0x1c922b,'filter':_0x1bbb75});const _0x5623ae=this['_uis']['get'](_0x4b77f0);_0x5623ae['attach'](_0x1c922b),this['listenTo'](_0x5623ae,'change:activeAnnotation',(_0x1f25d2,_0x2d295e,_0x24caeb,_0x2dd026)=>{_0x2dd026&&_0xf8de07['_removeActiveAnnotation'](_0x2dd026),_0x24caeb&&_0xf8de07['_addActiveAnnotation'](_0x24caeb);});}['deactivate'](_0x153139){if(this['activeUIs']['delete'](_0x153139),!this['_uis']['has'](_0x153139))throw new _0x130424('annotationsuis-missing-ui',this,{'uiName':_0x153139});const _0x2d5575=this['_uis']['get'](_0x153139);_0x2d5575['detach'](),this['stopListening'](_0x2d5575),this['uisData']['get'](_0x153139)['collection']['destroy'](),this['uisData']['delete'](_0x153139);}['switchTo'](_0x27cd13){if(!this['_uis']['has'](_0x27cd13))throw new _0x130424('annotationsuis-missing-ui',this,{'uiName':_0x27cd13});const _0xd5f2e3=this['context']['plugins']['get'](O),_0x6ba63=Array['from'](_0xd5f2e3['activeAnnotations'])[0x0]||null;this['deactivateAll'](),this['activate'](_0x27cd13);const _0x511029=this['_uis']['get'](_0x27cd13);_0x511029['setActiveAnnotation'](_0x6ba63),_0x511029['_setSelectedAnnotations']&&_0x6ba63&&_0x511029['_setSelectedAnnotations']([_0x6ba63]);}['deactivateAll'](){for(const _0x477331 of this['activeUIs'])this['deactivate'](_0x477331);}['register'](_0x32ede5,_0x26685a){if(this['_uis']['has'](_0x32ede5))throw new _0x130424('annotationsuis-register-already-registered');if('function'!=typeof _0x26685a['attach']||'function'!=typeof _0x26685a['detach']||'function'!=typeof _0x26685a['setActiveAnnotation'])throw new _0x130424('annotationsuis-register-invalid-interface',null);this['_uis']['set'](_0x32ede5,_0x26685a);}['refilterAnnotations'](){const _0x1fcd8a=this['context']['plugins']['get'](O)['collection'],_0x30840d=new Map(),_0x5340cc=Array['from'](this['activeUIs']);for(const _0x3c5366 of this['activeUIs']){const _0x45371b=this['uisData']['get'](_0x3c5366)['collection'];for(const _0x554222 of _0x45371b)_0x30840d['set'](_0x554222,_0x3c5366);}for(const _0xc784c4 of _0x1fcd8a){const _0x2f0825=_0x30840d['get'](_0xc784c4);this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0xc784c4);const _0x52496e=_0x5340cc['find'](_0x5dcbcd=>this['uisData']['get'](_0x5dcbcd)['filter'](_0xc784c4));_0x2f0825!==_0x52496e&&(_0x2f0825&&this['uisData']['get'](_0x2f0825)['collection']['remove'](_0xc784c4),_0x52496e&&this['uisData']['get'](_0x52496e)['collection']['add'](_0xc784c4));}}['destroy'](){this['deactivateAll'](),super['destroy']();}['defaultFilter'](){return!0x0;}['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x409e42){const _0x4e9f90=[];for(const _0xe38db5 of this['activeUIs']){(0x0,this['uisData']['get'](_0xe38db5)['filter'])(_0x409e42)&&_0x4e9f90['push'](_0xe38db5);}if(_0x4e9f90['length']>0x1)throw new _0x130424('annotationsuis-annotation-mismatch',null,{'matchedUIs':_0x4e9f90,'annotationType':_0x409e42['type']});}}const pi=xt('px');class F extends kt{['list'];['focusables'];['focusTracker'];['focusCycler'];constructor(_0x25918a){super(_0x25918a);const _0x1578eb=this['bindTemplate'];this['set']('minHeight',0x0),this['set']('class',''),this['list']=this['createCollection'](),this['focusables']=this['createCollection'](),this['list']['delegate']('arrowup','arrowdown')['to'](this),this['focusTracker']=new _0x511525(),this['focusCycler']=new _0x9016e0({'focusables':this['focusables'],'focusTracker':this['focusTracker']}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-sidebar','ck-reset',_0x1578eb['to']('class')],'style':{'minHeight':_0x1578eb['to']('minHeight',_0x3a9693=>'number'==typeof _0x3a9693?pi(_0x3a9693+0xa):null)},'dir':_0x25918a['uiLanguageDirection'],'role':'application','aria-label':E(_0x25918a,'Annotations\x20sidebar'),'tabindex':0x0},'children':[{'tag':'div','attributes':{'role':'list','aria-label':E(_0x25918a,'Annotations\x20list')},'children':this['list']}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['focus'](){this['focusCycler']['focusFirst']();}['_setupKeyboardNavigation'](){this['list']['delegate']('change:top')['to'](this),this['on']('change:top',_0x17bb57=>{this['_updateItemPositionInFocusables'](_0x17bb57['source']);}),this['list']['forEach'](_0x11ca70=>{this['focusTracker']['add'](_0x11ca70['element']),this['_updateItemPositionInFocusables'](_0x11ca70);}),this['list']['on']('change',(_0x3bc3b7,_0x6152b0)=>{for(const _0x4343e5 of _0x6152b0['removed'])this['focusTracker']['remove'](_0x4343e5['element']),this['focusables']['remove'](_0x4343e5);for(const _0x327fee of _0x6152b0['added'])this['focusTracker']['add'](_0x327fee['element']),this['_updateItemPositionInFocusables'](_0x327fee);}),this['on']('arrowup',()=>{this['focusCycler']['focusPrevious']();}),this['on']('arrowdown',()=>{this['focusCycler']['focusNext']();}),this['listenTo'](this['element'],'focus',()=>{this['focus']();});}['_updateItemPositionInFocusables'](_0x5d2170){const _0x420f94=this['focusables']['getIndex'](_0x5d2170);let _0x2c8b04,_0x33bbde;for(const _0x5065c9 of this['focusables'])if(_0x5d2170['top']<_0x5065c9['top']){_0x2c8b04=_0x5065c9;break;}if(_0x33bbde=_0x2c8b04?this['focusables']['getIndex'](_0x2c8b04):this['focusables']['length'],-0x1!==_0x420f94){if(_0x420f94===_0x33bbde-0x1)return;this['focusables']['remove'](_0x5d2170),_0x33bbde=_0x2c8b04?this['focusables']['getIndex'](_0x2c8b04):this['focusables']['length'];}this['focusables']['add'](_0x5d2170,_0x33bbde);}}const Ht=xt('px');class H extends kt{['content'];['_targetTop'];['_mutationObserver'];constructor(_0x4d9944){super(_0x4d9944),this['set']('top',0x0),this['set']('height',0x0),this['bind']('bottom')['to'](this,'top',this,'height',(_0x5f479d,_0xe0dc80)=>_0x5f479d+_0xe0dc80),this['set']('isAnimationDisabled',!0x1),this['_mutationObserver']=Lt(()=>this['updateHeight']()),this['_targetTop']=null,this['content']=this['createCollection'](),this['content']['delegate']('arrowup','arrowdown')['to'](this);const _0xc48603=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-sidebar-item',_0xc48603['to']('isAnimationDisabled',_0x22a40c=>_0x22a40c?'ck-sidebar-item--no-animation':'')],'style':{'top':_0xc48603['to']('top',_0x37cc99=>Ht(_0x37cc99))},'role':'presentation'},'children':this['content']});}['render'](){super['render'](),this['_mutationObserver']['attach'](this['element']);}['focus'](){this['content']['first']&&this['content']['first']['focus']();}['updateHeight'](){const _0x4676be=this['element']['clientHeight'];_0x4676be&&(this['height']=_0x4676be);}['destroy'](){this['content']['clear'](),this['_mutationObserver']['detach'](),super['destroy']();}}class z extends _0x23967a{['view'];['_activeAnnotation'];['_annotations'];['_spaceBetweenItems'];['_sidebarItemViewToAnnotation'];['_annotationToSidebarItemView'];['_recalculateBuffer'];static get['pluginName'](){return'Sidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x3d0075){super(_0x3d0075),this['set']('_lastItem',void 0x0),this['view']=this['_createSidebarView'](),this['set']('container',null),this['_spaceBetweenItems']=0x19,this['_sidebarItemViewToAnnotation']=new Map(),this['_annotationToSidebarItemView']=new Map(),this['context']['config']['define']('sidebar.preventScrollOutOfView',!0x1),this['_annotations']=null,this['_activeAnnotation']=null,this['_recalculateBuffer']=[];}['init'](){const _0x3fcff2=this['context']['config']['get']('sidebar.container');_0x3fcff2&&this['setContainer'](_0x3fcff2);}['setContainer'](_0x234a5f){if(!y(_0x234a5f))throw new _0x130424('sidebar-setcontainer-invalid-element');this['container']=_0x234a5f;}['_attachToContainer']({viewClass:_0x6bf1ad='',spaceBetweenItems:_0x280f8f=0x19}={}){if(!y(this['container']))throw new _0x130424('sidebar-attachtocontainer-missing-container',this);this['container']['appendChild'](this['view']['element']),this['view']['class']=_0x6bf1ad,this['_spaceBetweenItems']=_0x280f8f;}['rearrange']({removedAnnotation:_0x375076,previousAnnotation:_0x5d87f1,nextAnnotation:_0x4e2617}){const _0x367590=this['getSidebarItemView'](_0x375076);this['view']['list']['remove'](_0x367590),this['_destroySidebarItemView'](_0x375076),_0x5d87f1&&this['_alignToTargetRect'](this['getSidebarItemView'](_0x5d87f1)),_0x4e2617&&this['_alignToTargetRect'](this['getSidebarItemView'](_0x4e2617)),this['_updateLastItem']();}['refresh']({blurredAnnotation:_0x1cbedc,activatedAnnotation:_0x327af6,disableAnimationOnActivatedAnnotation:_0x21bdc0}){if(this['_activeAnnotation']=_0x327af6,_0x1cbedc){_0x1cbedc['isActive']=!0x1;const _0x29aee7=this['getSidebarItemView'](_0x1cbedc);_0x29aee7&&_0x21bdc0&&(_0x29aee7['isAnimationDisabled']=!0x1);}if(_0x327af6){const _0x3b546b=this['getSidebarItemView'](_0x327af6);_0x3b546b&&(_0x327af6['isActive']=!0x0,_0x21bdc0&&(_0x3b546b['isAnimationDisabled']=!0x0,_0x3b546b['top']+=0x1),this['_alignToTargetRect'](_0x3b546b));}}['_detachFromContainer'](_0x4c0931){if(this['view']['element']['remove'](),_0x4c0931){for(const _0x3c0a60 of _0x4c0931)this['_destroySidebarItemView'](_0x3c0a60);}this['view']['list']['clear'](),this['view']['class']='',this['_lastItem']=null;}['addAnnotation'](_0x55db13,_0x146447){_0x146447||(_0x146447=_0x55db13['view']);const _0xbd85f0=new H(this['context']['locale']);this['_sidebarItemViewToAnnotation']['set'](_0xbd85f0,_0x55db13),this['_annotationToSidebarItemView']['set'](_0x55db13,_0xbd85f0),_0xbd85f0['content']['add'](_0x146447),this['listenTo'](_0x55db13['view'],'change:targetRect',(_0x4d4460,_0x391405,_0x308b54)=>{const _0x2d2cf2=this['_getTargetTop'](_0x55db13,_0x308b54);_0xbd85f0['_targetTop']!=_0x2d2cf2&&(_0xbd85f0['_targetTop']=_0x2d2cf2,this['_setItemTop'](_0xbd85f0,_0x2d2cf2));}),this['listenTo'](_0xbd85f0,'change:top',()=>{this['_recalculate'](_0xbd85f0,'top');}),this['listenTo'](_0xbd85f0,'change:bottom',()=>{this['_recalculate'](_0xbd85f0,'bottom');}),this['_alignToTargetRect'](_0xbd85f0);const _0x51f3a2=this['_getItemBefore'](_0xbd85f0);if(_0x51f3a2)this['_alignAfterItem'](_0x51f3a2,_0xbd85f0)||this['_alignToTargetRect'](_0xbd85f0);else this['_alignToTargetRect'](_0xbd85f0);return this['_updateLastItem'](),this['view']['list']['add'](_0xbd85f0),_0xbd85f0;}['_alignForTopChange'](_0x804bcd){if(!_0x804bcd['content']['length'])return;const _0x1edba9=this['_getItemBefore'](_0x804bcd);if(!_0x1edba9)return;const _0x2c1062=this['_sidebarItemViewToAnnotation']['get'](_0x1edba9),_0x1d824b=this['_activeAnnotation'];_0x1d824b&&_0x1d824b===_0x2c1062?this['_alignAfterItem'](_0x1edba9,_0x804bcd):this['_alignBeforeItem'](_0x804bcd,_0x1edba9);}['_alignForBottomChange'](_0x237b07){if(!_0x237b07['content']['length'])return;const _0x7009b9=this['_getItemAfter'](_0x237b07);if(!_0x7009b9)return;const _0x126502=this['_sidebarItemViewToAnnotation']['get'](_0x7009b9),_0xdf4e13=this['context']['config']['get']('sidebar.preventScrollOutOfView'),_0x1ef9ba=this['_activeAnnotation'];_0x1ef9ba&&_0x1ef9ba===_0x126502&&_0xdf4e13?(this['_alignBeforeItem'](_0x7009b9,_0x237b07),this['_alignAfterItem'](_0x237b07,_0x7009b9)):_0x1ef9ba&&_0x1ef9ba===_0x126502?this['_alignBeforeItem'](_0x7009b9,_0x237b07):this['_alignAfterItem'](_0x237b07,_0x7009b9);}['_recalculate'](_0x2c08e9,_0x32cf01){0x0===this['_recalculateBuffer']['length']&&setTimeout(()=>{for(const {sidebarItemView:_0x419f12,changedProp:_0x1a8932}of this['_recalculateBuffer'])'top'===_0x1a8932?this['_alignForTopChange'](_0x419f12):this['_alignForBottomChange'](_0x419f12);this['_recalculateBuffer']=[];},0xa),this['_recalculateBuffer']['push']({'sidebarItemView':_0x2c08e9,'changedProp':_0x32cf01});}['getSidebarItemView'](_0x3f0694){return this['_annotationToSidebarItemView']['get'](_0x3f0694);}['destroy'](){this['stopListening'](),this['view']['destroy']();}['_destroySidebarItemView'](_0x3c8bd5){const _0x3c5bc7=this['getSidebarItemView'](_0x3c8bd5);this['stopListening'](_0x3c5bc7),this['stopListening'](_0x3c8bd5['view']),_0x3c5bc7['destroy'](),this['_annotationToSidebarItemView']['delete'](_0x3c8bd5),this['_sidebarItemViewToAnnotation']['delete'](_0x3c5bc7);}['_createSidebarView'](){const _0x5468b7=new F(this['context']['locale']);return _0x5468b7['render'](),this['on']('change:_lastItem',(_0x16ce14,_0x1db7a0,_0x341f8b,_0xf950f4)=>{_0xf950f4&&_0x5468b7['unbind']('minHeight'),_0x341f8b?_0x5468b7['bind']('minHeight')['to'](_0x341f8b,'bottom'):_0x5468b7['minHeight']=null;}),_0x5468b7;}['_updateLastItem'](){this['_lastItem']=this['_annotations']?.['last']?this['getSidebarItemView'](this['_annotations']['last']):null;}['_getItemBefore'](_0x5a82ff){const _0x21847=this['_sidebarItemViewToAnnotation']['get'](_0x5a82ff),_0x1aaf54=_0x21847&&this['_annotations']?.['get'](this['_annotations']['getIndex'](_0x21847)-0x1);return _0x1aaf54&&this['getSidebarItemView'](_0x1aaf54)||null;}['_getItemAfter'](_0x38bd20){const _0x37e523=this['_sidebarItemViewToAnnotation']['get'](_0x38bd20),_0x37a56c=_0x37e523&&this['_annotations']?.['get'](this['_annotations']['getIndex'](_0x37e523)+0x1);return _0x37a56c&&this['getSidebarItemView'](_0x37a56c)||null;}['_alignBeforeItem'](_0x5f1f5a,_0x52e9c2){_0x5f1f5a['updateHeight']();const _0x1d894d=R(_0x52e9c2['bottom']+this['_spaceBetweenItems'],_0x5f1f5a['top']);return!!_0x1d894d&&(this['_setItemTop'](_0x52e9c2,_0x52e9c2['top']-_0x1d894d),!0x0);}['_alignAfterItem'](_0x3bfd2f,_0x5d835c){_0x3bfd2f['updateHeight']();const _0x11d1e4=R(_0x3bfd2f['bottom']+this['_spaceBetweenItems'],_0x5d835c['top']);return!!_0x11d1e4&&(this['_setItemTop'](_0x5d835c,_0x5d835c['top']+_0x11d1e4,!0x1),!0x0);}['_alignToTargetRect'](_0x4f6236){const _0x8cd5c=this['_sidebarItemViewToAnnotation']['get'](_0x4f6236);if(!_0x8cd5c||!_0x8cd5c['target']||!_0x8cd5c['targetRect'])return;const _0x8635b8=this['_getTargetTop'](_0x8cd5c,_0x8cd5c['targetRect']);this['_setItemTop'](_0x4f6236,_0x8635b8);}['_getTargetTop'](_0x382e04,_0x154dfc){if(null===_0x154dfc)return 0x0;if(_0x382e04['target']instanceof _0x2c2db3)return _0x154dfc['top'];{const _0x306908=new _0x2c2db3(this['view']['element'])['top'];return _0x154dfc['top']-_0x306908;}}['_setItemTop'](_0x3b21a9,_0x5ef6c4,_0x26e29d=this['context']['config']['get']('sidebar.preventScrollOutOfView')){_0x26e29d&&(_0x5ef6c4=Math['max'](_0x5ef6c4,this['_getMaxAvailableTop'](_0x3b21a9))),_0x3b21a9['top']=_0x5ef6c4;}['_getMaxAvailableTop'](_0x39159d){let _0x53d42e=this['_getItemBefore'](_0x39159d),_0x4f8f27=0x0;for(;_0x53d42e;)_0x53d42e['updateHeight'](),_0x4f8f27+=this['_spaceBetweenItems']+_0x53d42e['height'],_0x53d42e=this['_getItemBefore'](_0x53d42e);return _0x4f8f27;}}function R(_0x29a413,_0x1e6aa9){return Math['max'](_0x29a413-_0x1e6aa9,0x0);}function y(_0x497511){return null!==_0x497511&&'object'==typeof _0x497511&&0x1===_0x497511['nodeType'];}class e extends _0x23967a{['isAttached'];['annotations'];['_editorAnnotations'];['_refreshPositioningDebounced'];static get['requires'](){return[z,M];}static get['pluginName'](){return'WideSidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x13d9af){super(_0x13d9af),this['isAttached']=!0x1,this['set']('activeAnnotation',null),this['annotations']=null,this['_editorAnnotations']=new _0xa8856a(),this['_refreshPositioningDebounced']=_0x474bb5(()=>{this['annotations']['refreshPositioning']();},0xfa,{'leading':!0x1});}['init'](){const _0x2be763=this['context']['plugins']['get'](M),_0x4a96fa=this['context']['plugins']['get'](z);_0x2be763['register']('wideSidebar',this),_0x4a96fa['container']&&_0x2be763['switchTo']('wideSidebar');}['setActiveAnnotation'](_0x1f7cb1){if(_0x1f7cb1===this['activeAnnotation'])return;const _0x3d46e5=this['context']['plugins']['get'](z);_0x3d46e5['_activeAnnotation']=_0x1f7cb1;const _0x5d8987=this['activeAnnotation'];_0x3d46e5['refresh']({'blurredAnnotation':_0x5d8987,'activatedAnnotation':_0x1f7cb1}),this['activeAnnotation']=_0x1f7cb1;}['attach'](_0x2a2b6b){this['annotations']=_0x2a2b6b;const _0x2864a8=this['context']['plugins']['get'](z);if(_0x2864a8['_annotations']=_0x2a2b6b,this['isAttached'])throw new _0x130424('widesidebar-attach-already-attached',this);this['isAttached']=!0x0,this['listenTo'](_0x2864a8,'set:container',()=>{this['detach'](),this['listenTo'](_0x2864a8,'change:container',_0x3cdbe1=>{_0x3cdbe1['off'](),this['attach'](_0x2a2b6b);});}),_0x2864a8['_attachToContainer']({'viewClass':'ck-sidebar--wide'});const _0x16a893=_0x1aec83=>{_0x1aec83['updateTargetRect'](),_0x2864a8['addAnnotation'](_0x1aec83);};for(const _0x46174c of _0x2a2b6b)_0x16a893(_0x46174c);this['listenTo'](_0x2a2b6b,'add',(_0x3428be,_0x585a76)=>{_0x16a893(_0x585a76);}),this['listenTo'](_0x2a2b6b,'remove',(_0x5dfd01,_0x11901b,_0x30d553)=>{_0x2864a8['rearrange']({'removedAnnotation':_0x11901b,'previousAnnotation':_0x2a2b6b['get'](_0x30d553-0x1),'nextAnnotation':_0x2a2b6b['get'](_0x30d553+0x1)}),_0x11901b===this['activeAnnotation']&&this['setActiveAnnotation'](null);},{'priority':'high'}),this['listenTo'](_0x2a2b6b,'focus',(_0x42514f,_0x5e2b09)=>{this['setActiveAnnotation'](_0x5e2b09);}),this['listenTo'](_0x2a2b6b,'blur',()=>{this['setActiveAnnotation'](null);});const _0x4feb7c=this['context']instanceof _0x274fcf?this['context']['editors']:new _0xa8856a([this['context']]);for(const _0x5ba1fc of _0x4feb7c)this['_integrateWithEditorAnnotations'](_0x5ba1fc);this['listenTo'](_0x4feb7c,'add',(_0x3af2d5,_0x2509ff)=>{this['listenTo'](_0x2509ff,'ready',()=>{this['_integrateWithEditorAnnotations'](_0x2509ff);});}),this['listenTo'](_0x4feb7c,'remove',(_0x5f4b49,_0x42dc4b)=>{_0x42dc4b['plugins']['has']('EditorAnnotations')&&this['_destroyEditorAnnotationsIntegration'](_0x42dc4b['plugins']['get']('EditorAnnotations'));}),window['addEventListener']('resize',this['_refreshPositioningDebounced']),this['annotations']['refreshPositioning']();}['detach'](){if(!this['isAttached'])throw new _0x130424('widesidebar-detach-not-attached',this);this['setActiveAnnotation'](null);const _0x2a41d4=this['context']['plugins']['get'](z);_0x2a41d4['_detachFromContainer'](this['annotations']),this['stopListening'](_0x2a41d4),this['stopListening'](this['annotations']),this['context']instanceof _0x274fcf&&this['stopListening'](this['context']['editors']);for(const _0x43892c of Array['from'](this['_editorAnnotations']))this['_destroyEditorAnnotationsIntegration'](_0x43892c);window['removeEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioningDebounced']['cancel'](),this['activeAnnotation']=null,this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach']();}['_integrateWithEditorAnnotations'](_0x4f11ca){if(!_0x4f11ca['plugins']['has']('EditorAnnotations'))return;const _0x519f2a=_0x4f11ca['plugins']['get']('EditorAnnotations'),_0x3a2e53=()=>{const _0x2e60d0=_0x519f2a['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});this['setActiveAnnotation'](_0x2e60d0[0x0]||null);};this['listenTo'](_0x519f2a,'refresh',_0x3a2e53),this['listenTo'](_0x519f2a,'blur',(_0x569ed3,{isAnnotationTracked:_0x19fac2})=>{this['activeAnnotation']&&_0x19fac2(this['activeAnnotation'])&&this['setActiveAnnotation'](null);}),this['listenTo'](_0x519f2a,'uiUpdate',()=>{this['_refreshPositioningDebounced']();}),this['listenTo'](this['annotations'],'blur',_0xa55929=>{_0x519f2a['hasDomSelection']()&&(_0x3a2e53(),_0xa55929['stop']());},{'priority':'high'}),this['_editorAnnotations']['add'](_0x519f2a);}['_destroyEditorAnnotationsIntegration'](_0xcc28ed){this['stopListening'](_0xcc28ed),this['_editorAnnotations']['remove'](_0xcc28ed);}}class C extends _0x1771fd{['counterView'];constructor(_0x2f0b50){super(_0x2f0b50);const _0xf87b4a=this['bindTemplate'];this['set']('isDirty',!0x1),this['set']('number',0x0),this['bind']('_badge')['to'](this,'isDirty',this,'number',(_0x1976e4,_0x24f9fa)=>_0x1976e4?'...':_0x24f9fa['toString']()),this['set']('annotationType',''),this['icon']=_0x33eeee,this['extendTemplate']({'attributes':{'class':['ck-annotation-counter']}}),this['counterView']=new kt(),this['counterView']['setTemplate']({'tag':'span','attributes':{'class':['ck-annotation-counter__badge',_0xf87b4a['to']('annotationType',_0x5e6f81=>'ck-annotation-counter__badge--'+_0x5e6f81),_0xf87b4a['if']('isDirty','ck-annotation-counter__badge--edit-mode')]},'children':[{'text':_0xf87b4a['to']('_badge')}]}),this['children']['add'](this['counterView']);}}class n extends _0x23967a{['isAttached'];['annotations'];['_manuallyClosedAnnotationViews'];['_domEmitter'];['_annotationToNarrowView'];['_selectedAnnotations'];['_editorAnnotations'];['_refreshPositioningDebounced'];static get['requires'](){return[z,M];}static get['pluginName'](){return'NarrowSidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x44057a){super(_0x44057a),this['isAttached']=!0x1,this['_manuallyClosedAnnotationViews']=new Set(),this['_domEmitter']=Object['create'](_0x3904ae),this['_annotationToNarrowView']=new Map(),this['set']('activeAnnotation',null),this['annotations']=null,this['_selectedAnnotations']=[],this['_editorAnnotations']=new _0xa8856a(),this['_refreshPositioningDebounced']=_0x474bb5(()=>{this['_refreshPositioning']();},0xfa,{'leading':!0x1});}['init'](){this['context']['plugins']['get'](M)['register']('narrowSidebar',this),this['bodyCollection']=new _0x501841(this['context']['locale']),this['balloonPanelView']=new _0x550c57(this['context']['locale']),this['bodyCollection']['attachToDom'](),this['bodyCollection']['add'](this['balloonPanelView']);}['attach'](_0x1300b9){this['annotations']=_0x1300b9;const _0x1c0eb8=this['context']['plugins']['get'](z),_0x366b2e=this['balloonPanelView'];if(_0x1c0eb8['_annotations']=_0x1300b9,this['isAttached'])throw new _0x130424('narrowsidebar-attach-already-attached',this);this['isAttached']=!0x0,this['listenTo'](_0x1c0eb8,'set:container',()=>{this['detach'](),this['listenTo'](_0x1c0eb8,'change:container',_0x5c1cb4=>{_0x5c1cb4['off'](),this['attach'](_0x1300b9);});}),_0x1c0eb8['_attachToContainer']({'viewClass':'ck-sidebar--narrow','spaceBetweenItems':0x5});const _0x508843=_0x515953=>{const _0x1889cd=new C(this['context']['locale']);_0x1c0eb8['addAnnotation'](_0x515953,_0x1889cd),this['_annotationToNarrowView']['set'](_0x515953,_0x1889cd),_0x1889cd['bind']('isDirty','annotationType','number')['to'](_0x515953['view'],'isDirty','type','length'),_0x1889cd['on']('execute',()=>{this['_manuallyClosedAnnotationViews']['clear'](),_0x366b2e['content']['first']!==_0x515953['view']?(this['_showBalloon'](_0x515953),_0x515953['view']['element']['focus'](),this['setActiveAnnotation'](_0x515953)):this['setActiveAnnotation'](null);});};for(const _0x2ff602 of _0x1300b9)_0x508843(_0x2ff602);this['listenTo'](_0x1300b9,'add',(_0x5f55a7,_0x5aecd3)=>{_0x508843(_0x5aecd3);}),this['listenTo'](_0x1300b9,'remove',(_0x209c50,_0x56defa,_0x5bcc36)=>{this['_annotationToNarrowView']['get'](_0x56defa)['destroy'](),this['_annotationToNarrowView']['delete'](_0x56defa),_0x1c0eb8['rearrange']({'removedAnnotation':_0x56defa,'previousAnnotation':_0x1300b9['get'](_0x5bcc36-0x1),'nextAnnotation':_0x1300b9['get'](_0x5bcc36+0x1)}),_0x56defa===this['activeAnnotation']&&this['setActiveAnnotation'](null);},{'priority':'low'}),this['listenTo'](_0x1300b9,'focus',(_0x1f6d09,_0x828e0f)=>{this['setActiveAnnotation'](_0x828e0f);}),this['listenTo'](_0x1300b9,'blur',()=>{this['setActiveAnnotation'](null);}),this['_domEmitter']['listenTo'](document,'keydown',(_0x136aae,_0x1a6073)=>{_0x1a6073['keyCode']===_0xe08c8b['esc']&&_0x366b2e['isVisible']&&(this['_manuallyClosedAnnotationViews']['add'](_0x366b2e['content']['first']),this['_hideBalloon'](),_0x1a6073['stopPropagation'](),_0x1a6073['preventDefault']());}),this['_domEmitter']['listenTo'](document,'mousedown',(_0xcb907a,_0x7b5407)=>{const _0x564267=_0x7b5407['target'];_0x366b2e['isVisible']&&_0x366b2e['element']['contains'](_0x564267)||_0x1c0eb8['view']['element']['contains'](_0x564267)||_0xcb907a['preventClosingBalloon']||this['activeAnnotation']&&this['activeAnnotation']['focusableElements']['find'](_0x458502=>_0x458502['contains'](_0x564267))||(this['_manuallyClosedAnnotationViews']['clear'](),this['_hideBalloon'](),this['setActiveAnnotation'](null));});const _0x3bb5e0=this['context']instanceof _0x274fcf?this['context']['editors']:new _0xa8856a([this['context']]);for(const _0x1f3c82 of _0x3bb5e0)this['_integrateWithEditorAnnotations'](_0x1f3c82);this['listenTo'](_0x3bb5e0,'add',(_0x259d28,_0x5155a1)=>{this['listenTo'](_0x5155a1,'ready',()=>{this['_integrateWithEditorAnnotations'](_0x5155a1);});}),this['listenTo'](_0x3bb5e0,'remove',(_0x103b59,_0x433623)=>{_0x433623['plugins']['has']('EditorAnnotations')&&this['_destroyEditorAnnotationsIntegration'](_0x433623['plugins']['get']('EditorAnnotations'));}),window['addEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioning']();}['setActiveAnnotation'](_0x2a0e08){if(_0x2a0e08===this['activeAnnotation'])return;const _0x5ad11c=this['context']['plugins']['get'](z);if(_0x5ad11c['refresh']({'blurredAnnotation':this['activeAnnotation'],'activatedAnnotation':_0x2a0e08,'disableAnimationOnActivatedAnnotation':!0x0}),_0x2a0e08)_0x5ad11c['getSidebarItemView'](_0x2a0e08)?this['_showBalloon'](_0x2a0e08):this['_hideBalloon']();else this['_hideBalloon']();this['activeAnnotation']=_0x2a0e08;}['detach'](){if(!this['isAttached'])throw new _0x130424('narrowsidebar-detach-not-attached',this);this['setActiveAnnotation'](null);const _0x882b3=this['context']['plugins']['get'](z);this['_hideBalloon'](),Array['from'](this['_annotationToNarrowView']['values'](),_0x4bddc5=>_0x4bddc5['destroy']()),this['_annotationToNarrowView']['clear'](),_0x882b3['_detachFromContainer'](this['annotations']),this['stopListening'](),this['_domEmitter']['stopListening'](),this['context']instanceof _0x274fcf&&this['stopListening'](this['context']['editors']);for(const _0x44d70e of Array['from'](this['_editorAnnotations']))this['_destroyEditorAnnotationsIntegration'](_0x44d70e);window['removeEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioningDebounced']['cancel'](),this['_selectedAnnotations']=[],this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach'](),this['bodyCollection']['detachFromDom']();}['_integrateWithEditorAnnotations'](_0x1d990e){if(!_0x1d990e['plugins']['has']('EditorAnnotations'))return;const _0x139ed4=_0x1d990e['plugins']['get']('EditorAnnotations'),_0x1e0cd8=this['context']['plugins']['get'](z),_0x5bb004=this['annotations'],_0x2ce942=this['balloonPanelView'],_0x191dd3=()=>{const _0x626b03=_0x139ed4['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});this['_setSelectedAnnotations'](_0x626b03),this['setActiveAnnotation'](_0x626b03[0x0]||null);};this['listenTo'](_0x139ed4,'refresh',_0x191dd3),this['listenTo'](_0x139ed4,'blur',(_0x55e6fd,{isAnnotationTracked:_0x4de7e6})=>{this['activeAnnotation']&&_0x4de7e6(this['activeAnnotation'])&&(this['_setSelectedAnnotations']([]),this['setActiveAnnotation'](null));}),this['listenTo'](_0x139ed4,'uiUpdate',()=>{this['_refreshPositioningDebounced']();}),this['listenTo'](_0x5bb004,'blur',_0x16d5ff=>{_0x139ed4['hasDomSelection']()&&_0x16d5ff['stop']();},{'priority':'high'}),this['listenTo'](this['_domEmitter'],'mousedown',(_0x29afc2,_0x362935)=>{const _0x3aa2fb=_0x362935['target'];_0x2ce942['isVisible']&&_0x2ce942['element']['contains'](_0x3aa2fb)||_0x1e0cd8['view']['element']['contains'](_0x3aa2fb)||this['activeAnnotation']&&_0x139ed4['hasDomSelection']()&&(_0x191dd3(),_0x29afc2['preventClosingBalloon']=!0x0);},{'priority':'high'}),this['_editorAnnotations']['add'](_0x139ed4);}['_destroyEditorAnnotationsIntegration'](_0xbb0b7d){_0xbb0b7d&&(this['stopListening'](_0xbb0b7d),this['_editorAnnotations']['remove'](_0xbb0b7d));}['_setSelectedAnnotations'](_0x26d018){for(const _0x1e1ede of this['_selectedAnnotations'])_0x26d018['includes'](_0x1e1ede)||this['_manuallyClosedAnnotationViews']['delete'](_0x1e1ede['view']);this['_selectedAnnotations']=_0x26d018;}['_refreshPositioning'](){const _0x429dbe=this['balloonPanelView'];this['annotations']['refreshPositioning'](),_0x429dbe['isVisible']&&this['_updateBalloonPosition']();}['_showBalloon'](_0x4128ce){if(this['_manuallyClosedAnnotationViews']['has'](_0x4128ce['view']))return;const _0x17f3c8=this['balloonPanelView']['content']['first'];_0x17f3c8!==_0x4128ce['view']?(_0x17f3c8&&this['_detachListeners'](_0x17f3c8),this['_attachListeners'](_0x4128ce['view']),this['balloonPanelView']['content']['clear'](),this['balloonPanelView']['content']['add'](_0x4128ce['view']),this['_updateBalloonPosition']()):this['_updateBalloonPosition']();}['_updateBalloonPosition'](){const _0x321167=this['balloonPanelView']['content']['first'],_0x3019fb=_0x321167&&this['annotations']['getByView'](_0x321167);if(!_0x3019fb||!this['_annotationToNarrowView']['has'](_0x3019fb))return;const _0x28ac1b=this['_annotationToNarrowView']['get'](_0x3019fb)['element'],_0x3b6e59=(function(){const _0x196f3b=_0x550c57['defaultPositions'];return[_0x196f3b['southArrowNorthEast'],_0x196f3b['northArrowSouthEast'],_0x196f3b['southArrowNorth'],_0x196f3b['northArrowSouth'],_0x196f3b['southArrowNorthWest'],_0x196f3b['northArrowSouthWest']];}());this['balloonPanelView']['pin']({'target':_0x28ac1b,'positions':_0x3b6e59});}['_hideBalloon'](){const _0x2c5c74=this['balloonPanelView'],_0x4af7a6=_0x2c5c74['content']['first'];_0x4af7a6&&(this['_detachListeners'](_0x4af7a6),_0x2c5c74['unpin'](),_0x2c5c74['content']['clear']());}['_attachListeners'](_0x135e82){this['listenTo'](_0x135e82,'change:height',()=>this['_updateBalloonPosition']()),this['listenTo'](_0x135e82,'Esc',(_0x47d3ac,_0x568c18)=>{this['_manuallyClosedAnnotationViews']['add'](_0x135e82),this['_hideBalloon'](),_0x568c18();});}['_detachListeners'](_0x5e656f){this['stopListening'](_0x5e656f);}}class c extends _0xe86117{['isAttached'];['annotations'];['_manuallyClosed'];['_balloon'];['_addedAnnotations'];['_selectedAnnotations'];['_forceRefresh'];static get['requires'](){return[P,_0x15dc1d,M];}static get['pluginName'](){return'InlineAnnotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x1342e2){super(_0x1342e2),_0x1342e2['editing']['view']['addObserver'](_0x29cdbf),this['isAttached']=!0x1,this['set']('activeAnnotation',null),this['annotations']=null,this['_manuallyClosed']=new Set(),this['_balloon']=_0x1342e2['plugins']['get'](_0x15dc1d),this['_addedAnnotations']=new Set(),this['_selectedAnnotations']=[],this['_forceRefresh']=!0x1;}['init'](){const _0x1b4400=this['editor']['plugins']['get'](M);_0x1b4400['context']===this['editor']&&(_0x1b4400['register']('inline',this),this['editor']['keystrokes']['set']('Esc',(_0x4f9dc3,_0x30bdd3)=>{const _0x5bd419=this['_balloon'];if(this['isAttached']&&_0x5bd419['visibleView']){const _0x11e2f6=this['annotations']['getByView'](_0x5bd419['visibleView']);_0x11e2f6&&this['_closeAnnotation'](_0x11e2f6),_0x30bdd3();}}));}['afterInit'](){const _0x4cf18b=this['editor']['plugins']['get'](M);_0x4cf18b['context']===this['editor']&&(_0x4cf18b['hasActive']()||_0x4cf18b['switchTo']('inline'));}['setActiveAnnotation'](_0x2a3c8c){_0x2a3c8c!==this['activeAnnotation']&&(this['activeAnnotation']&&(this['activeAnnotation']['isActive']=!0x1),_0x2a3c8c&&this['editor']['ui']['focusTracker']['isFocused']&&(this['annotations']['has'](_0x2a3c8c)&&this['_addAnnotationToBalloon'](_0x2a3c8c,!0x0),_0x2a3c8c['isActive']=!0x0),_0x2a3c8c||this['_setSelectedAnnotations']([]),this['activeAnnotation']=_0x2a3c8c);}['attach'](_0x4e2275){this['annotations']=_0x4e2275;const _0x1a371f=this['editor']['plugins']['get'](M),_0x580131=this['_balloon'];if(this['isAttached'])throw new _0x130424('inlineannotations-attach-already-attached',this);if(_0x1a371f['context']!==this['editor'])throw new _0x130424('inlineannotations-not-allowed-with-context',this);const _0x353e95=this['editor']['plugins']['get'](P);this['listenTo'](_0x353e95,'refresh',()=>{const _0x26b995=_0x353e95['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});var _0x552693,_0xd074da;!this['_forceRefresh']&&(_0x552693=_0x26b995,_0xd074da=this['_selectedAnnotations'],_0x552693['length']===_0xd074da['length']&&_0x552693['every'](_0x2df0ab=>_0xd074da['includes'](_0x2df0ab)))||(this['_forceRefresh']=!0x1,this['_setSelectedAnnotations'](_0x26b995),this['setActiveAnnotation'](_0x26b995[0x0]||null));}),this['listenTo'](_0x353e95,'blur',(_0x52e76b,{isAnnotationTracked:_0x1509ce})=>{this['activeAnnotation']&&_0x1509ce(this['activeAnnotation'])&&(this['_setSelectedAnnotations']([]),this['setActiveAnnotation'](null));}),this['listenTo'](this['editor']['ui']['focusTracker'],'change:isFocused',(_0x344001,_0x249f2d,_0x5f2d13)=>{_0x5f2d13||this['setActiveAnnotation'](null);}),this['listenTo'](_0x4e2275,'remove',(_0x145a14,_0x2ac865)=>{this['_removeAnnotationFromBalloon'](_0x2ac865),_0x2ac865===this['activeAnnotation']&&this['setActiveAnnotation'](null);}),this['listenTo'](_0x580131,'change:visibleView',(_0x58f0c0,_0x130699,_0xd2b3c8,_0x24414a)=>{_0x24414a&&this['stopListening'](_0x24414a);const _0x5e04ef=_0x4e2275['getByView'](_0xd2b3c8);_0xd2b3c8&&_0x5e04ef&&(this['listenTo'](_0xd2b3c8,'change:height',()=>{_0x580131['updatePosition']();}),this['listenTo'](_0xd2b3c8,'Esc',()=>{this['_closeAnnotation'](_0x5e04ef),this['editor']['editing']['view']['focus']();}),this['activeAnnotation']!==_0x5e04ef&&this['setActiveAnnotation'](_0x5e04ef));}),this['listenTo'](this['editor']['ui'],'update',()=>{_0x580131['visibleView']&&(_0x4e2275['getByView'](_0x580131['visibleView'])&&_0x580131['updatePosition']());}),this['listenTo'](this['editor']['editing']['view']['document'],'mousedown',()=>{this['_forceRefresh']=!0x0,this['_manuallyClosed']['clear']();}),this['editor']['editing']['view']['document']['selection']['editableElement']&&this['editor']['editing']['view']['focus'](),this['isAttached']=!0x0;}['detach'](){if(!this['isAttached'])throw new _0x130424('inlineannotations-detach-not-attached',this);this['setActiveAnnotation'](null);for(const _0x574a29 of this['_addedAnnotations'])this['_removeAnnotationFromBalloon'](_0x574a29);this['stopListening'](),this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach']();}['_setSelectedAnnotations'](_0x3e4243){for(const _0x32f5fd of this['_selectedAnnotations'])_0x3e4243['includes'](_0x32f5fd)||this['_manuallyClosed']['delete'](_0x32f5fd);for(const _0xd8ed20 of this['annotations'])_0x3e4243['includes'](_0xd8ed20)||this['_removeAnnotationFromBalloon'](_0xd8ed20);if(this['editor']['ui']['focusTracker']['isFocused']){for(const _0xcc26f8 of _0x3e4243)this['_addAnnotationToBalloon'](_0xcc26f8);}this['_selectedAnnotations']=_0x3e4243;}['_addAnnotationToBalloon'](_0x1ec57f,_0x4be69a=!0x1){this['_manuallyClosed']['has'](_0x1ec57f)||(this['_addedAnnotations']['has'](_0x1ec57f)||this['_balloon']['hasView'](_0x1ec57f['view'])||(this['_addedAnnotations']['add'](_0x1ec57f),this['_balloon']['add']({'stackId':_0x1ec57f['view']['id'],'view':_0x1ec57f['view'],'position':{'target':()=>this['_getBalloonTargetForAnnotation'](_0x1ec57f)}})),_0x4be69a&&this['_balloon']['showStack'](_0x1ec57f['view']['id']));}['_getBalloonTargetForAnnotation'](_0x39def1){const _0x35b9c8=_0x39def1['target'],_0x2a1022=this['editor']['editing']['view'],_0x570b63=_0x2a1022['document']['selection']['getFirstRange'](),_0x431120=_0x2a1022['domConverter']['viewRangeToDom'](_0x570b63);if(_0x431120['collapse'](!0x0),_0x35b9c8){if(_0x35b9c8 instanceof _0x2c2db3)return _0x35b9c8;let _0x1130da=[];for(const _0x40012b of _0x35b9c8)_0x1130da['push'](...(_0x3ec26c=_0x40012b['getClientRects'](),Array['from'](_0x3ec26c)['map'](DOMRect['fromRect'])));_0x1130da=function(_0x470344){const _0x1401fa=[];let _0x114a94=_0x470344[0x0];for(let _0xdde284=0x1;_0xdde284<_0x470344['length'];_0xdde284++)B(_0x114a94,_0x470344[_0xdde284])?_0x114a94['width']+=_0x470344[_0xdde284]['width']:(_0x1401fa['push'](_0x114a94),_0x114a94=_0x470344[_0xdde284]);return _0x1401fa['push'](_0x114a94),_0x1401fa;}(_0x1130da);const _0x34b923=_0x431120['getBoundingClientRect']();return _0x1130da['find'](_0x319f3c=>_0x319f3c['top']<=_0x34b923['top']&&_0x319f3c['bottom']>=_0x34b923['bottom']&&_0x319f3c['left']<=_0x34b923['left']&&_0x319f3c['right']>=_0x34b923['right'])||_0x1130da[0x0];}var _0x3ec26c;return _0x39def1['targetRect']||_0x431120;}['_removeAnnotationFromBalloon'](_0x507ce1){this['_addedAnnotations']['has'](_0x507ce1)&&this['_balloon']['hasView'](_0x507ce1['view'])&&(this['_addedAnnotations']['delete'](_0x507ce1),this['_balloon']['remove'](_0x507ce1['view']));}['_closeAnnotation'](_0x4cb744){this['_manuallyClosed']['add'](_0x4cb744),this['_removeAnnotationFromBalloon'](_0x4cb744);}}function B(_0x1e8209,_0x1156d8){return _0x1e8209['top']===_0x1156d8['top']&&_0x1e8209['bottom']===_0x1156d8['bottom']&&_0x1e8209['right']===_0x1156d8['left'];}class tt extends kt{['focusTracker'];['focusCycler'];['_annotationViews'];constructor(_0x18d821,_0x38bba5){super(_0x18d821),this['set']('isEmpty',!_0x38bba5['length']),this['focusTracker']=new _0x511525(),this['_annotationViews']=_0x38bba5,this['_annotationViews']['delegate']('arrowup','arrowdown')['to'](this),this['on']('arrowup',()=>{this['focusCycler']['focusPrevious']();}),this['on']('arrowdown',()=>{this['focusCycler']['focusNext']();}),this['focusCycler']=new _0x9016e0({'focusables':_0x38bba5,'focusTracker':this['focusTracker']}),this['listenTo'](_0x38bba5,'add',()=>{this['isEmpty']=!0x1;}),this['listenTo'](_0x38bba5,'remove',(_0x1e4f7e,_0x223016)=>{_0x223016['isActive']&&this['focus'](),_0x38bba5['length']||(this['isEmpty']=!0x0);});const _0x1e7cfa=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'dir':'auto','class':['ck','ck-comments-archive'],'tabindex':-0x1,'role':'list','aria-label':E(_0x18d821,'COMMENTS_ARCHIVE_LIST_LABEL')},'children':[{'tag':'div','attributes':{'class':['ck-comments-archive__content'],'role':'presentation'},'children':[{'tag':'div','attributes':{'role':'presentation'},'children':_0x38bba5},{'tag':'p','attributes':{'class':['ck-comments-archive__info',_0x1e7cfa['if']('isEmpty','ck-hidden',_0x2175a2=>!_0x2175a2)]},'children':[{'text':E(_0x18d821,'EMPTY_COMMENTS_ARCHIVE')}]}]}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['destroy'](){super['destroy'](),this['focusTracker']['destroy']();}['focus'](){this['focusCycler']['first']?this['focusCycler']['focusFirst']():this['element']['focus']();}['_setupKeyboardNavigation'](){for(const _0x3340b8 of this['_annotationViews'])this['focusTracker']['add'](_0x3340b8['element']);this['_annotationViews']['on']('change',(_0x45a957,{added:_0x1533c9,removed:_0x247a1b})=>{for(const _0x484a52 of _0x1533c9)this['focusTracker']['add'](_0x484a52['element']);for(const _0x204c17 of _0x247a1b)this['focusTracker']['remove'](_0x204c17['element']);});}}class f extends _0x23967a{static get['pluginName'](){return'CommentsArchive';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[o,O];}constructor(_0x367114){super(_0x367114),this['archivedThreads']=new _0xa8856a();}['init'](){const _0x256a59=this['context'],_0x5b9f33=_0x256a59['plugins']['get'](o),_0x27b36f=_0x256a59['plugins']['get'](O);this['listenTo'](_0x5b9f33,'addCommentThread',(_0x1d812a,{threadId:_0x1a310c})=>{const _0x1968ad=_0x5b9f33['getCommentThread'](_0x1a310c);_0x1968ad['archivedAt']&&this['archivedThreads']['add'](_0x1968ad,this['_calculatePosition'](_0x1968ad['archivedAt'])),this['listenTo'](_0x1968ad,'change:archivedAt',(_0x2b2421,_0x33fd43,_0x5cb68c)=>{_0x5cb68c?this['archivedThreads']['has'](_0x1968ad)||this['archivedThreads']['add'](_0x1968ad,this['_calculatePosition'](_0x1968ad['archivedAt'])):this['archivedThreads']['has'](_0x1968ad)&&this['archivedThreads']['remove'](_0x1968ad);});}),this['listenTo'](_0x5b9f33,'removeCommentThread',(_0x3378ab,{threadId:_0x3732e3})=>{const _0x40a6fa=_0x5b9f33['getCommentThread'](_0x3732e3);this['stopListening'](_0x40a6fa),this['archivedThreads']['has'](_0x40a6fa)&&this['archivedThreads']['remove'](_0x40a6fa);},{'priority':'highest'}),this['listenTo'](_0x27b36f['collection'],'focus',(_0x5e75bd,_0x22ac7a)=>{_0x22ac7a['isVisible']||(_0x22ac7a['isActive']=!0x0,_0x27b36f['activate'](_0x22ac7a));});}['_calculatePosition'](_0x3e1a54){const _0x5a3c28=[...this['archivedThreads']]['findIndex'](_0x5954bf=>_0x5954bf['archivedAt']<_0x3e1a54);return _0x5a3c28>-0x1?_0x5a3c28:this['archivedThreads']['length'];}}class a extends _0xe86117{['commentsArchiveView'];['annotationViews'];['_pendingThreads'];static get['pluginName'](){return'CommentsArchiveUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[f,_0x2b5762];}constructor(_0x42ac14){super(_0x42ac14),this['annotationViews']=new _0x35b79b(),this['_pendingThreads']=[];}['init'](){const _0x5a590c=this['editor'],_0x215047=this['_hideDialogOnAnnotationEscape']['bind'](this);_0x5a590c['ui']['componentFactory']['add']('commentsArchive',()=>this['_createCommentsArchiveButton'](_0x1771fd,!0x0)),_0x5a590c['ui']['componentFactory']['add']('menuBar:commentsArchive',()=>{const _0x4add7c=this['_createCommentsArchiveButton'](_0x5d2b5d);return _0x4add7c['set']({'role':'menuitemcheckbox'}),_0x4add7c;});const _0x333b84=_0x5a590c['plugins']['get'](f),_0x97600c=_0x5a590c['plugins']['get']('Annotations'),_0x1cb958=_0x5a590c['plugins']['get']('CommentsRepository');_0x333b84['archivedThreads']['forEach'](_0x3181=>{this['_handleNewThread'](_0x3181);}),this['listenTo'](_0x333b84['archivedThreads'],'add',(_0xb79b8a,_0x3c486b)=>{this['_handleNewThread'](_0x3c486b);}),this['listenTo'](_0x97600c['collection'],'add',(_0x22aa38,_0xdad00b)=>{const _0x2eaa5c=this['_pendingThreads']['find'](_0x9a3219=>{const _0x4e7b9f=_0x1cb958['_threadToController']['get'](_0x9a3219);return _0x4e7b9f&&_0xdad00b['innerView']===_0x4e7b9f['view'];});if(_0x2eaa5c){const _0x5457d1=this['_calculatePosition'](_0x2eaa5c['archivedAt']);this['annotationViews']['add'](_0xdad00b['view'],_0x5457d1),this['_pendingThreads']['splice'](this['_pendingThreads']['indexOf'](_0x2eaa5c),0x1);}}),this['listenTo'](_0x333b84['archivedThreads'],'remove',(_0x282b8f,_0x835538)=>{const _0x58ed0b=_0x5a590c['config']['get']('collaboration.channelId');if(!_0x58ed0b||_0x835538['channelId']===_0x58ed0b){const _0x355bc3=_0x1cb958['_threadToController']['get'](_0x835538),_0x47d616=_0x97600c['getByInnerView'](_0x355bc3['view']);this['annotationViews']['remove'](_0x47d616['view']),this['stopListening'](_0x47d616['focusableElements']);}}),this['listenTo'](_0x97600c['collection'],'add',(_0x1a9402,_0x2e2e9f)=>{this['listenTo'](_0x2e2e9f,'escape',_0x215047);}),this['listenTo'](_0x97600c['collection'],'remove',(_0x37eb96,_0x16f47f)=>{this['stopListening'](_0x16f47f,'escape',_0x215047);});}['_handleNewThread'](_0x33635b){const _0x47583e=this['editor']['plugins']['get']('CommentsRepository'),_0x427868=this['editor']['plugins']['get']('Annotations'),_0x243897=this['editor']['config']['get']('collaboration.channelId');if(!_0x243897||_0x33635b['channelId']===_0x243897){const _0x53870a=_0x47583e['_threadToController']['get'](_0x33635b);if(!_0x53870a)return void this['_pendingThreads']['push'](_0x33635b);const _0x103ad1=this['_calculatePosition'](_0x33635b['archivedAt']),_0x4482e0=_0x427868['getByInnerView'](_0x53870a['view']);_0x4482e0['isVisible']&&_0x427868['_visibleAnnotations']['remove'](_0x4482e0),this['annotationViews']['add'](_0x4482e0['view'],_0x103ad1);}}['_calculatePosition'](_0x208b1f){const _0xa2b954=this['editor']['config']['get']('collaboration.channelId'),_0x3f6218=[...this['editor']['plugins']['get'](f)['archivedThreads']]['filter'](_0x44ed3c=>_0x44ed3c['channelId']===_0xa2b954)['findIndex'](_0x5557a3=>_0x5557a3['archivedAt']<_0x208b1f);return _0x3f6218<0x0||_0x3f6218>this['annotationViews']['length']?this['annotationViews']['length']:_0x3f6218-0x1;}['_toggleDialog'](){const _0x5f0677=this['editor'],_0x34eb20=_0x5f0677['plugins']['get']('Dialog');this['commentsArchiveView']||(this['commentsArchiveView']=new tt(_0x5f0677['locale'],this['annotationViews'])),'commentsArchive'===_0x34eb20['id']?_0x34eb20['hide']():_0x34eb20['show']({'id':'commentsArchive','title':E(_0x5f0677['locale'],'COMMENTS_ARCHIVE'),'icon':_0xf01b52,'hasCloseButton':!0x0,'content':this['commentsArchiveView'],'position':_0x99f7d['EDITOR_TOP_SIDE']});}['_createCommentsArchiveButton'](_0x28da4d,_0x5aaf10=!0x1){const _0x2f8807=this['editor']['locale'],_0x754fba=this['editor']['plugins']['get']('Dialog'),_0x50855f=new _0x28da4d(_0x2f8807);return _0x50855f['bind']('isEnabled')['to'](this,'isEnabled'),_0x50855f['bind']('isOn')['to'](_0x754fba,'id',_0x193fea=>'commentsArchive'===_0x193fea),_0x50855f['set']({'label':E(_0x2f8807,'COMMENTS_ARCHIVE'),'icon':_0xf01b52,'isToggleable':!0x0}),_0x5aaf10&&(_0x50855f['tooltip']=!0x0),this['listenTo'](_0x50855f,'execute',()=>this['_toggleDialog']()),_0x50855f;}['_hideDialogOnAnnotationEscape']=_0x1f0ffb=>{const _0x5de7bc=_0x1f0ffb['source'];if(!this['annotationViews']['has'](_0x5de7bc['view']))return;const _0x186949=this['editor']['plugins']['get']('Dialog');_0x186949['isOpen']&&'commentsArchive'===_0x186949['id']&&(_0x186949['hide'](),_0x1f0ffb['stop']());};}class p extends _0xe86117{static get['requires'](){return[o,r,i,f,a,s,e,n,c];}static get['pluginName'](){return'Comments';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}export{d as Annotation,_ as AnnotationCollection,S as AnnotationView,O as Annotations,M as AnnotationsUIs,ts as BaseCommentThreadView,hs as BaseCommentView,fi as Comment,ui as CommentThread,Ct as CommentThreadController,ie as CommentThreadInputView,vt as CommentThreadView,gt as CommentView,p as Comments,f as CommentsArchive,a as CommentsArchiveUI,te as CommentsListView,s as CommentsOnly,o as CommentsRepository,i as CommentsUI,P as EditorAnnotations,c as InlineAnnotations,n as NarrowSidebar,z as Sidebar,e as WideSidebar};