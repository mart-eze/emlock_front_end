/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1bcb2d=_0x3fe0;function _0x5514(){const _0x26b533=['_addAnnotationToBalloon','inlineannotations-detach-not-attached','hasActive','destroy','getBoundingClientRect','_selectedAnnotations','viewRangeToDom','refresh','has','mousedown','map','view','fromRect','4138841vdIinA','find','getOrderedSelectedAnnotations','register','editableElement','editor','bottom','hasView','getByView','isOfficialPlugin','44102GewPCk','update','target','showStack','Esc','context','_forceRefresh','switchTo','from','1251864FQQioN','isFocused','addObserver','setActiveAnnotation','push','document','init','isActive','width','_addedAnnotations','getFirstRange','top','2013114wZtDpx','InlineAnnotations','updatePosition','listenTo','_balloon','selection','stopListening','_setSelectedAnnotations','2102732UDwvQs','includes','focusTracker','inlineannotations-attach-already-attached','detach','blur','left','add','inline','keystrokes','delete','change:height','1104900XblSWD','_removeAnnotationFromBalloon','pluginName','plugins','targetRect','editing','get','inlineannotations-not-allowed-with-context','right','_closeAnnotation','collapse','isAttached','annotations','every','_getBalloonTargetForAnnotation','focus','getClientRects','activeAnnotation','_manuallyClosed','clear','change:visibleView','change:isFocused','attach','afterInit','visibleView','isPremiumPlugin','set','321546CiyRuF','requires','length','22NLtwTC','domConverter','remove'];_0x5514=function(){return _0x26b533;};return _0x5514();}(function(_0x426a21,_0x4d743c){const _0x416f14=_0x3fe0,_0x117ca7=_0x426a21();while(!![]){try{const _0xc3505c=parseInt(_0x416f14(0x11a))/0x1*(-parseInt(_0x416f14(0xd3))/0x2)+parseInt(_0x416f14(0xe8))/0x3+parseInt(_0x416f14(0xf0))/0x4+parseInt(_0x416f14(0xfc))/0x5+-parseInt(_0x416f14(0x117))/0x6+-parseInt(_0x416f14(0x12a))/0x7+parseInt(_0x416f14(0xdc))/0x8;if(_0xc3505c===_0x4d743c)break;else _0x117ca7['push'](_0x117ca7['shift']());}catch(_0x5e1540){_0x117ca7['push'](_0x117ca7['shift']());}}}(_0x5514,0x6c730));import{Plugin as _0x536355}from'ckeditor5/src/core.js';import _0x349323 from'./annotationsuis.js';import _0x18d615 from'./editorannotations.js';import{ContextualBalloon as _0x4c57c8}from'ckeditor5/src/ui.js';import{MouseObserver as _0x25eb84}from'ckeditor5/src/engine.js';function _0x3fe0(_0x122eba,_0x2c6877){const _0x551468=_0x5514();return _0x3fe0=function(_0x3fe07e,_0x206164){_0x3fe07e=_0x3fe07e-0xd0;let _0x3e1163=_0x551468[_0x3fe07e];return _0x3e1163;},_0x3fe0(_0x122eba,_0x2c6877);}import{CKEditorError as _0x3b900d,Rect as _0x316304}from'ckeditor5/src/utils.js';import'./../../theme/annotation-inline.css';export default class c extends _0x536355{[_0x1bcb2d(0x107)];[_0x1bcb2d(0x108)];[_0x1bcb2d(0x10e)];[_0x1bcb2d(0xec)];[_0x1bcb2d(0xe5)];[_0x1bcb2d(0x122)];[_0x1bcb2d(0xd9)];static get[_0x1bcb2d(0x118)](){return[_0x18d615,_0x4c57c8,_0x349323];}static get[_0x1bcb2d(0xfe)](){const _0x18766a=_0x1bcb2d;return _0x18766a(0xe9);}static get[_0x1bcb2d(0xd2)](){return!0x0;}static get[_0x1bcb2d(0x115)](){return!0x0;}constructor(_0x54af26){const _0x462189=_0x1bcb2d;super(_0x54af26),_0x54af26[_0x462189(0x101)][_0x462189(0x128)][_0x462189(0xde)](_0x25eb84),this[_0x462189(0x107)]=!0x1,this[_0x462189(0x116)](_0x462189(0x10d),null),this[_0x462189(0x108)]=null,this[_0x462189(0x10e)]=new Set(),this[_0x462189(0xec)]=_0x54af26[_0x462189(0xff)][_0x462189(0x102)](_0x4c57c8),this[_0x462189(0xe5)]=new Set(),this[_0x462189(0x122)]=[],this[_0x462189(0xd9)]=!0x1;}[_0x1bcb2d(0xe2)](){const _0x50f8df=_0x1bcb2d,_0x50deda=this[_0x50f8df(0x12f)][_0x50f8df(0xff)][_0x50f8df(0x102)](_0x349323);_0x50deda[_0x50f8df(0xd8)]===this[_0x50f8df(0x12f)]&&(_0x50deda[_0x50f8df(0x12d)](_0x50f8df(0xf8),this),this[_0x50f8df(0x12f)][_0x50f8df(0xf9)][_0x50f8df(0x116)](_0x50f8df(0xd7),(_0x341b4b,_0x2ee2b0)=>{const _0x57f8b2=_0x50f8df,_0x2fa1a4=this[_0x57f8b2(0xec)];if(this[_0x57f8b2(0x107)]&&_0x2fa1a4[_0x57f8b2(0x114)]){const _0x1076a2=this[_0x57f8b2(0x108)][_0x57f8b2(0xd1)](_0x2fa1a4[_0x57f8b2(0x114)]);_0x1076a2&&this[_0x57f8b2(0x105)](_0x1076a2),_0x2ee2b0();}}));}[_0x1bcb2d(0x113)](){const _0xa7be8d=_0x1bcb2d,_0x2b895e=this[_0xa7be8d(0x12f)][_0xa7be8d(0xff)][_0xa7be8d(0x102)](_0x349323);_0x2b895e[_0xa7be8d(0xd8)]===this[_0xa7be8d(0x12f)]&&(_0x2b895e[_0xa7be8d(0x11f)]()||_0x2b895e[_0xa7be8d(0xda)](_0xa7be8d(0xf8)));}[_0x1bcb2d(0xdf)](_0x1e2dd8){const _0xd83bcb=_0x1bcb2d;_0x1e2dd8!==this[_0xd83bcb(0x10d)]&&(this[_0xd83bcb(0x10d)]&&(this[_0xd83bcb(0x10d)][_0xd83bcb(0xe3)]=!0x1),_0x1e2dd8&&this[_0xd83bcb(0x12f)]['ui'][_0xd83bcb(0xf2)][_0xd83bcb(0xdd)]&&(this[_0xd83bcb(0x108)][_0xd83bcb(0x125)](_0x1e2dd8)&&this[_0xd83bcb(0x11d)](_0x1e2dd8,!0x0),_0x1e2dd8[_0xd83bcb(0xe3)]=!0x0),_0x1e2dd8||this[_0xd83bcb(0xef)]([]),this[_0xd83bcb(0x10d)]=_0x1e2dd8);}[_0x1bcb2d(0x112)](_0x4f9195){const _0x3e1f1f=_0x1bcb2d;this[_0x3e1f1f(0x108)]=_0x4f9195;const _0x1d238d=this[_0x3e1f1f(0x12f)][_0x3e1f1f(0xff)][_0x3e1f1f(0x102)](_0x349323),_0x2f002e=this[_0x3e1f1f(0xec)];if(this[_0x3e1f1f(0x107)])throw new _0x3b900d(_0x3e1f1f(0xf3),this);if(_0x1d238d[_0x3e1f1f(0xd8)]!==this[_0x3e1f1f(0x12f)])throw new _0x3b900d(_0x3e1f1f(0x103),this);const _0x2d8790=this[_0x3e1f1f(0x12f)][_0x3e1f1f(0xff)][_0x3e1f1f(0x102)](_0x18d615);this[_0x3e1f1f(0xeb)](_0x2d8790,_0x3e1f1f(0x124),()=>{const _0x113b92=_0x3e1f1f,_0x5810a2=_0x2d8790[_0x113b92(0x12c)]({'annotations':this[_0x113b92(0x108)],'activeAnnotation':this[_0x113b92(0x10d)]});var _0x14bae0,_0x1cc353;!this[_0x113b92(0xd9)]&&(_0x14bae0=_0x5810a2,_0x1cc353=this[_0x113b92(0x122)],_0x14bae0[_0x113b92(0x119)]===_0x1cc353[_0x113b92(0x119)]&&_0x14bae0[_0x113b92(0x109)](_0x1ac639=>_0x1cc353[_0x113b92(0xf1)](_0x1ac639)))||(this[_0x113b92(0xd9)]=!0x1,this[_0x113b92(0xef)](_0x5810a2),this[_0x113b92(0xdf)](_0x5810a2[0x0]||null));}),this[_0x3e1f1f(0xeb)](_0x2d8790,_0x3e1f1f(0xf5),(_0x2cebac,{isAnnotationTracked:_0x431050})=>{const _0x4b6c64=_0x3e1f1f;this[_0x4b6c64(0x10d)]&&_0x431050(this[_0x4b6c64(0x10d)])&&(this[_0x4b6c64(0xef)]([]),this[_0x4b6c64(0xdf)](null));}),this[_0x3e1f1f(0xeb)](this[_0x3e1f1f(0x12f)]['ui'][_0x3e1f1f(0xf2)],_0x3e1f1f(0x111),(_0x5b5b36,_0x106db4,_0x4de87b)=>{const _0x5e5ab7=_0x3e1f1f;_0x4de87b||this[_0x5e5ab7(0xdf)](null);}),this[_0x3e1f1f(0xeb)](_0x4f9195,_0x3e1f1f(0x11c),(_0x3bc306,_0x567595)=>{const _0x51f95b=_0x3e1f1f;this[_0x51f95b(0xfd)](_0x567595),_0x567595===this[_0x51f95b(0x10d)]&&this[_0x51f95b(0xdf)](null);}),this[_0x3e1f1f(0xeb)](_0x2f002e,_0x3e1f1f(0x110),(_0x1ac0f9,_0x1e77b5,_0x535d47,_0x740acd)=>{const _0x2a7e88=_0x3e1f1f;_0x740acd&&this[_0x2a7e88(0xee)](_0x740acd);const _0x308b7f=_0x4f9195[_0x2a7e88(0xd1)](_0x535d47);_0x535d47&&_0x308b7f&&(this[_0x2a7e88(0xeb)](_0x535d47,_0x2a7e88(0xfb),()=>{const _0x59aa27=_0x2a7e88;_0x2f002e[_0x59aa27(0xea)]();}),this[_0x2a7e88(0xeb)](_0x535d47,_0x2a7e88(0xd7),()=>{const _0x2b7fd2=_0x2a7e88;this[_0x2b7fd2(0x105)](_0x308b7f),this[_0x2b7fd2(0x12f)][_0x2b7fd2(0x101)][_0x2b7fd2(0x128)][_0x2b7fd2(0x10b)]();}),this[_0x2a7e88(0x10d)]!==_0x308b7f&&this[_0x2a7e88(0xdf)](_0x308b7f));}),this[_0x3e1f1f(0xeb)](this[_0x3e1f1f(0x12f)]['ui'],_0x3e1f1f(0xd4),()=>{const _0x14e829=_0x3e1f1f;_0x2f002e[_0x14e829(0x114)]&&(_0x4f9195[_0x14e829(0xd1)](_0x2f002e[_0x14e829(0x114)])&&_0x2f002e[_0x14e829(0xea)]());}),this[_0x3e1f1f(0xeb)](this[_0x3e1f1f(0x12f)][_0x3e1f1f(0x101)][_0x3e1f1f(0x128)][_0x3e1f1f(0xe1)],_0x3e1f1f(0x126),()=>{const _0x5dedfd=_0x3e1f1f;this[_0x5dedfd(0xd9)]=!0x0,this[_0x5dedfd(0x10e)][_0x5dedfd(0x10f)]();}),this[_0x3e1f1f(0x12f)][_0x3e1f1f(0x101)][_0x3e1f1f(0x128)][_0x3e1f1f(0xe1)][_0x3e1f1f(0xed)][_0x3e1f1f(0x12e)]&&this[_0x3e1f1f(0x12f)][_0x3e1f1f(0x101)][_0x3e1f1f(0x128)][_0x3e1f1f(0x10b)](),this[_0x3e1f1f(0x107)]=!0x0;}[_0x1bcb2d(0xf4)](){const _0x9fd18a=_0x1bcb2d;if(!this[_0x9fd18a(0x107)])throw new _0x3b900d(_0x9fd18a(0x11e),this);this[_0x9fd18a(0xdf)](null);for(const _0xcaf2f1 of this[_0x9fd18a(0xe5)])this[_0x9fd18a(0xfd)](_0xcaf2f1);this[_0x9fd18a(0xee)](),this[_0x9fd18a(0x107)]=!0x1,this[_0x9fd18a(0x108)]=null;}[_0x1bcb2d(0x120)](){const _0x231d07=_0x1bcb2d;this[_0x231d07(0x107)]&&this[_0x231d07(0xf4)]();}[_0x1bcb2d(0xef)](_0xf2c3a6){const _0x2ce2c9=_0x1bcb2d;for(const _0x32bb7f of this[_0x2ce2c9(0x122)])_0xf2c3a6[_0x2ce2c9(0xf1)](_0x32bb7f)||this[_0x2ce2c9(0x10e)][_0x2ce2c9(0xfa)](_0x32bb7f);for(const _0x4e6515 of this[_0x2ce2c9(0x108)])_0xf2c3a6[_0x2ce2c9(0xf1)](_0x4e6515)||this[_0x2ce2c9(0xfd)](_0x4e6515);if(this[_0x2ce2c9(0x12f)]['ui'][_0x2ce2c9(0xf2)][_0x2ce2c9(0xdd)]){for(const _0x5dcc87 of _0xf2c3a6)this[_0x2ce2c9(0x11d)](_0x5dcc87);}this[_0x2ce2c9(0x122)]=_0xf2c3a6;}[_0x1bcb2d(0x11d)](_0x3ffd77,_0x34f2d0=!0x1){const _0x90d063=_0x1bcb2d;this[_0x90d063(0x10e)][_0x90d063(0x125)](_0x3ffd77)||(this[_0x90d063(0xe5)][_0x90d063(0x125)](_0x3ffd77)||this[_0x90d063(0xec)][_0x90d063(0xd0)](_0x3ffd77[_0x90d063(0x128)])||(this[_0x90d063(0xe5)][_0x90d063(0xf7)](_0x3ffd77),this[_0x90d063(0xec)][_0x90d063(0xf7)]({'stackId':_0x3ffd77[_0x90d063(0x128)]['id'],'view':_0x3ffd77[_0x90d063(0x128)],'position':{'target':()=>this[_0x90d063(0x10a)](_0x3ffd77)}})),_0x34f2d0&&this[_0x90d063(0xec)][_0x90d063(0xd6)](_0x3ffd77[_0x90d063(0x128)]['id']));}[_0x1bcb2d(0x10a)](_0x243695){const _0x4eec2f=_0x1bcb2d,_0x424904=_0x243695[_0x4eec2f(0xd5)],_0x5098bc=this[_0x4eec2f(0x12f)][_0x4eec2f(0x101)][_0x4eec2f(0x128)],_0x251616=_0x5098bc[_0x4eec2f(0xe1)][_0x4eec2f(0xed)][_0x4eec2f(0xe6)](),_0x145f1d=_0x5098bc[_0x4eec2f(0x11b)][_0x4eec2f(0x123)](_0x251616);if(_0x145f1d[_0x4eec2f(0x106)](!0x0),_0x424904){if(_0x424904 instanceof _0x316304)return _0x424904;let _0x2918be=[];for(const _0x5b2dd4 of _0x424904)_0x2918be[_0x4eec2f(0xe0)](...(_0x29d5c5=_0x5b2dd4[_0x4eec2f(0x10c)](),Array[_0x4eec2f(0xdb)](_0x29d5c5)[_0x4eec2f(0x127)](DOMRect[_0x4eec2f(0x129)])));_0x2918be=function(_0x3b4d76){const _0x40b4ee=_0x4eec2f,_0x102e10=[];let _0x515f53=_0x3b4d76[0x0];for(let _0x1e20fe=0x1;_0x1e20fe<_0x3b4d76[_0x40b4ee(0x119)];_0x1e20fe++)B(_0x515f53,_0x3b4d76[_0x1e20fe])?_0x515f53[_0x40b4ee(0xe4)]+=_0x3b4d76[_0x1e20fe][_0x40b4ee(0xe4)]:(_0x102e10[_0x40b4ee(0xe0)](_0x515f53),_0x515f53=_0x3b4d76[_0x1e20fe]);return _0x102e10[_0x40b4ee(0xe0)](_0x515f53),_0x102e10;}(_0x2918be);const _0x34f01c=_0x145f1d[_0x4eec2f(0x121)]();return _0x2918be[_0x4eec2f(0x12b)](_0x4d2017=>_0x4d2017[_0x4eec2f(0xe7)]<=_0x34f01c[_0x4eec2f(0xe7)]&&_0x4d2017[_0x4eec2f(0x130)]>=_0x34f01c[_0x4eec2f(0x130)]&&_0x4d2017[_0x4eec2f(0xf6)]<=_0x34f01c[_0x4eec2f(0xf6)]&&_0x4d2017[_0x4eec2f(0x104)]>=_0x34f01c[_0x4eec2f(0x104)])||_0x2918be[0x0];}var _0x29d5c5;return _0x243695[_0x4eec2f(0x100)]||_0x145f1d;}[_0x1bcb2d(0xfd)](_0x29a9ba){const _0x2ab01d=_0x1bcb2d;this[_0x2ab01d(0xe5)][_0x2ab01d(0x125)](_0x29a9ba)&&this[_0x2ab01d(0xec)][_0x2ab01d(0xd0)](_0x29a9ba[_0x2ab01d(0x128)])&&(this[_0x2ab01d(0xe5)][_0x2ab01d(0xfa)](_0x29a9ba),this[_0x2ab01d(0xec)][_0x2ab01d(0x11c)](_0x29a9ba[_0x2ab01d(0x128)]));}[_0x1bcb2d(0x105)](_0x340466){const _0x4713a0=_0x1bcb2d;this[_0x4713a0(0x10e)][_0x4713a0(0xf7)](_0x340466),this[_0x4713a0(0xfd)](_0x340466);}}function B(_0x27a4e2,_0x507af8){const _0x2ff3a4=_0x1bcb2d;return _0x27a4e2[_0x2ff3a4(0xe7)]===_0x507af8[_0x2ff3a4(0xe7)]&&_0x27a4e2[_0x2ff3a4(0x130)]===_0x507af8[_0x2ff3a4(0x130)]&&_0x27a4e2[_0x2ff3a4(0x104)]===_0x507af8[_0x2ff3a4(0xf6)];}