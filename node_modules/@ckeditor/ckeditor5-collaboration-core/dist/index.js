/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ContextPlugin as _0x4b91de,Editor as _0x36452b}from'@ckeditor/ckeditor5-core/dist/index.js';import{CKEditorError as _0x40d10a,Collection as _0x28b47f,uid as _0xa34fc,first as _0x14af82,FocusTracker as _0x3ed1a4,KeystrokeHandler as _0x15f414}from'@ckeditor/ckeditor5-utils/dist/index.js';import{View as _0x1256b8,IconView as _0x3bf89d,ButtonView as _0x3d9bce,DropdownButtonView as _0x4c084c,FocusCycler as _0x44c837,isViewWithFocusCycler as _0x305c04}from'@ckeditor/ckeditor5-ui/dist/index.js';import{IconNotification as _0xfe0c4,IconCheck as _0x55a0a1,IconCancel as _0x3baee8}from'@ckeditor/ckeditor5-icons/dist/index.js';import{DateTime as _0x10307a}from'luxon';class n extends _0x4b91de{static get['pluginName'](){return'Permissions';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['setPermissions'](_0x210d88,_0x3f35c7){let _0x16ed9f;if(_0x3f35c7||(_0x3f35c7=this['context']['config']['get']('collaboration.channelId')),this['context']['config']['get']('collaboration.channelId')==_0x3f35c7?_0x16ed9f=this['context']:'editors'in this['context']&&this['context']['editors']&&(_0x16ed9f=this['context']['editors']['find'](_0x24aeb4=>_0x24aeb4['config']['get']('collaboration.channelId')==_0x3f35c7)),!_0x16ed9f)throw new _0x40d10a('permissions-set-permissions-invalid-channel-id',null);const _0xaec627=_0x16ed9f['plugins'],_0x5386b5=_0xaec627['has']('CommentsRepository')?_0xaec627['get']('CommentsRepository'):void 0x0,_0x161dd5=_0xaec627['has']('CommentsOnly')&&_0xaec627['get']('CommentsOnly'),_0x1dc430=_0x210d88['includes']('document:write'),_0x44c9da=_0x210d88['includes']('comment:modify_all'),_0x1e67f9=_0x210d88['includes']('comment:admin'),_0x3d4a53=_0x210d88['includes']('comment:write'),_0x57e5ef=_0x3d4a53||_0x1e67f9,_0xe9c95d=_0x57e5ef||_0x44c9da,_0x3e65ce=_0x1dc430||_0x57e5ef;(_0x161dd5&&(_0x161dd5['isEnabled']=!_0x1dc430&&_0xe9c95d),_0x16ed9f instanceof _0x36452b)&&(!(_0x1dc430||_0xe9c95d&&_0x5386b5)?_0x16ed9f['enableReadOnlyMode']('no-permissions'):_0x16ed9f['disableReadOnlyMode']('no-permissions'));if(_0x5386b5){_0x5386b5['setPermissions']({'admin':_0x1e67f9,'modifyAll':_0x44c9da,'write':_0x3d4a53,'resolve':_0x3e65ce},_0x3f35c7);const _0x1b1439=_0x16ed9f instanceof _0x36452b&&_0x16ed9f['commands']['get']('addCommentThread');_0x1b1439&&(_0x57e5ef?_0x1b1439['clearForceDisabled']('noPermissions'):_0x1b1439['forceDisabled']('noPermissions'));}}}function o(_0x1a4939,_0x54bb42){const t=_0x1a4939['t'];switch(_0x54bb42){case'Anonymous':return t('Anonymous');case'Yes':return t('Yes');case'No':return t('No');case'Are\x20you\x20sure?':return t('Are\x20you\x20sure?');case'Today':return t('Today');case'Yesterday':return t('Yesterday');case'Last':return t('Last');case'Monday':return t('Monday');case'Tuesday':return t('Tuesday');case'Wednesday':return t('Wednesday');case'Thursday':return t('Thursday');case'Friday':return t('Friday');case'Saturday':return t('Saturday');case'Sunday':return t('Sunday');default:return'';}}class u extends _0x4b91de{['users'];['_lastColor'];['_myId'];['_locale'];static get['pluginName'](){return'Users';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[n];}constructor(_0x1da428){super(_0x1da428),this['context']['config']['define']('users.anonymousUserId','anonymous-user'),this['context']['config']['define']('users.colorsCount',0x8),this['users']=new _0x28b47f(),this['_locale']=_0x1da428['locale'],this['_lastColor']=0x0,this['_myId']=null,this['decorate']('getOperationAuthor');}['init'](){this['_addAnonymousUser']();}get['me'](){return null==this['_myId']?null:this['getUser'](this['_myId']);}['addUser']({id:_0x17859d,name:_0x58e327,..._0x393300}){if(!_0x17859d||'string'!=typeof _0x17859d)throw new _0x40d10a('users-add-invalid-id');if(this['users']['has'](_0x17859d))throw new _0x40d10a('users-add-duplicated-id',null,{'id':_0x17859d});const _0x36d6c8=this['context']['config']['get']('users.getInitialsCallback'),_0x36a755={..._0x393300,'id':_0x17859d,'name':h(this['_locale'],_0x58e327),'color':this['_getNextColor']()};_0x36a755['name']=h(this['_locale'],_0x36a755['name']);const _0x830ce=new P(_0x36a755,_0x36d6c8);return this['users']['add'](_0x830ce),_0x830ce;}['getUser'](_0x10f5fd){return this['users']['get'](_0x10f5fd);}['useAnonymousUser'](){const _0x58cb71=this['context']['config']['get']('users.anonymousUserId');this['_myId']||this['defineMe'](_0x58cb71);}['defineMe'](_0x3eb4c5){if(this['_myId'])throw new _0x40d10a('users-me-already-defined',null);const _0x42b898=this['getUser'](_0x3eb4c5);if(!_0x42b898)throw new _0x40d10a('users-me-missing-user',null);this['_myId']=_0x3eb4c5,_0x42b898['_isMe']=!0x0;}['getOperationAuthor'](){return this['me'];}['_getNextColor'](){const _0x1401b9=this['context']['config']['get']('users.colorsCount');return this['_lastColor']>=_0x1401b9&&(this['_lastColor']=0x0),new l(this['_lastColor']++);}['_addAnonymousUser'](){const _0x420a50=this['context']['config']['get']('users.anonymousUserId');this['addUser']({'id':_0x420a50,'name':o(this['_locale'],'Anonymous')})['_isAnonymous']=!0x0;}}class P{['id'];['color'];['name'];['initials'];['avatar'];['_isMe'];['_isAnonymous'];constructor(_0x294e9d,_0x13ca80){this['id']=_0x294e9d['id'],this['color']=_0x294e9d['color'],this['name']=_0x294e9d['name'],this['initials']=_0x13ca80?_0x13ca80(this['name']):this['_computeInitials'](),this['avatar']=_0x294e9d['avatar'],this['_isAnonymous']=!0x1,this['_isMe']=!0x1;}get['isAnonymous'](){return this['_isAnonymous'];}get['isMe'](){return this['_isMe'];}['_computeInitials'](){const _0x565ebb=this['name']['split']('\x20')['filter'](_0x5cba6d=>/^[\p{Letter}]/u['test'](_0x5cba6d));return 0x1===_0x565ebb['length']?this['_getInitial'](_0x565ebb[0x0]):0x0===_0x565ebb['length']?this['_getInitial'](this['name']):this['_getInitial'](_0x565ebb[0x0])+this['_getInitial'](_0x565ebb[_0x565ebb['length']-0x1]);}['_getInitial'](_0x15126a){return String['fromCodePoint'](_0x15126a['codePointAt'](0x0))['toUpperCase']();}}function h(_0x2de661,_0x2b5b33=''){return''==(_0x2b5b33=_0x2b5b33['trim']())?o(_0x2de661,'Anonymous'):_0x2b5b33;}class l{['_id'];constructor(_0x582455){this['_id']=_0x582455;}['getBackgroundColorClass'](){return'ck-user__bg-color--'+this['_id'];}['getSelectionClass'](){return'ck-user__selection--'+this['_id'];}['getMarkerClass'](){return'ck-user__marker--'+this['_id'];}}class I extends _0x1256b8{['name'];['notificationView'];constructor(_0x507855,_0x1d6bd0,_0x1b694e){super(_0x507855),this['name']=_0x1d6bd0['name'],this['notificationView']=null;const _0x575e8f=['ck','ck-user'],_0x29c2c7=['ck','ck-user__img'];if(_0x1d6bd0['isAnonymous']&&_0x29c2c7['push']('ck-user__anonymous'),!_0x1d6bd0['isAnonymous']&&_0x1d6bd0['isMe']&&_0x575e8f['push']('ck-user_me'),_0x1d6bd0['avatar']&&_0x29c2c7['push']('ck-user__avatar'),_0x1b694e){const _0x3b4b22=new _0x3bf89d();_0x3b4b22['extendTemplate']({'attributes':{'class':['ck-user__icon']}}),_0x3b4b22['content']=_0xfe0c4,this['notificationView']={'tag':'div','attributes':{'class':['ck','ck-user__notification'],'data-cke-tooltip-position':'n','data-cke-tooltip-text':_0x1b694e},'children':[_0x3b4b22]};}const _0x4b0168=[{'tag':'div','attributes':{'class':_0x29c2c7,'style':{'background-image':_0x1d6bd0['avatar']?'url(\x27'+_0x1d6bd0['avatar']+'\x27)':''}}},{'tag':'div','attributes':{'class':_0x1d6bd0['avatar']?'ck\x20ck-user__name\x20ck-user__name--hidden':'ck\x20ck-user__name','aria-label':_0x1d6bd0['name']},'children':[{'text':_0x1d6bd0['initials']}]}];this['notificationView']&&_0x4b0168['push'](this['notificationView']),this['setTemplate']({'tag':'div','attributes':{'class':_0x575e8f,'data-user-id':_0x1d6bd0['id']},'children':_0x4b0168});}}class F extends _0x1256b8{['id'];constructor(_0x3683fd,_0x357179){super(_0x3683fd),this['id']='ck-aria-description-'+_0xa34fc(),this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-aria-description'],'id':this['id']},'children':[{'text':_0x357179}]});}}class U extends _0x3d9bce{['render'](){super['render'](),V(this);}}class Y extends _0x4c084c{['render'](){super['render'](),V(this);}}function V(_0x11932c){_0x11932c['listenTo'](_0x11932c['element'],'mousedown',(_0x2c44aa,_0x4c04aa)=>{_0x4c04aa['stopPropagation'](),_0x4c04aa['preventDefault']();}),_0x11932c['listenTo'](_0x11932c['element'],'mouseup',()=>{_0x11932c['element']['focus']();});}function E(_0x4a3426={},_0x3528a7){if(void 0x0!==_0x4a3426['dateTimeFormat']&&'function'!=typeof _0x4a3426['dateTimeFormat'])throw new _0x40d10a('invalid-date-time-format');return _0x21f07a=>{const _0xceee6='string'==typeof _0x21f07a?_0x10307a['fromISO'](_0x21f07a):_0x10307a['fromJSDate'](_0x21f07a),_0x562cba=_0x10307a['now'](),_0x38997c=Math['floor'](_0x562cba['diff'](_0xceee6,'days')['days']);return _0x4a3426['dateTimeFormat']?_0x4a3426['dateTimeFormat'](_0xceee6['toJSDate'](),_0x3528a7&&_0x3528a7['t']?_0x3528a7['t']:void 0x0):0x0===_0x38997c?_0x3528a7?o(_0x3528a7,'Today')+'\x20'+_0xceee6['toFormat']('hh:mma'):_0xceee6['toFormat']('\x27Today\x27\x20hh:mma'):0x1===_0x38997c?_0x3528a7?o(_0x3528a7,'Yesterday')+'\x20'+_0xceee6['toFormat']('hh:mma'):_0xceee6['toFormat']('\x27Yesterday\x27\x20hh:mma'):_0x38997c<0x7?_0x3528a7?o(_0x3528a7,'Last')+'\x20'+o(_0x3528a7,_0xceee6['toFormat']('EEEE'))+'\x20'+_0xceee6['toFormat']('hh:mma'):_0xceee6['toFormat']('\x27Last\x27\x20EEEE\x20hh:mma'):_0xceee6['toFormat']('LL-dd-yyyy\x20hh:mma');};}function A(_0x86b3ed,_0x10d606){const _0x2f6f7f=_0x86b3ed['mapper']['markerNameToElements'](_0x10d606['name']);if(!_0x2f6f7f)return null;const _0x38f9c7=_0x14af82(_0x2f6f7f['values']());return _0x86b3ed['view']['domConverter']['mapViewToDom'](_0x38f9c7)||null;}function R(_0x36d5e2,_0x5ca8d1){if(0x0===_0x5ca8d1['length'])return null;const _0x17d449=[],_0x3ece1c=_0x36d5e2['view']['domConverter'];for(const _0x551931 of _0x5ca8d1){const _0x4ff034=_0x36d5e2['mapper']['markerNameToElements'](_0x551931['name']);if(!_0x4ff034)continue;const _0x5ebc45=Array['from'](_0x4ff034)['map'](_0x41d5cd=>_0x3ece1c['mapViewToDom'](_0x41d5cd))['filter'](_0x338e25=>!!_0x338e25);_0x17d449['push'](..._0x5ebc45);}if(0x0===_0x17d449['length'])return null;const _0x5bc3ee=[];for(const _0x4a4b0e of _0x17d449){const _0x447d58=_0x4a4b0e['getClientRects']()['item'](0x0);_0x447d58&&_0x5bc3ee['push']({'x':_0x447d58['x'],'y':_0x447d58['y'],'domElement':_0x4a4b0e});}return 0x0===_0x5bc3ee['length']?null:(_0x5bc3ee['sort']((_0x1c75ff,_0x2c5601)=>_0x1c75ff['y']-_0x2c5601['y']||_0x1c75ff['x']-_0x2c5601['x']),_0x5bc3ee['map'](_0x18f9e1=>_0x18f9e1['domElement']));}function Z(_0x21264b,{limit:_0x5985f7,suffix:_0x516a9b='...'}){const _0x2652ae=[];let _0x1428f8=0x0;const _0x142bc0=_0x21264b['replace'](/</g,'\x0a<')['replace'](/>/g,'>\x0a')['replace'](/^\n/g,'')['replace'](/\n$/g,'')['split']('\x0a');for(let _0x1ee98e=0x0;_0x1ee98e<_0x142bc0['length'];_0x1ee98e++){let _0x263023=_0x142bc0[_0x1ee98e];const _0x7b670=$(_0x263023);if(_0x263023['startsWith']('<')){if(_0x1428f8>=_0x5985f7){const _0x5f2a4b=_0x263023['match'](/[a-zA-Z]+/);if(!_0x5f2a4b){_0x142bc0[_0x1ee98e]='';continue;}const _0x4a55aa=_0x5f2a4b[0x0];_0x263023['startsWith']('</')?(_0x2652ae['length']&&(_0x263023=''),_0x2652ae['pop']()):(_0x2652ae['push'](_0x4a55aa),_0x263023='');}}else{if(_0x1428f8>=_0x5985f7)_0x263023='';else{if(_0x1428f8+_0x7b670['length']>=_0x5985f7){let _0x37b065=_0x5985f7-_0x1428f8;if('\x20'===_0x7b670[_0x37b065-0x1])_0x37b065--;else{const _0x1b3ca9=_0x7b670['slice'](_0x37b065)['indexOf']('\x20');-0x1!==_0x1b3ca9?_0x37b065+=_0x1b3ca9:_0x37b065=_0x263023['length'];}_0x263023=_0x7b670['slice'](0x0,_0x37b065)['join']('')+_0x516a9b,_0x1428f8=_0x5985f7;}else _0x1428f8+=_0x7b670['length'];}}_0x142bc0[_0x1ee98e]=_0x263023;}return _0x142bc0['join']('\x0a')['replace'](/\n/g,'');}function $(_0x3b516d){const _0x1b7c35=[];for(let _0x1eb91c=0x0;_0x1eb91c<_0x3b516d['length'];_0x1eb91c++){const _0x3d14ff=_0x3b516d['substring'](_0x1eb91c)['match'](/^&[a-z0-9#]+;/);if(_0x3d14ff){const _0x3c1ed8=_0x3d14ff[0x0];_0x1b7c35['push'](_0x3c1ed8),_0x1eb91c+=_0x3c1ed8['length']-0x1;}else _0x1b7c35['push'](_0x3b516d[_0x1eb91c]);}return _0x1b7c35;}class m extends _0x1256b8{['submitView'];['cancelView'];['focusTracker'];['keystrokes'];['focusCycler'];['focusables'];constructor(_0x4f0e52){super(_0x4f0e52);const _0x21d5a1=this['bindTemplate'];this['set']('message',o(_0x4f0e52,'Are\x20you\x20sure?')),this['submitView']=this['_createButtonView'](_0x4f0e52,o(_0x4f0e52,'Yes'),_0x55a0a1,'submit'),this['cancelView']=this['_createButtonView'](_0x4f0e52,o(_0x4f0e52,'No'),_0x3baee8,'cancel'),this['focusables']=this['createCollection']([this['submitView'],this['cancelView']]),this['focusTracker']=new _0x3ed1a4(),this['keystrokes']=new _0x15f414(),this['focusCycler']=new _0x44c837({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-thread__remove-confirm'],'tabindex':-0x1,'role':'alertdialog'},'children':[{'tag':'div','attributes':{'class':'ck-thread__remove-confirm-inner','role':'presentation'},'children':[{'tag':'p','children':[{'text':_0x21d5a1['to']('message')}]},{'tag':'div','attributes':{'class':'ck-thread__remove-confirm-actions'},'children':[this['submitView'],this['cancelView']]}]}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['focus'](){this['cancelView']['element']['focus']({'preventScroll':!0x0});}['_createButtonView'](_0x4e1374,_0x2880ee,_0x2e0e3b,_0x493d97){const _0x3c3aa1=new _0x3d9bce(_0x4e1374);return _0x3c3aa1['label']=_0x2880ee,_0x3c3aa1['icon']=_0x2e0e3b,_0x3c3aa1['extendTemplate']({'attributes':{'class':'ck-thread__remove-confirm-'+_0x493d97}}),_0x3c3aa1['on']('execute',()=>this['fire'](_0x493d97)),_0x3c3aa1;}['_setupKeyboardNavigation'](){this['focusables']['forEach'](_0x2fdc45=>{this['keystrokes']['listenTo'](_0x2fdc45['element']),this['focusTracker']['add'](_0x2fdc45['element']);}),this['keystrokes']['set']('esc',(_0x41a9e0,_0x204ceb)=>{this['fire']('cancel'),_0x204ceb();});}}function c(_0x2ebd3b){return class extends _0x2ebd3b{['showConfirm'](_0x2bd25f,_0x191807){return this['confirmView']=new m(this['locale']),this['confirmView']['render'](),this['confirmView']['message']=_0x2bd25f,this['confirmView']['once']('cancel',()=>{this['_removeConfirm']();}),this['confirmView']['once']('submit',()=>{this['_removeConfirm']();}),_0x191807['appendChild'](this['confirmView']['element']),this['registerChild'](this['confirmView']),this['confirmView']['focus'](),this['set']('isConfirm',!0x0),new Promise(_0x29508d=>this['confirmView']['on']('submit',_0x29508d));}['cancelConfirm'](){this['isConfirm']&&this['confirmView']['fire']('cancel');}['_removeConfirm'](){this['element']&&this['confirmView']&&this['confirmView']['element']&&(this['element']['focus'](),this['confirmView']['element']['remove'](),this['deregisterChild'](this['confirmView']),this['isConfirm']=!0x1,this['fire']('removeConfirm'),this['confirmView']['destroy'](),this['confirmView']=void 0x0);}};}function j(_0x43a759){let _0x464c2b=0x0,_0x70c8af=0x0;for(const _0x6307e1 of M(_0x43a759))_0x464c2b=(_0x464c2b<<0x5)-_0x464c2b+_0x6307e1,_0x464c2b|=0x0,[_0x464c2b,_0x70c8af]=[_0x70c8af,_0x464c2b];return w(_0x464c2b)+w(_0x70c8af);}function*g(_0x1f6a5f){null==_0x1f6a5f||null==_0x1f6a5f?yield 0x12b9b0a1:0x0===_0x1f6a5f||!0x1===_0x1f6a5f?yield 0x0:0x1===_0x1f6a5f||0x1==_0x1f6a5f?yield 0x1:Array['isArray'](_0x1f6a5f)?yield*function*(_0x5ba997){for(const _0x3f62df of _0x5ba997)yield*g(_0x3f62df);}(_0x1f6a5f):'object'==typeof _0x1f6a5f?yield*M(_0x1f6a5f):'string'==typeof _0x1f6a5f?yield*O(_0x1f6a5f):'number'==typeof _0x1f6a5f&&(yield _0x1f6a5f);}function*M(_0x13436d){if(yield q('{'),_0x13436d){const _0x4ccace=Object['keys'](_0x13436d)['sort']();for(const _0xddc31d of _0x4ccace){yield*O(_0xddc31d),yield q(':');const _0x5c7f70=_0x13436d[_0xddc31d];yield*g(_0x5c7f70);}}yield q('}');}function*O(_0x289d4f){yield q('\x22');for(const _0x586053 of _0x289d4f)yield q(_0x586053);yield q('\x22');}function q(_0x40aa99){return _0x40aa99['charCodeAt'](0x0);}function w(_0x522f5c){return(_0x522f5c*=Math['sign'](_0x522f5c))['toString'](0x24);}const W=['initialData','context','toolbar','rootsAttributes'],D=['WebSocketGateway','RevisionTracker','Autosave','WordCount','DocumentOutline','WProofreader'];function S(_0x504056,_0x522405,_0x238653,_0x2478c1=[]){const _0x59366a='string'==typeof _0x504056?_0x238653['get'](_0x504056)['constructor']:_0x504056['prototype']['constructor'];if(_0x522405['has'](_0x59366a))return _0x522405['get'](_0x59366a);_0x522405['set'](_0x59366a,!0x0);const _0x17ce8c=[...D,..._0x2478c1]['map'](_0x146fca=>{if(_0x238653['has'](_0x146fca))return _0x238653['get'](_0x146fca)['constructor'];})['filter'](_0x46a660=>_0x46a660);if(_0x59366a&&_0x17ce8c['includes'](_0x59366a))return _0x522405['set'](_0x59366a,!0x1),!0x1;if(!_0x59366a['requires'])return _0x522405['set'](_0x59366a,!0x0),!0x0;const _0x36d16f=_0x59366a['requires']['every'](_0x4acbf6=>S(_0x4acbf6,_0x522405,_0x238653,_0x2478c1));return _0x522405['set'](_0x59366a,_0x36d16f),_0x36d16f;}function C(_0x5c3c94,_0x3a1fb8){const _0x90c384={};for(const _0x5b5984 of _0x5c3c94['config']['names']())W['includes'](_0x5b5984)||(_0x90c384[_0x5b5984]=_0x5c3c94['config']['get'](_0x5b5984));const _0x1208e7=_0x90c384['plugins']||[],_0x1658c8=_0x5c3c94['constructor']['builtinPlugins']||[],_0x384d00=_0x1208e7['length']?_0x1208e7:_0x1658c8,_0x503d76=_0x90c384['extraPlugins']||[];delete _0x90c384['extraPlugins'];const _0x41ca5a=_0x90c384['removePlugins']||[];delete _0x90c384['removePlugins'];const _0x500568=_0x5c3c94['_context']['config']['get']('plugins')||[],_0xca673b=_0x384d00['concat'](_0x503d76)['concat'](_0x500568)['map'](_0x4118dd=>'string'==typeof _0x4118dd?_0x1658c8['find'](_0x3686ad=>_0x3686ad['pluginName']==_0x4118dd):_0x4118dd)['filter'](_0x33bfa4=>!_0x41ca5a['includes'](_0x33bfa4)&&!_0x41ca5a['includes'](_0x33bfa4['pluginName'])),_0x30bd34=Array['from'](new Set(_0xca673b)),_0x16aa5e=new Map();return _0x90c384['plugins']=_0x30bd34['filter'](_0x5f5c8e=>S(_0x5f5c8e,_0x16aa5e,_0x5c3c94['plugins'],_0x3a1fb8)),_0x90c384;}function z(_0x31cb27,_0x17adf0){const _0xd9c32b=[];_0x31cb27['document']['selection']['on']('change:range',()=>{const _0x59193b=function(_0x41f116,_0x117f62){const _0x5aa57f=[];for(const _0x5b5221 of _0x41f116['markers']){const _0x16632c=_0x5b5221['getRange']();(_0x16632c['containsPosition'](_0x117f62)||_0x16632c['start']['isEqual'](_0x117f62)||_0x16632c['end']['isEqual'](_0x117f62))&&_0x5aa57f['push'](_0x5b5221);}return _0x5aa57f;}(_0x31cb27,_0x31cb27['document']['selection']['focus']),_0xdf0572=[],_0xfad0f1=[],_0x4bb9f0=[];for(const _0x21f28d of _0xd9c32b)_0x59193b['includes'](_0x21f28d)||_0xdf0572['push'](_0x21f28d);for(const _0x103fd6 of _0x59193b)_0xd9c32b['includes'](_0x103fd6)||_0xfad0f1['push'](_0x103fd6),_0x4bb9f0['push'](_0x103fd6);(_0xdf0572['length']||_0xfad0f1['length'])&&_0x17adf0({'left':_0xdf0572,'entered':_0xfad0f1}),_0xd9c32b['length']=0x0,_0xd9c32b['push'](..._0x4bb9f0);});}const J='Ctrl+Shift+E';function T(_0x30a567,_0xe951c1){const _0x1b6a53=_0x30a567['element'];_0x30a567['keystrokes']['listenTo'](_0x1b6a53);for(const _0x2960b7 of _0xe951c1)K(_0x30a567,_0x2960b7);_0xe951c1['on']('change',(_0x525941,_0x42ca39)=>{for(const _0x30ccc4 of _0x42ca39['removed'])_(_0x30a567,_0x30ccc4);for(const _0x2ae90d of Array['from'](_0x42ca39['added'])['reverse']())K(_0x30a567,_0x2ae90d);}),_0x30a567['keystrokes']['set']('enter',(_0x4033b3,_0x4cd9df)=>{_0x1b6a53===_0x4033b3['target']&&(_0x30a567['focusCycler']['focusFirst'](),_0x4cd9df());},{'filter':_0x38b22f=>_0x38b22f['target']===_0x1b6a53}),_0x30a567['keystrokes']['set']('esc',(_0x3c4ae1,_0x5f069a)=>{_0x1b6a53!==_0x3c4ae1['target']?_0x30a567['focus']():_0x30a567['fire']('escape'),_0x5f069a();}),_0x30a567['keystrokes']['set']('arrowdown',(_0x1b9cb5,_0x3110dd)=>{_0x1b6a53===_0x1b9cb5['target']&&(_0x30a567['fire']('arrowdown'),_0x3110dd());}),_0x30a567['keystrokes']['set']('arrowup',(_0x2fcc21,_0x56b6ce)=>{_0x1b6a53===_0x2fcc21['target']&&(_0x30a567['fire']('arrowup'),_0x56b6ce());});}function K(_0x3bfa39,_0x4347ac){_0x4347ac['isRendered']&&(_0x3bfa39['focusTracker']['add'](_0x4347ac['element']),_0x3bfa39['keystrokes']['listenTo'](_0x4347ac['element']),_0x305c04(_0x4347ac)&&function(_0x175445,_0x2da20a){const _0x3cee6a=_0x175445['actions'],_0x463f72=_0x2da20a['actions'];for(const _0x32d781 of Object['keys'](_0x3cee6a))if(_0x32d781 in _0x463f72&&_0x3cee6a[_0x32d781]!==_0x463f72[_0x32d781])return!0x1;return!0x0;}(_0x3bfa39['focusCycler'],_0x4347ac['focusCycler'])&&_0x3bfa39['focusCycler']['chain'](_0x4347ac['focusCycler']));}function _(_0x30fcc0,_0xfea9d5){_0x30fcc0['focusTracker']['remove'](_0xfea9d5['element']),_0x30fcc0['keystrokes']['stopListening'](_0xfea9d5['element']),_0x305c04(_0xfea9d5)&&_0x30fcc0['focusCycler']['unchain'](_0xfea9d5['focusCycler']);}export{F as AriaDescriptionView,c as ConfirmMixin,J as FOCUS_ANNOTATION_KEYSTROKE,U as LateFocusButtonView,Y as LateFocusDropdownButtonView,n as Permissions,I as UserView,u as Users,R as getAllMarkersDomElementsSorted,E as getDateTimeFormatter,A as getMarkerDomElement,j as hashObject,C as sanitizeEditorConfig,T as setupThreadKeyboardNavigation,z as surroundingMarkersDetector,Z as trimHtml};